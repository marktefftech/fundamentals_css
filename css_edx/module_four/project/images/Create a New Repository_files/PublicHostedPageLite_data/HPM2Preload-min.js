var ZLOG=(function(){var d="zlog_level";var h="error";var e="warn";var b="info";var a="debug";var c=e;var j=[h,e,b,a];function i(m){var l;for(l=0;l<j.length;l++){if(j[l]===m){return l}}return -1}function g(){var l=document.location.href;var m=l.indexOf("?");if(m<0){return c}var q=l.indexOf("#");if(q<0){q=l.length}var r=l.slice(m+1,q);if(!r){return c}var u=r.split("&");var o;for(o=0;o<u.length;o++){var n=u[o].split("=");var t=n[0];var s=n[1];if(t===d&&i(s)>=0){return s}}return e}function k(){return i(g())>=i(a)}function f(){return i(g())>=i(b)}return{getLevel:function(){return g()},debug:function(l){if(console&&console.log&&k()){console.log(l)}},info:function(l){if(console&&console.info&&f()){console.info(l)}},warn:function(l){if(console&&console.warn){console.warn(l)}},error:function(l){if(console&&console.error){console.error(l)}}}})();var ZCreditly=(function(){var g=function(p){if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}};var k=function(s,q){var v=String.fromCharCode(s.which);var r=document.querySelector(q);var u=jQuery(r).caret();var t=j(r);var p=[r.value.slice(0,u),v,r.value.slice(u+t.length)].join("");return m(p)};var m=function(p){return p.replace(/[^\d]/g,"")};var c=function(){if(document.all&&document.querySelector&&!document.addEventListener){return true}else{return false}};var l=function(p){p.className=p.className.replace(/\bhas-error\b/,"")};var i=function(r,q,p){return k(r,p).length>q};var e=function(p){if(p.metaKey||p.ctrlKey){return true}if(p.which===32){return false}if(p.which===0){return true}if(p.which<33){return true}return false};var b=function(p){return(/^\d+$/.test(String.fromCharCode(p.which)))};var n=function(r,q,p){r.preventDefault();return b(r)};var a=function(p){return p.match("^(34|37)")};var j=function(q){var r;if(document.selection){r=document.selection.createRange().text}else{var s=q.selectionStart;var p=q.selectionEnd;r=q.value.slice(s,p)}return r};var f=function(t,s,p){var r=t.target;var q=t.keyCode||t.which;if(!/\d/.test(String.fromCharCode(q))){g(t);return false
}else{if(j(r)){return true}else{if(i(t,s,p)){g(t);return false}else{return(!e(t))&&n(t,s,p)}}}};var h=(function(){var s=[4,10,15];var t=[4,8,12,16];var r=function(u){if(u){return 15}else{return 16}};var q=function(u){var v=function(G){var F=jQuery.event.fix(G);if(D(F)){return true}var C=document.querySelector(u);l(C);var B=k(F,u);var z=a(B);var E=r(z);if(f(F,E,u)){var y;var A=jQuery(C).caret();if(z){y=p(B,s)}else{y=p(B,t)}g(G);C.value=y;H(C,A)}function H(J,I){var K;if(z){K=(I===4||I===11)?I+2:I+1}else{K=I%5===4?I+2:I+1}jQuery(J).caret(K)}function D(I){var J=I.keyCode||I.which;return J===37||J===39||J===8||J===9||((G.metaKey||G.ctrlKey))}};var w=function(A){var z=jQuery,y=document.querySelector(u);setTimeout(function(){var C=y.value.replace(/ /g,"");var B;if(!z.isNumeric(C)){z(y).val(z(y).data("oldData")||"")}else{var D=a(C);if(D){B=p(C,s)}else{B=p(C,t)}z(y).val(B).data("oldData",B)}},10)};jQuery(u).on("keypress",v).on("paste",w)};var p=function(y,u){var z=[];var v=0;for(var w=0;w<u.length;w++){if(y.length>u[w]){z.push(y.slice(v,u[w]));v=u[w]}else{if(w<u.length){z.push(y.slice(v,u[w]))}else{z.push(y.slice(v))}break}}if(z.length>0){return z.join(" ")}else{return y}};return{createNumberInput:q}})();var o=(function(){var q=function(r){if(/^(34|37)/.test(r)){return"AmericanExpress"}else{if(/^4/.test(r)){return"Visa"}else{if(/^5[0-5]/.test(r)||/^2[2-7]/.test(r)){return"MasterCard"}else{if(/^(6011|622|64[4-9]|65)/.test(r)){return"Discover"}else{if(isJCB&&isJCB(r)){return"Discover"}else{if(isDiners&&isDiners(r)){return"Discover"}else{return""}}}}}}};var p=function(t){var s=document.querySelector(t);var r=function(y){var w=document.querySelector(t).value;var v=q(m(w));$(document.body).getElements("div[name='card-image-creditCardType']").each(function(C){if(v&&$(C).className.indexOf("card-image-"+v)>-1){if($(C).className.indexOf("card-image-"+v+"-disabled")>-1){$(C).removeClass("card-image-"+v+"-disabled");$(C).addClass("card-image-"+v)}$(C).setAttribute("aria-selected","true");$(C).setAttribute("aria-hidden","false");$(C).setAttribute("aria-disabled","false")
}else{var A=$(C).className.split(" "),B;for(var z=0;z<A.length;z++){if(A[z].indexOf("card-image-")>-1&&A[z].indexOf("-disabled")<0){B=A[z].substring("card-image-".length);break}}if(typeof(B)!="undefined"&&$(C).className.indexOf("card-image-"+B+"-disabled")<0){$(C).removeClass("card-image-"+B);$(C).addClass("card-image-"+B+"-disabled")}$(C).setAttribute("aria-selected","false");$(C).setAttribute("aria-hidden","true");$(C).setAttribute("aria-disabled","true")}});var u=jQuery("input[id='input-creditCardType']");u.val(v)};if(c()){s.attachEvent("onkeypress",r);s.attachEvent("onkeydown",r);s.attachEvent("onkeyup",r)}else{s.addEventListener("keypress",r);s.addEventListener("keydown",r);s.addEventListener("keyup",r)}r()};return{changeCardType:p}})();var d=function(q,p){h.createNumberInput(q);if(p){o.changeCardType(q)}};return{initialize:d}})();function submitHostedPage(a){var b=document.getElementById(a).src+"#"+encodeURIComponent(document.location.href);document.getElementById(a).src=b;ZXD.postMessage("submit",b,document.getElementById(a).contentWindow);return false}var ZXD=function(){var e,d,b=1,c,a=this;return{postMessage:function(f,h,g){ZLOG.debug("Posting message[I]: target_url="+h+", payload="+f);if(!h){return}g=g||parent;if(a.postMessage){g.postMessage(f,h.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(h){g.location=h.replace(/#.*$/,"")+"#"+(+new Date)+(b++)+"&"+f}}},receiveMessage:function(h,g,f){ZLOG.info("Registering callback[I]: source_origin="+g+", allowSubDomain="+f);if(a.postMessage){if(h){c=function(l){if(Object.prototype.toString.call(g)==="[object Function]"&&g(l.origin)===!1){return !1}if(typeof g==="string"&&l.origin!==g){if(!f){return !1}else{if(f==="true"){try{if(typeof g==="string"){var i=l.origin.split(".");if(i){var n=i.slice(-2).join(".");var j=g.split(".");var m=j.slice(-2).join(".");if(m.indexOf(n)<=-1){return !1}}}}catch(k){return !1}}else{return !1}}}h(l)}}if(a.addEventListener){a[h?"addEventListener":"removeEventListener"]("message",c,!1)}else{a[h?"attachEvent":"detachEvent"]("onmessage",c)}}else{e&&clearInterval(e);
e=null;if(h){e=setInterval(function(){var j=document.location.hash,i=/^#?\d+&/;if(j!==d&&i.test(j)){d=j;h({data:j.replace(i,"")})}},100)}}}}}();function validateFloatRange(form){var isValid=true;var focusField=null;var i=0;var fields=new Array();oRange=eval("new "+retrieveFormName(form)+"_floatRange()");for(x in oRange){var field=form[oRange[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea")&&(field.value.length>0)&&field.disabled==false){var fMin=parseFloat(oRange[x][2]("min"));var fMax=parseFloat(oRange[x][2]("max"));var fValue=parseFloat(field.value);if(!(fValue>=fMin&&fValue<=fMax)){if(i==0){focusField=field}fields[i++]=oRange[x][1];isValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function retrieveFormName(a){if(a.getAttributeNode){if(a.getAttributeNode("id")&&a.getAttributeNode("id").value){return a.getAttributeNode("id").value}else{return a.getAttributeNode("name").value}}else{if(a.getAttribute){if(a.getAttribute("id")){return a.getAttribute("id")}else{a.attributes.name}}else{if(a.id){return a.id}else{return a.name}}}}function isAllDigits(b){b=b.toString();var a="0123456789";var c=0;if(b.substring(0,2)=="0x"){a="0123456789abcdefABCDEF";c=2}else{if(b.charAt(0)=="0"){a="01234567";c=1}else{if(b.charAt(0)=="-"){c=1}}}for(var d=c;d<b.length;d++){if(a.indexOf(b.substring(d,d+1))==-1){return false}}return true}function isDecimalDigits(b){b=b.toString();var a="0123456789";var c=0;if(b.charAt(0)=="-"){c=1}for(var d=c;d<b.length;d++){if(a.indexOf(b.substring(d,d+1))==-1){return false}}return true}function validateByte(form){var bValid=true;var focusField=null;var i=0;var fields=new Array();oByte=eval("new "+retrieveFormName(form)+"_ByteValidations()");for(x in oByte){var field=form[oByte[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="select-one"||field.type=="radio")&&field.disabled==false){var value="";if(field.type=="select-one"){var si=field.selectedIndex;
if(si>=0){value=field.options[si].value}}else{value=field.value}if(value.length>0){if(!isDecimalDigits(value)){bValid=false;if(i==0){focusField=field}fields[i++]=oByte[x][1]}else{var iValue=parseInt(value,10);if(isNaN(iValue)||!(iValue>=-128&&iValue<=127)){if(i==0){focusField=field}fields[i++]=oByte[x][1];bValid=false}}}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return bValid}function validateMaxLength(form,prefix,res){if(!prefix){prefix=""}if(!res){res=""}var isValid=true;var fields=new Array();oMaxLength=eval("new "+retrieveFormName(form)+"_maxlength()");isValid=checkLength(fields,oMaxLength,form,prefix,res);if(isValid&&form.isCustomField&&form.isCustomField.value){cfMaxLength=eval("new CustomFields_maxlength()");isValid=checkLength(fields,cfMaxLength,form,prefix,res)}return isValid}function isNeedingValidation(a){return true}function checkLength(g,b,a,f,h){var d=0;var e=null;for(x in b){if(!isNeedingValidation(f+b[x][0])){continue}var j=a[f+b[x][0]];if(!j){continue}if((j.type=="hidden"||j.type=="text"||j.type=="password"||j.type=="textarea")&&j.disabled==false){var c=parseInt(b[x][2]("maxlength"));if(j.value.length>c){if(d==0){e=j}g[d++]=h+b[x][1]}}}if(g.length>0){e.focus();ZMessage.Alert(g.join("\n"));return false}return true}function validateRequired(form,prefix,res){if(!prefix){prefix=""}if(!res){res=""}var isValid=true;var focusField=null;var msg="";var standerdFields=new Array();var customFields=new Array();oRequired=eval("new "+retrieveFormName(form)+"_required()");standerdFields=checkRequiredFields(standerdFields,oRequired,form,prefix,res);if(form.isCustomField){if(form.isCustomField.value){cfRequired=eval("new CustomFields_required()");customFields=checkRequiredFields(customFields,cfRequired,form,prefix,res)}}if(standerdFields.length>0||customFields.length>0){if(focusField!=null){focusField.focus()}isValid=false;ZMessage.Alert(RequiredMsg_Prefix+standerdFields.join("\n")+customFields.join("\n"))}if(!isValid){}return isValid}function checkRequiredFields(f,e,a,d,g){var c=0;
for(x in e){if(!isNeedingValidation(d+e[x][0])){continue}var h=a[d+e[x][0]];if(!h){continue}if(h==null){f[c++]=g+e[x][1];isValid=false}else{if((h.type=="hidden"||h.type=="text"||h.type=="textarea"||h.type=="file"||h.type=="radio"||h.type=="checkbox"||h.type=="select-one"||h.type=="password")&&h.disabled==false){var j="";if(h.type=="select-one"){var b=h.selectedIndex;if(b>=0){j=h.options[b].value}}else{if(h.type=="radio"||h.type=="checkbox"){if(h.checked){j=h.value}}else{j=h.value}}if(trim(j).length==0){if((c==0)&&(h.type!="hidden")){focusField=h}f[c++]=g+e[x][1];isValid=false}}else{if(h.type=="select-multiple"){var k=h.options.length;lastSelected=-1;for(loop=k-1;loop>=0;loop--){if(h.options[loop].selected){lastSelected=loop;j=h.options[loop].value;break}}if(lastSelected<0||trim(j).length==0){if(c==0){focusField=h}f[c++]=g+e[x][1];isValid=false}}else{if((h.length>0)&&(h[0].type=="radio"||h[0].type=="checkbox")){isChecked=-1;for(loop=0;loop<h.length;loop++){if(h[loop].checked){isChecked=loop;break}}if(isChecked<0){if(c==0){focusField=h[0]}f[c++]=g+e[x][1];isValid=false}}}}}}return f}function trim(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function validateInteger(form,prefix,res){if(!prefix){prefix=""}if(!res){res=""}var bValid=true;var focusField=null;var i=0;var fields=new Array();oInteger=eval("new "+retrieveFormName(form)+"_IntegerValidations()");for(x in oInteger){var field=form[prefix+oInteger[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="select-one"||field.type=="radio")&&field.disabled==false){var value="";if(field.type=="select-one"){var si=field.selectedIndex;if(si>=0){value=field.options[si].value}}else{value=field.value}if(value.length>0){value=value.delocaliseNumber("int");if(isNaN(value)||!(value>=-2147483648&&value<=2147483647)){bValid=false;if(i==0){focusField=field}fields[i++]=res+oInteger[x][1]}}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return bValid}function validateMaxField(form){var isValid=true;
var focusField=null;var i=0;var fields=new Array();var formName=form.getAttributeNode("name");oMaxField=eval("new "+formName.value+"_maxfield()");for(x in oMaxField){var field=form[oMaxField[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="password"||field.type=="textarea")&&field.disabled==false){var compareField=form[oMaxField[x][2]("maxfield")];if(field.value<compareField.value){if(i==0){focusField=field}fields[i++]=oMaxField[x][1];isValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function validateCreditCard(form){var bValid=true;var focusField=null;var i=0;var fields=new Array();oCreditCard=eval("new "+retrieveFormName(form)+"_creditCard()");for(x in oCreditCard){var field=form[oCreditCard[x][0]];if(!field){continue}if((field.type=="text"||field.type=="textarea")&&(field.value.length>0)&&field.disabled==false){if(!luhnCheck(field.value)){if(i==0){focusField=form[oCreditCard[x][0]]}fields[i++]=oCreditCard[x][1];bValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return bValid}function luhnCheck(e){if(isLuhnNum(e)){var a=e.length;var b=a&1;var c=0;for(var d=0;d<a;d++){var f=parseInt(e.charAt(d));if(!((d&1)^b)){f*=2;if(f>9){f-=9}}c+=f}if(c==0){return false}if(c%10==0){return true}}return false}function isLuhnNum(a){a=a.toString();if(a.length==0){return false}for(var b=0;b<a.length;b++){if((a.substring(b,b+1)<"0")||(a.substring(b,b+1)>"9")){return false}}return true}function validateDate(form){var bValid=true;var focusField=null;var i=0;var fields=new Array();oDate=eval("new "+retrieveFormName(form)+"_DateValidations()");for(x in oDate){var field=form[oDate[x][0]];if(!field){continue}var value=field.value;var isStrict=true;var datePattern=oDate[x][2]("datePatternStrict");if(datePattern==null){datePattern=oDate[x][2]("datePattern");isStrict=false}if((field.type=="hidden"||field.type=="text"||field.type=="textarea")&&(value.length>0)&&(datePattern.length>0)&&field.disabled==false){var pattern=(ZParameter&&ZParameter.date_pattern)?ZParameter.date_pattern:DEFAULT_DATE_PATTERN;
var oldPattern=pattern;var values=getDateItems(value,pattern);if(!values||!isValidDate(values[2],values[1],values[0])){if(i==0){focusField=field}fields[i++]=oDate[x][1];bValid=false}else{oldPattern=oldPattern.replace(/dd/g,dayValue);oldPattern=oldPattern.replace(/MM/g,monthValue);oldPattern=oldPattern.replace(/yyyy/g,yearValue);field.value=oldPattern}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return bValid}function getDateItems(f,d,a){if(ZParameter){if(ZParameter.supportSimplifiedDateEntry){if(!a){a=false}}else{a=true}}var l=d;var n=l.indexOf("MM");var i=l.indexOf("dd");var m=l.indexOf("yyyy");l=l.replace(/yyyy/g,"(\\d{4})");l=l.replace(/\u5e74/g,"[\u5e74]");l=l.replace(/\u6708/g,"[\u6708]");l=l.replace(/\u65e5/g,"[\u65e5]");var o=l;o=o.replace(/dd/g,"(\\d{1,2})");o=o.replace(/MM/g,"(\\d{1,2})");o=o.replace(/\s/g,"\\s");o=o.replace(/\./g,"\\.");o=o.replace(/\//g,"\\/");o=o.replace(/\-/g,"\\-");var e=l;e=e.replace(/dd/g,"(\\d{2})");e=e.replace(/MM/g,"(\\d{2})");e=e.replace(/\s/g,"\\s?");e=e.replace(/\./g,"\\.?");e=e.replace(/\//g,"\\/?");e=e.replace(/\-/g,"\\-?");var c=false;var k;if(a){l=o;k=new RegExp(l);c=k.test(f)}else{l=o;k=new RegExp(l);c=k.test(f);if(!c){l=e;k=new RegExp(l);c=k.test(f)}}if(c){var b=k.exec(f);var g,j,h;if(i<n&&n<m){h=b[3];j=b[2];g=b[1]}else{if(n<i&&i<m){h=b[3];j=b[1];g=b[2]}else{if(i<m&&m<n){h=b[2];j=b[3];g=b[1]}else{if(m<i&&i<n){h=b[1];j=b[3];g=b[2]}else{if(n<m&&m<i){h=b[2];j=b[1];g=b[3]}else{if(m<n&&n<i){h=b[1];j=b[2];g=b[3]}}}}}}return new Array(h,j,g)}else{return}}function isValidDate(b,d,c){if(d<1||d>12){return false}if(b<1||b>31){return false}if((d==4||d==6||d==9||d==11)&&(b==31)){return false}if(d==2){var a=(c%4==0&&(c%100!=0||c%400==0));if(b>29||(b==29&&!a)){return false}}return true}function validateIntRange(form){var isValid=true;var focusField=null;var i=0;var fields=new Array();oRange=eval("new "+retrieveFormName(form)+"_intRange()");for(x in oRange){var field=form[oRange[x][0]];if(!field){continue}if(field.disabled==false){var value="";if(field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="radio"){value=field.value
}if(field.type=="select-one"){var si=field.selectedIndex;if(si>=0){value=field.options[si].value}}if(value.length>0){var iMin=parseInt(oRange[x][2]("min"));var iMax=parseInt(oRange[x][2]("max"));var iValue=parseInt(value,10);if(!(iValue>=iMin&&iValue<=iMax)){if(i==0){focusField=field}fields[i++]=oRange[x][1];isValid=false}}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function validateShort(form){var bValid=true;var focusField=null;var i=0;var fields=new Array();oShort=eval("new "+retrieveFormName(form)+"_ShortValidations()");for(x in oShort){var field=form[oShort[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="select-one"||field.type=="radio")&&field.disabled==false){var value="";if(field.type=="select-one"){var si=field.selectedIndex;if(si>=0){value=field.options[si].value}}else{value=field.value}if(value.length>0){if(!isDecimalDigits(value)){bValid=false;if(i==0){focusField=field}fields[i++]=oShort[x][1]}else{var iValue=parseInt(value,10);if(isNaN(iValue)||!(iValue>=-32768&&iValue<=32767)){if(i==0){focusField=field}fields[i++]=oShort[x][1];bValid=false}}}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return bValid}function validateFloat(form,prefix,res){if(!prefix){prefix=""}if(!res){res=""}var bValid=true;var focusField=null;var i=0;var fields=new Array();oFloat=eval("new "+retrieveFormName(form)+"_FloatValidations()");for(x in oFloat){if(window.gecko){form[prefix+oFloat[x][0]]=null}var field=form[prefix+oFloat[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="select-one"||field.type=="radio")&&field.disabled==false){var value="";if(field.type=="select-one"){var si=field.selectedIndex;if(si>=0){value=field.options[si].value}}else{value=field.value}if(value.length>0){value=value.delocaliseNumber();if(isNaN(value)){bValid=false;if(i==0){focusField=field}fields[i++]=res+oFloat[x][1]}}}}if(fields.length>0){focusField.focus();
ZMessage.Alert(fields.join("\n"))}return bValid}function validateEmail(form){var bValid=true;var focusField=null;var i=0;var fields=new Array();oEmail=eval("new "+retrieveFormName(form)+"_email()");for(x in oEmail){var field=form[oEmail[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea")&&(field.value.length>0)&&field.disabled==false){if(!checkEmail(field.value)){if(i==0){focusField=field}fields[i++]=oEmail[x][1];bValid=false}}}if(fields.length>0){if(focusField.type!="hidden"){focusField.focus()}ZMessage.Alert(fields.join("\n"))}return bValid}function checkEmail(b){if(b.length==0){return true}var r=0;var u=/^(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum)$/;var q=/^(.+)@(.+)$/;var o='\\(\\)><@,;:\\\\\\"\\.\\[\\]';var j="[^\\s"+o+"]";var d='("[^"]*")';var p=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;var a=j+"+";var n="("+a+"|"+d+")";var k=new RegExp("^"+n+"(\\."+n+")*$");var f=new RegExp("^"+a+"(\\."+a+")*$");var c=b.match(q);if(c==null){return false}var s=c[1];var t=c[2];for(l=0;l<s.length;l++){if(s.charCodeAt(l)>127){return false}}for(l=0;l<t.length;l++){if(t.charCodeAt(l)>127){return false}}if(s.match(k)==null){return false}var h=t.match(p);if(h!=null){for(var l=1;l<=4;l++){if(h[l]>255){return false}}return true}var g=new RegExp("^"+a+"$");var e=t.split(".");var m=e.length;for(l=0;l<m;l++){if(e[l].search(g)==-1){return false}}if(r&&e[e.length-1].length!=2&&e[e.length-1].search(u)==-1){return false}if(m<2){return false}return true}function validateMask(form){var isValid=true;var focusField=null;var i=0;var fields=new Array();oMasked=eval("new "+retrieveFormName(form)+"_mask()");for(x in oMasked){var field=form[oMasked[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="textarea"||field.type=="file")&&(field.value.length>0)&&field.disabled==false){if(!matchPattern(field.value,oMasked[x][2]("mask"))){if(i==0){focusField=field}fields[i++]=oMasked[x][1];isValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))
}return isValid}function matchPattern(b,a){return a.exec(b)}function validateMinLength(form){var isValid=true;var focusField=null;var i=0;var fields=new Array();oMinLength=eval("new "+retrieveFormName(form)+"_minlength()");for(x in oMinLength){var field=form[oMinLength[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text"||field.type=="password"||field.type=="textarea")&&field.disabled==false){var iMin=parseInt(oMinLength[x][2]("minlength"));if((trim(field.value).length>0)&&(field.value.length<iMin)){if(i==0){focusField=field}fields[i++]=oMinLength[x][1];isValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function validatePhone(form){var isValid=true;var focusField=null;var i=0;var fields=new Array();oPhone=eval("new "+retrieveFormName(form)+"_phone()");for(x in oPhone){if(!isNeedingValidation(oPhone[x][0])){continue}var field=form[oPhone[x][0]];if(!field){continue}if((field.type=="hidden"||field.type=="text")&&field.disabled==false){var iPhone=oPhone[x][2]("pattern");var pattern=new RegExp(iPhone,"g");if(field.value&&!pattern.test(field.value)){if(i==0){focusField=field}fields[i++]=oPhone[x][1];isValid=false}}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function validateFloatFields(g,c,m){var l=true;var e=null;var d=0;var f=new Array();var h=" must be a float";for(var a=0;a<g.length;a++){var j=g[a];labelRes=j.getAttribute("label");if(!j){continue}if((j.type=="hidden"||j.type=="text"||j.type=="textarea"||j.type=="select-one"||j.type=="radio")&&j.disabled==false){var k="";if(j.type=="select-one"){var b=j.selectedIndex;if(b>=0){k=j.options[b].value}}else{k=j.value}if(k.length>0){k=k.delocaliseNumber("currency");if(isNaN(k)){l=false;if(d==0){e=j}f[d++]="Price.foat.validate".i18n(labelRes)}}}}if(f.length>0){ZMessage.Alert(f.join("\n"),function(){e.focus()});if(!m){e.focus()}}return l}function validateDateString(b,c,g){var d=true;var f=c;var e=f;var a=getDateItems(b,f,g);if(!a||!isValidDate(a[2],a[1],a[0])){d=false
}return d}function validateGreateThan(form){var isValid=true,focusField=null,i=0,fields=new Array();var oGreateThan=eval("new "+retrieveFormName(form)+"_greateThan()");for(x in oGreateThan){if(!isNeedingValidation(oGreateThan[x][0])){continue}var field=form[oGreateThan[x][0]];if(!field||field.type!="text"||field.disabled){continue}var value=field.value;value=value.delocaliseNumber();var minValue=parseFloat(oGreateThan[x][2]("greateThan"));if(value&&value<=minValue){if(i==0){focusField=field}fields[i++]=oGreateThan[x][1];isValid=false}}if(fields.length>0){focusField.focus();ZMessage.Alert(fields.join("\n"))}return isValid}function validateCustomFields(form,prefix,res){if(form.isCustomField){if(!prefix){prefix=""}if(!res){res=""}var customFields=new Array();cfRequired=eval("new CustomFields_required()");customFields=checkRequiredFields(customFields,cfRequired,form,prefix,res);if(customFields.length>0){ZMessage.Alert(RequiredMsg_Prefix+customFields.join("\n"));return false}return true}return true}var initOrChangeState=function(b,a,c,d){showCountryState(b,a,c,d);$(b).addEvent("change",function(){showCountryState(this,a,c,d);var e=this.value;if(e!=""&&e!="224"&&e!="36"){$(d).value=""}})};var showCountryState=function(c,a,d,e){var b=$(c).value;if(b==""){changeState(a+"_state",a+"_selectOne_state",d,e)}else{if(b=="224"){changeState(a+"_state",a+"_unitedStates_state",d,e)}else{if(b=="36"){changeState(a+"_state",a+"_canada_state",d,e)}else{changeState(a+"_state",a+"_text_state",d,e)}}}};var changeState=function(b,a,c,d){$(b).getChildren().each(function(e){if($(e).getProperty("id")==a){$(e).setStyle("display","block");$(e).getFirst().setProperty("name",c);$(e).getFirst().setProperty("id",d);$(e).getFirst().setProperty("value","")}else{$(e).setStyle("display","none");$(e).getFirst().setProperty("name","");$(e).getFirst().setProperty("id","")}})};function fromatStrWithBlank(c,d){c=c.replace(/\s+/g,"");var b="";for(var a=0;a<c.length;a++){if(a==d[0]){b+=" ";d.shift()}b+=c.charAt(a)}return b}function isCreditCard(a){return luhnCheck(a)
}function isVisa(a){if(a&&a.match(/^4[0-9]{12}(?:[0-9]{3})?$/g)){return true}return(false)}function isMC(a){if(a&&a.match(/^5[1-5][0-9]{14}(?:\d{3})?$/g)){return true}return(false)}function isAmex(a){if(a&&a.match(/^3[47][0-9]{13}$/g)){return true}return(false)}function isDiscover(a){if(a&&a.match(/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/)&&a.length==16){return true}return(false)}function isJCB(a){if(a&&a.match(/^(?:2131|1800|35[0-9]{3})[0-9]{11}$/g)){return true}return false}function isDiners(a){if(a&&a.match(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/g)){return true}return false}(function(a){a.fn.caret=function(h){var g=this[0];var d=g.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(d){g.focus();var c=window.getSelection().getRangeAt(0),b=c.cloneRange();b.selectNodeContents(g);b.setEnd(c.endContainer,c.endOffset);return b.toString().length}return g.selectionStart}if(document.selection){g.focus();if(d){var c=document.selection.createRange(),b=document.body.createTextRange();b.moveToElementText(g);b.setEndPoint("EndToEnd",c);return b.text.length}var h=0,e=g.createTextRange(),b=document.selection.createRange().duplicate(),f=b.getBookmark();e.moveToBookmark(f);while(e.moveStart("character",-1)!==0){h++}return h}return 0}if(h==-1){h=this[d?"text":"val"]().length}if(window.getSelection){if(d){g.focus();window.getSelection().collapse(g.firstChild,h)}else{g.setSelectionRange(h,h)}}else{if(document.body.createTextRange){if(d){var e=document.body.createTextRange();e.moveToElementText(g);e.moveStart("character",h);e.collapse(true);e.select()}else{var e=g.createTextRange();e.move("character",h);e.select()}}}if(!d){g.focus()}return h}})(jQuery);