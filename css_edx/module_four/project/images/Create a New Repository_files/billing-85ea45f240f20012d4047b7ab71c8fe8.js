define("github-rollup-billing",["delegated-events","@github/query-selector","invariant","selector-observer","github/document-ready","github/fetch","github/throttled-input","github/pjax","github/fetch-json"],function(t,e,n,i,r,o,s,a,c){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a;var u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function p(t,e){return t(e={exports:{}},e.exports),e.exports}var d=p(function(t,e){!function(){function e(t,n){t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=n)}function n(t,e,n,i,r){this.stream=t,this.header=e,this.length=n,this.tag=i,this.sub=r}e.prototype.get=function(t){if(void 0==t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},e.prototype.hexDump=function(t,e){for(var n="",i=t;i<e;++i)switch(n+=this.hexByte(this.get(i)),15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},e.prototype.parseStringISO=function(t,e){for(var n="",i=t;i<e;++i)n+=String.fromCharCode(this.get(i));return n},e.prototype.parseStringUTF=function(t,e){for(var n="",i=0,r=t;r<e;){n+=(i=this.get(r++))<128?String.fromCharCode(i):i>191&&i<224?String.fromCharCode((31&i)<<6|63&this.get(r++)):String.fromCharCode((15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(t,e){var n=this.parseStringISO(t,e),i=this.reTime.exec(n);return i?(n=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(n+=":"+i[5],i[6]&&(n+=":"+i[6],i[7]&&(n+="."+i[7]))),i[8]&&(n+=" UTC","Z"!=i[8]&&(n+=i[8],i[9]&&(n+=":"+i[9]))),n):"Unrecognized time: "+n},e.prototype.parseInteger=function(t,e){var n=e-t;if(n>4){n<<=3;var i=this.get(t);if(0==i)n-=8;else for(;i<128;)i<<=1,--n;return"("+n+" bit)"}for(var r=0,o=t;o<e;++o)r=r<<8|this.get(o);return r},e.prototype.parseBitString=function(t,e){var n=this.get(t),i=(e-t-1<<3)-n,r="("+i+" bit)";if(i<=20){var o=n;r+=" ";for(var s=e-1;s>t;--s){for(var a=this.get(s),c=o;c<8;++c)r+=a>>c&1?"1":"0";o=0}}return r},e.prototype.parseOctetString=function(t,e){var n=e-t,i="("+n+" byte) ";n>20&&(e=t+20);for(var r=t;r<e;++r)i+=this.hexByte(this.get(r));return n>20&&(i+=String.fromCharCode(8230)),i},e.prototype.parseOID=function(t,e){for(var n,i=0,r=0,o=t;o<e;++o){var s=this.get(o);i=i<<7|127&s,r+=7,128&s||(void 0==n?n=parseInt(i/40)+"."+i%40:n+="."+(r>=31?"bigint":i),i=r=0),n+=String.fromCharCode()}return n},n.prototype.typeName=function(){if(void 0==this.tag)return"unknown";var t=this.tag>>6,e=(this.tag,31&this.tag);switch(t){case 0:switch(e){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+e.toString(16)}case 1:return"Application_"+e.toString(16);case 2:return"["+e+"]";case 3:return"Private_"+e.toString(16)}},n.prototype.content=function(){if(void 0==this.tag)return null;if(0!=this.tag>>6)return null==this.sub?null:"("+this.sub.length+")";var t=31&this.tag,e=this.posContent(),n=Math.abs(this.length);switch(t){case 1:return 0==this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+n);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+n);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+n);case 6:return this.stream.parseOID(e,e+n);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(e,e+n);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(e,e+n);case 23:case 24:return this.stream.parseTime(e,e+n)}return null},n.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null==this.sub?"null":this.sub.length)+"]"},n.prototype.print=function(t){if(void 0==t&&(t=""),document.writeln(t+this),null!=this.sub){t+="  ";for(var e=0,n=this.sub.length;e<n;++e)this.sub[e].print(t)}},n.prototype.toPrettyString=function(t){void 0==t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,32&this.tag?e+=" (constructed)":3!=this.tag&&4!=this.tag||null==this.sub||(e+=" (encapsulates)"),e+="\n",null!=this.sub){t+="  ";for(var n=0,i=this.sub.length;n<i;++n)e+=this.sub[n].toPrettyString(t)}return e},n.prototype.posStart=function(){return this.stream.pos},n.prototype.posContent=function(){return this.stream.pos+this.header},n.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},n.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0==n)return-1;e=0;for(var i=0;i<n;++i)e=e<<8|t.get();return e},n.hasContent=function(t,i,r){if(32&t)return!0;if(t<3||t>4)return!1;var o=new e(r);if(3==t&&o.get(),o.get()>>6&1)return!1;try{var s=n.decodeLength(o);return o.pos-r.pos+s==i}catch(t){return!1}},n.decode=function(t){t instanceof e||(t=new e(t,0));var i=new e(t),r=t.get(),o=n.decodeLength(t),s=t.pos-i.pos,a=null;if(n.hasContent(r,o,t)){var c=t.pos;if(3==r&&t.get(),a=[],o>=0){for(var u=c+o;t.pos<u;)a[a.length]=n.decode(t);if(t.pos!=u)throw"Content size is not correct for container starting at offset "+c}else try{for(;;){var l=n.decode(t);if(0==l.tag)break;a[a.length]=l}o=c-t.pos}catch(t){throw"Exception while decoding undefined length content: "+t}}else t.pos+=o;return new n(i,s,o,r,a)};var i,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="=";function s(t){var e,n=function(t){var e,n,i,s="",a=0;for(e=0;e<t.length&&t.charAt(e)!=o;++e)(i=r.indexOf(t.charAt(e)))<0||(0==a?(s+=h(i>>2),n=3&i,a=1):1==a?(s+=h(n<<2|i>>4),n=15&i,a=2):2==a?(s+=h(n),s+=h(i>>2),n=3&i,a=3):(s+=h(n<<2|i>>4),s+=h(15&i),a=0));return 1==a&&(s+=h(n<<2)),s}(t),i=new Array;for(e=0;2*e<n.length;++e)i[e]=parseInt(n.substring(2*e,2*e+2),16);return i}function a(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function c(){return new a(null)}"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=function(t,e,n,i,r,o){for(var s=32767&e,a=e>>15;--o>=0;){var c=32767&this[t],u=this[t++]>>15,l=a*c+u*s;r=((c=s*c+((32767&l)<<15)+n[i]+(1073741823&r))>>>30)+(l>>>15)+a*u+(r>>>30),n[i++]=1073741823&c}return r},i=30):"Netscape"!=navigator.appName?(a.prototype.am=function(t,e,n,i,r,o){for(;--o>=0;){var s=e*this[t++]+n[i]+r;r=Math.floor(s/67108864),n[i++]=67108863&s}return r},i=26):(a.prototype.am=function(t,e,n,i,r,o){for(var s=16383&e,a=e>>14;--o>=0;){var c=16383&this[t],u=this[t++]>>14,l=a*c+u*s;r=((c=s*c+((16383&l)<<14)+n[i]+r)>>28)+(l>>14)+a*u,n[i++]=268435455&c}return r},i=28),a.prototype.DB=i,a.prototype.DM=(1<<i)-1,a.prototype.DV=1<<i;a.prototype.FV=Math.pow(2,52),a.prototype.F1=52-i,a.prototype.F2=2*i-52;var u,l,p="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)d[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)d[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)d[u++]=l;function h(t){return p.charAt(t)}function f(t,e){var n=d[t.charCodeAt(e)];return null==n?-1:n}function y(t){var e=c();return e.fromInt(t),e}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function b(t){this.m=t}function v(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}b.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},b.prototype.revert=function(t){return t},b.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},b.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},b.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},v.prototype.convert=function(t){var e=c();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(a.ZERO)>0&&this.m.subTo(e,e),e},v.prototype.revert=function(t){var e=c();return t.copyTo(e),this.reduce(e),e},v.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},v.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},a.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},a.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},a.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,r=!1,o=0;--i>=0;){var s=8==n?255&t[i]:f(t,i);s<0?"-"==t.charAt(i)&&(r=!0):(r=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},a.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},a.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},a.prototype.lShiftTo=function(t,e){var n,i=t%this.DB,r=this.DB-i,o=(1<<r)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>r|a,a=(this[n]&o)<<i;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},a.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var i=t%this.DB,r=this.DB-i,o=(1<<i)-1;e[0]=this[n]>>i;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<r,e[s-n]=this[s]>>i;i>0&&(e[this.t-n-1]|=(this.s&o)<<r),e.t=this.t-n,e.clamp()}},a.prototype.subTo=function(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()},a.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&a.ZERO.subTo(e,e)},a.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},a.prototype.divRemTo=function(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=c());var o=c(),s=this.s,u=t.s,l=this.DB-m(i[i.t-1]);l>0?(i.lShiftTo(l,o),r.lShiftTo(l,n)):(i.copyTo(o),r.copyTo(n));var p=o.t,d=o[p-1];if(0!=d){var h=d*(1<<this.F1)+(p>1?o[p-2]>>this.F2:0),f=this.FV/h,y=(1<<this.F1)/h,b=1<<this.F2,v=n.t,g=v-p,_=null==e?c():e;for(o.dlShiftTo(g,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),a.ONE.dlShiftTo(p,_),_.subTo(o,o);o.t<p;)o[o.t++]=0;for(;--g>=0;){var E=n[--v]==d?this.DM:Math.floor(n[v]*f+(n[v-1]+b)*y);if((n[v]+=o.am(0,E,n,g,0,p))<E)for(o.dlShiftTo(g,_),n.subTo(_,n);n[v]<--E;)n.subTo(_,n)}null!=e&&(n.drShiftTo(p,e),s!=u&&a.ZERO.subTo(e,e)),n.t=p,n.clamp(),l>0&&n.rShiftTo(l,n),s<0&&a.ZERO.subTo(n,n)}}},a.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},a.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},a.prototype.exp=function(t,e){if(t>4294967295||t<1)return a.ONE;var n=c(),i=c(),r=e.convert(this),o=m(t)-1;for(r.copyTo(n);--o>=0;)if(e.sqrTo(n,i),(t&1<<o)>0)e.mulTo(i,r,n);else{var s=n;n=i,i=s}return e.revert(n)},a.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,i=(1<<e)-1,r=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(r=!0,o=h(n));s>=0;)a<e?(n=(this[s]&(1<<a)-1)<<e-a,n|=this[--s]>>(a+=this.DB-e)):(n=this[s]>>(a-=e)&i,a<=0&&(a+=this.DB,--s)),n>0&&(r=!0),r&&(o+=h(n));return r?o:"0"},a.prototype.negate=function(){var t=c();return a.ZERO.subTo(this,t),t},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)},a.prototype.mod=function(t){var e=c();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(a.ZERO)>0&&t.subTo(e,e),e},a.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new b(e):new v(e),this.exp(t,n)},a.ZERO=y(0),a.ONE=y(1),g.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},g.prototype.setPublic=function(t,e){if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw new Error("Invalid RSA public key");this.n=new a(t,16),this.e=parseInt(e,16)},g.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw new Error("Message too long for RSA");for(var n=new Array,i=t.length-1;i>=0&&e>0;){var r=t.charCodeAt(i--);r<128?n[--e]=r:r>127&&r<2048?(n[--e]=63&r|128,n[--e]=r>>6|192):(n[--e]=63&r|128,n[--e]=r>>6&63|128,n[--e]=r>>12|224)}n[--e]=0;for(var o=0,s=0,c=0;e>2;)0==c&&(s=_.random.randomWords(1,0)[0]),o=s>>c&255,c=(c+8)%32,0!=o&&(n[--e]=o);return n[--e]=2,n[--e]=0,new a(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i};var _={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};t.exports&&(t.exports=_),_.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,n,i,r,o,s=this._tables[0][4],a=this._tables[1],c=t.length,u=1;if(4!==c&&6!==c&&8!==c)throw new _.exception.invalid("invalid aes key size");for(this._key=[r=t.slice(0),o=[]],e=c;e<4*c+28;e++)i=r[e-1],(e%c==0||8===c&&e%c==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],e%c==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[e]=r[e-c]^i;for(n=0;e;n++,e--)i=r[3&n?e:e-4],o[n]=e<=4||n<4?i:a[0][s[i>>>24]]^a[1][s[i>>16&255]]^a[2][s[i>>8&255]]^a[3][s[255&i]]},_.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,i,r,o,s,a,c=this._tables[0],u=this._tables[1],l=c[4],p=u[4],d=[],h=[];for(t=0;t<256;t++)h[(d[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!l[e];e^=i||1,n=h[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,l[e]=o,p[o]=e,a=16843009*d[r=d[i=d[e]]]^65537*r^257*i^16843008*e,s=257*d[o]^16843008*o,t=0;t<4;t++)c[t][e]=s=s<<24^s>>>8,u[t][o]=a=a<<24^a>>>8;for(t=0;t<5;t++)c[t]=c[t].slice(0),u[t]=u[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new _.exception.invalid("invalid aes block size");var n,i,r,o,s=this._key[e],a=t[0]^s[0],c=t[e?3:1]^s[1],u=t[2]^s[2],l=t[e?1:3]^s[3],p=s.length/4-2,d=4,h=[0,0,0,0],f=this._tables[e],y=f[0],m=f[1],b=f[2],v=f[3],g=f[4];for(o=0;o<p;o++)n=y[a>>>24]^m[c>>16&255]^b[u>>8&255]^v[255&l]^s[d],i=y[c>>>24]^m[u>>16&255]^b[l>>8&255]^v[255&a]^s[d+1],r=y[u>>>24]^m[l>>16&255]^b[a>>8&255]^v[255&c]^s[d+2],l=y[l>>>24]^m[a>>16&255]^b[c>>8&255]^v[255&u]^s[d+3],d+=4,a=n,c=i,u=r;for(o=0;o<4;o++)h[e?3&-o:o]=g[a>>>24]<<24^g[c>>16&255]<<16^g[u>>8&255]<<8^g[255&l]^s[d++],n=a,a=c,c=u,u=l,l=n;return h}},_.bitArray={bitSlice:function(t,e,n){return t=_.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===n?t:_.bitArray.clamp(t,n-e)},extract:function(t,e,n){var i=Math.floor(-e-n&31);return(-32&(e+n-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i)&(1<<n)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var n=t[t.length-1],i=_.bitArray.getPartial(n);return 32===i?t.concat(e):_.bitArray._shiftRight(e,i,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e,n=t.length;return 0===n?0:(e=t[n-1],32*(n-1)+_.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;var n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=_.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(_.bitArray.bitLength(t)!==_.bitArray.bitLength(e))return!1;var n,i=0;for(n=0;n<t.length;n++)i|=t[n]^e[n];return 0===i},_shiftRight:function(t,e,n,i){var r,o,s;for(void 0===i&&(i=[]);e>=32;e-=32)i.push(n),n=0;if(0===e)return i.concat(t);for(r=0;r<t.length;r++)i.push(n|t[r]>>>e),n=t[r]<<32-e;return o=t.length?t[t.length-1]:0,s=_.bitArray.getPartial(o),i.push(_.bitArray.partial(e+s&31,e+s>32?n:i.pop(),1)),i},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},_.codec.hex={fromBits:function(t){var e,n="";for(e=0;e<t.length;e++)n+=(0xf00000000000+(0|t[e])).toString(16).substr(4);return n.substr(0,_.bitArray.bitLength(t)/4)},toBits:function(t){var e,n,i=[];for(n=(t=t.replace(/\s|0x/g,"")).length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return _.bitArray.clamp(i,4*n)}},_.codec.utf8String={fromBits:function(t){var e,n,i="",r=_.bitArray.bitLength(t);for(e=0;e<r/8;e++)0==(3&e)&&(n=t[e/4]),i+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,n=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3==(3&e)&&(n.push(i),i=0);return 3&e&&n.push(_.bitArray.partial(8*(3&e),i)),n}},_.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var i,r="",o=0,s=_.codec.base64._chars,a=0,c=_.bitArray.bitLength(t);for(n&&(s=s.substr(0,62)+"-_"),i=0;6*r.length<c;)r+=s.charAt((a^t[i]>>>o)>>>26),o<6?(a=t[i]<<6-o,o+=26,i++):(a<<=6,o-=6);for(;3&r.length&&!e;)r+="=";return r},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,i,r=[],o=0,s=_.codec.base64._chars,a=0;for(e&&(s=s.substr(0,62)+"-_"),n=0;n<t.length;n++){if((i=s.indexOf(t.charAt(n)))<0)throw new _.exception.invalid("this isn't base64!");o>26?(o-=26,r.push(a^i>>>o),a=i<<32-o):a^=i<<32-(o+=6)}return 56&o&&r.push(_.bitArray.partial(56&o,a,1)),r}},_.codec.base64url={fromBits:function(t){return _.codec.base64.fromBits(t,1,1)},toBits:function(t){return _.codec.base64.toBits(t,1)}},void 0===_.beware&&(_.beware={}),_.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){_.mode.cbc={name:"cbc",encrypt:function(t,e,n,i){if(i&&i.length)throw new _.exception.invalid("cbc can't authenticate data");if(128!==_.bitArray.bitLength(n))throw new _.exception.invalid("cbc iv must be 128 bits");var r,o=_.bitArray,s=o._xor4,a=o.bitLength(e),c=0,u=[];if(7&a)throw new _.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(r=0;c+128<=a;r+=4,c+=128)n=t.encrypt(s(n,e.slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]);return a=16843009*(16-(a>>3&15)),n=t.encrypt(s(n,o.concat(e,[a,a,a,a]).slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]),u},decrypt:function(t,e,n,i){if(i&&i.length)throw new _.exception.invalid("cbc can't authenticate data");if(128!==_.bitArray.bitLength(n))throw new _.exception.invalid("cbc iv must be 128 bits");if(127&_.bitArray.bitLength(e)||!e.length)throw new _.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var r,o,s,a=_.bitArray,c=a._xor4,u=[];for(i=i||[],r=0;r<e.length;r+=4)o=e.slice(r,r+4),s=c(n,t.decrypt(o)),u.splice(r,0,s[0],s[1],s[2],s[3]),n=o;if(0==(o=255&u[r-1])||o>16)throw new _.exception.corrupt("pkcs#5 padding corrupt");if(s=16843009*o,!a.equal(a.bitSlice([s,s,s,s],0,8*o),a.bitSlice(u,32*u.length-8*o,32*u.length)))throw new _.exception.corrupt("pkcs#5 padding corrupt");return a.bitSlice(u,0,32*u.length-8*o)}}},_.misc.hmac=function(t,e){this._hash=e=e||_.hash.sha256;var n,i=[[],[]],r=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>r&&(t=e.hash(t)),n=0;n<r;n++)i[0][n]=909522486^t[n],i[1][n]=1549556828^t[n];this._baseHash[0].update(i[0]),this._baseHash[1].update(i[1])},_.misc.hmac.prototype.encrypt=_.misc.hmac.prototype.mac=function(t,e){var n=new this._hash(this._baseHash[0]).update(t,e).finalize();return new this._hash(this._baseHash[1]).update(n).finalize()},_.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},_.hash.sha256.hash=function(t){return(new _.hash.sha256).update(t).finalize()},_.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=_.codec.utf8String.toBits(t));var e,n=this._buffer=_.bitArray.concat(this._buffer,t),i=this._length,r=this._length=i+_.bitArray.bitLength(t);for(e=512+i&-512;e<=r;e+=512)this._block(n.splice(0,16));return this},finalize:function(){var t,e=this._buffer,n=this._h;for(t=(e=_.bitArray.concat(e,[_.bitArray.partial(1,1)])).length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),n},_init:[],_key:[],_precompute:function(){var t,e=0,n=2;function i(t){return 4294967296*(t-Math.floor(t))|0}t:for(;e<64;n++){for(t=2;t*t<=n;t++)if(n%t==0)continue t;e<8&&(this._init[e]=i(Math.pow(n,.5))),this._key[e]=i(Math.pow(n,1/3)),e++}},_block:function(t){var e,n,i,r,o=t.slice(0),s=this._h,a=this._key,c=s[0],u=s[1],l=s[2],p=s[3],d=s[4],h=s[5],f=s[6],y=s[7];for(e=0;e<64;e++)e<16?n=o[e]:(i=o[e+1&15],r=o[e+14&15],n=o[15&e]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+o[15&e]+o[e+9&15]|0),n=n+y+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(f^d&(h^f))+a[e],y=f,f=h,h=d,d=p+n|0,p=l,l=u,c=n+((u=c)&l^p&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;s[0]=s[0]+c|0,s[1]=s[1]+u|0,s[2]=s[2]+l|0,s[3]=s[3]+p|0,s[4]=s[4]+d|0,s[5]=s[5]+h|0,s[6]=s[6]+f|0,s[7]=s[7]+y|0}},_.random={randomWords:function(t,e){var n,i,r=[],o=this.isReady(e);if(o===this._NOT_READY)throw new _.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),n=0;n<t;n+=4)(n+1)%this._MAX_WORDS_PER_BURST==0&&this._gate(),i=this._gen4words(),r.push(i[0],i[1],i[2],i[3]);return this._gate(),r.slice(0,t)},setDefaultParanoia:function(t){this._defaultParanoia=t},addEntropy:function(t,e,n){n=n||"user";var i,r,o,s=(new Date).valueOf(),a=this._robins[n],c=this.isReady(),u=0;switch(void 0===(i=this._collectorIds[n])&&(i=this._collectorIds[n]=this._collectorIdNext++),void 0===a&&(a=this._robins[n]=0),this._robins[n]=(this._robins[n]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[a].update([i,this._eventId++,1,e,s,1,0|t]);break;case"object":var l=Object.prototype.toString.call(t);if("[object Uint32Array]"===l){for(o=[],r=0;r<t.length;r++)o.push(t[r]);t=o}else for("[object Array]"!==l&&(u=1),r=0;r<t.length&&!u;r++)"number"!=typeof t[r]&&(u=1);if(!u){if(void 0===e)for(e=0,r=0;r<t.length;r++)for(o=t[r];o>0;)e++,o>>>=1;this._pools[a].update([i,this._eventId++,2,e,s,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[a].update([i,this._eventId++,3,e,s,t.length]),this._pools[a].update(t);break;default:u=1}if(u)throw new _.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[a]+=e,this._poolStrength+=e,c===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t||this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new _.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,i,r=this._callbacks[t],o=[];for(i in r)r.hasOwnProperty(i)&&r[i]===e&&o.push(i);for(n=0;n<o.length;n++)delete r[i=o[n]]},_pools:[new _.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var t=0;t<4&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new _.cipher.aes(this._key)},_reseed:function(t){this._key=_.hash.sha256.hash(this._key.concat(t)),this._cipher=new _.cipher.aes(this._key);for(var e=0;e<4&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,n=[],i=0;for(this._nextReseed=n[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;e<16;e++)n.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(n=n.concat(this._pools[e].finalize()),i+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new _.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=i,i>this._strength&&(this._strength=i),this._reseedCount++,this._reseed(n)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,n=t.y||t.clientY||t.offsetY||0;_.random.addEntropy([e,n],2,"mouse")},_loadTimeCollector:function(t){_.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(t,e){var n,i=_.random._callbacks[t],r=[];for(n in i)i.hasOwnProperty(n)&&r.push(i[n]);for(n=0;n<r.length;n++)r[n](e)}},function(){try{var t=new Uint32Array(32);crypto.getRandomValues(t),_.random.addEntropy(t,1024,"crypto.getRandomValues")}catch(t){}}(),function(){for(var t in _.beware)_.beware.hasOwnProperty(t)&&_.beware[t]()}();var E={sjcl:_,version:"1.3.10",generateAesKey:function(){return{key:_.random.randomWords(8,0),encrypt:function(t){return this.encryptWithIv(t,_.random.randomWords(4,0))},encryptWithIv:function(t,e){var n=new _.cipher.aes(this.key),i=_.codec.utf8String.toBits(t),r=_.mode.cbc.encrypt(n,i,e),o=_.bitArray.concat(e,r);return _.codec.base64.fromBits(o)}}},create:function(t){return new E.EncryptionClient(t)}};E.EncryptionClient=function(t){var e=this,i=[];e.publicKey=t,e.version=E.version;var a=function(t,e){var n,i,r;for(i in n=document.createElement(t),e)e.hasOwnProperty(i)&&(r=e[i],n.setAttribute(i,r));return n},c=function(t){return window.jQuery&&t instanceof jQuery?t[0]:t.nodeType&&1===t.nodeType?t:document.getElementById(t)},u=function(t){var e,n,i,r,o=[];if("INTEGER"===t.typeName()&&(e=t.posContent(),n=t.posEnd(),i=t.stream.hexDump(e,n).replace(/[ \n]/g,""),o.push(i)),null!==t.sub)for(r=0;r<t.sub.length;r++)o=o.concat(u(t.sub[r]));return o},l=function(t){var e,n,i=[],r=t.children;for(n=0;n<r.length;n++)1===(e=r[n]).nodeType&&e.attributes["data-encrypted-name"]?i.push(e):e.children&&e.children.length>0&&(i=i.concat(l(e)));return i};e.encrypt=function(i){var a=function(){var e,i,r,o,a,c;try{a=s(t),e=n.decode(a)}catch(t){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(2!==(r=u(e)).length)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return o=r[0],i=r[1],(c=new g).setPublic(o,i),c}(),c=E.generateAesKey(),l={key:_.random.randomWords(8,0),sign:function(t){var e=new _.misc.hmac(this.key,_.hash.sha256).encrypt(t);return _.codec.base64.fromBits(e)}},p=c.encrypt(i),d=l.sign(_.codec.base64.toBits(p)),h=_.bitArray.concat(c.key,l.key),f=_.codec.base64.fromBits(h),y=a.encrypt(f),m="$bt4|javascript_"+e.version.replace(/\./g,"_")+"$",b=null;return y&&(b=function(t){var e,n,i="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),i+=r.charAt(n>>6)+r.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),i+=r.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),i+=r.charAt(n>>2)+r.charAt((3&n)<<4));(3&i.length)>0;)i+=o;return i}(y)),m+b+"$"+p+"$"+d},e.encryptForm=function(t){var n,r,o,s,u,p;for(t=c(t),p=l(t);i.length>0;){try{t.removeChild(i[0])}catch(t){}i.splice(0,1)}for(u=0;u<p.length;u++)o=(n=p[u]).getAttribute("data-encrypted-name"),r=e.encrypt(n.value),n.removeAttribute("name"),s=a("input",{value:r,type:"hidden",name:o}),i.push(s),t.appendChild(s)},e.onSubmitEncryptForm=function(t,n){var i;t=c(t),i=function(i){return e.encryptForm(t),n?n(i):i},window.jQuery?window.jQuery(t).submit(i):t.addEventListener?t.addEventListener("submit",i,!1):t.attachEvent&&t.attachEvent("onsubmit",i)},e.formEncrypter={encryptForm:e.encryptForm,extractForm:c,onSubmitEncryptForm:e.onSubmitEncryptForm},_.random.startCollectors()},window.Braintree=E}(),t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c=l;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return r(n||t)},p,p.exports,t,e,n,i)}return n[s].exports}for(var o=l,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){(function(n){var i="2.14.0",r=t("braintree-api"),o=t("braintree-paypal"),s=t("braintree-dropin"),a=t("./integrations"),c=t("./constants"),u=t("./lib/fallback-error-handler"),l=t("./lib/lookup-callback-for"),p=t("braintree-utilities").uuid;e.exports={api:r,cse:n.Braintree,paypal:o,dropin:s,hostedFields:{VERSION:t("hosted-fields").VERSION},setup:function(t,e,o){if(!a.hasOwnProperty(e))throw new Error(e+" is an unsupported integration");o=o||{},r._getConfiguration({enableCORS:o.enableCORS||!1,clientToken:t},function(t,r){t?l(o)(c.ROOT_ERROR_CALLBACK,u)({message:t.errors}):new a[e]({channel:p(),gatewayConfiguration:r,integrationType:e,merchantConfiguration:o,analyticsConfiguration:{sdkVersion:"braintree/web/"+i,merchantAppId:n.location.host}})})},VERSION:i}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants":440,"./integrations":445,"./lib/fallback-error-handler":447,"./lib/lookup-callback-for":449,"braintree-api":21,"braintree-dropin":236,"braintree-paypal":344,"braintree-utilities":372,"hosted-fields":377}],2:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("braintree-3ds"),o=t("./parse-client-token"),s=t("./util"),a=t("./sepa-mandate"),c=t("./europe-bank-account"),u=t("./credit-card"),l=t("./coinbase-account"),p=t("./paypal-account"),d=t("./normalize-api-fields").normalizeCreditCardFields,h=t("./request/choose-driver"),f=t("./should-enable-cors"),y=t("./constants");function m(t){var e,s,a;this.attrs={},t.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=t.sharedCustomerIdentifier),e=o(t.clientToken),a=function(t){var e=t.analyticsConfiguration||{},i=n.braintree?n.braintree.VERSION:null,r=i?"braintree/web/"+i:"";return{sdkVersion:e.sdkVersion||r,merchantAppId:e.merchantAppId||n.location.host}}(t),this.driver=t.driver||h({enableCORS:f(t)}),this.analyticsUrl=e.analytics?e.analytics.url:void 0,this.clientApiUrl=e.clientApiUrl,this.customerId=t.customerId,this.challenges=e.challenges,this.integration=t.integration||"",this.sdkVersion=a.sdkVersion,this.merchantAppId=a.merchantAppId,s=r.create(this,{container:t.container,clientToken:e}),this.verify3DS=i.bind(s.verify,s),this.attrs.sharedCustomerIdentifierType=t.sharedCustomerIdentifierType,e.merchantAccountId&&(this.attrs.merchantAccountId=e.merchantAccountId),t.clientKey?this.attrs.clientKey=t.clientKey:e.authorizationFingerprint&&(this.attrs.authorizationFingerprint=e.authorizationFingerprint),t.hasOwnProperty("timeout")?this.requestTimeout=t.timeout:this.requestTimeout=6e4}m.prototype.getCreditCards=function(t){this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(t){for(var e=0,n=t.paymentMethods.length,i=[];e<n;e++)i.push(new u(t.paymentMethods[e]));return i},t,this.requestTimeout)},m.prototype.tokenizeCoinbase=function(t,e){t.options={validate:!1},this.addCoinbase(t,function(t,n){t?e(t,null):n&&n.nonce?e(t,n):e("Unable to tokenize coinbase account.",null)})},m.prototype.tokenizePayPalAccount=function(t,e){t.options={validate:!1},this.addPayPalAccount(t,function(t,n){t?e(t,null):n&&n.nonce?e(null,n):e("Unable to tokenize paypal account.",null)})},m.prototype.tokenizeCard=function(t,e){t.options={validate:!1},this.addCreditCard(t,function(t,n){n&&n.nonce?e(t,n.nonce,{type:n.type,details:n.details}):e("Unable to tokenize card.",null)})},m.prototype.lookup3DS=function(t,e){var n=s.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",t.nonce,"three_d_secure/lookup"]),i=s.mergeOptions(this.attrs,{amount:t.amount});this.driver.post(n,i,function(t){return t},e,this.requestTimeout)},m.prototype.createSEPAMandate=function(t,e){var n=s.mergeOptions(this.attrs,{sepaMandate:t});this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),n,function(t){return{sepaMandate:new a(t.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new c(t.europeBankAccounts[0])}},e,this.requestTimeout)},m.prototype.getSEPAMandate=function(t,e){var n=s.mergeOptions(this.attrs,t);this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),n,function(t){return{sepaMandate:new a(t.sepaMandates[0])}},e,this.requestTimeout)},m.prototype.addCoinbase=function(t,e){var n;delete t.share,n=s.mergeOptions(this.attrs,{coinbaseAccount:t,_meta:{integration:this.integration||"custom",source:"coinbase"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),n,function(t){return new l(t.coinbaseAccounts[0])},e,this.requestTimeout)},m.prototype.addPayPalAccount=function(t,e){var n;delete t.share,n=s.mergeOptions(this.attrs,{paypalAccount:t,_meta:{integration:this.integration||"paypal",source:"paypal"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),n,function(t){return new p(t.paypalAccounts[0])},e,this.requestTimeout)},m.prototype.addCreditCard=function(t,e){var n,i,r=t.share;delete t.share,i=d(t),n=s.mergeOptions(this.attrs,{share:r,creditCard:i,_meta:{integration:this.integration||"custom",source:"form"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),n,function(t){return new u(t.creditCards[0])},e,this.requestTimeout)},m.prototype.sendAnalyticsEvents=function(t,e){var i,r,o=this.analyticsUrl,a=[];if(t=s.isArray(t)?t:[t],o){for(r in t)t.hasOwnProperty(r)&&a.push({kind:t[r]});i=s.mergeOptions(this.attrs,{braintree_library_version:this.sdkVersion,analytics:a,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:n.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}}),this.driver.post(o,i,function(t){return t},e,y.ANALYTICS_TIMEOUT_MS)}else e&&e.apply(null,[null,{}])},m.prototype.decryptBrowserswitchPayload=function(t,e){var n=s.mergeOptions(this.attrs,{asymmetric_encrypted_payload:t}),i=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/decrypt"]);this.driver.post(i,n,function(t){return t},e,this.requestTimeout)},m.prototype.encryptBrowserswitchReturnPayload=function(t,e,n){var i=s.mergeOptions(this.attrs,{payload:t,aesKey:e}),r=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/encrypt"]);this.driver.post(r,i,function(t){return t},n,this.requestTimeout)},m.prototype.exchangePaypalTokenForConsentCode=function(t,e){var n=s.mergeOptions(this.attrs,t);this.attrs.merchantAccountId&&(n.merchant_account_id=this.attrs.merchantAccountId);var i=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_account_service/merchant_consent"]);this.driver.post(i,n,function(t){return t},e,this.requestTimeout)},m.prototype.getAmexRewardsBalance=function(t,e){var n=s.mergeOptions(this.attrs,t);n.nonce&&(n.payment_method_nonce=n.nonce,delete n.nonce),this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1/payment_methods/amex_rewards_balance"]),n,function(t){return t},e,this.requestTimeout)},e.exports=m}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./coinbase-account":3,"./constants":4,"./credit-card":5,"./europe-bank-account":6,"./normalize-api-fields":8,"./parse-client-token":9,"./paypal-account":10,"./request/choose-driver":13,"./sepa-mandate":18,"./should-enable-cors":19,"./util":20,"braintree-3ds":29,"braintree-utilities":43}],3:[function(t,e,n){var i=["nonce","type","description","details"];e.exports=function(t){var e,n;for(e=0;e<i.length;e++)this[n=i[e]]=t[n]}},{}],4:[function(t,e,n){e.exports={apiUrls:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"},ANALYTICS_TIMEOUT_MS:4e3}},{}],5:[function(t,e,n){var i=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];e.exports=function(t){var e,n;for(e=0;e<i.length;e++)this[n=i[e]]=t[n]}},{}],6:[function(t,e,n){e.exports=function(t){var e,n=["bic","maskedIBAN","nonce","accountHolderName"],i=0;for(i=0;i<n.length;i++)this[e=n[i]]=t[e]}},{}],7:[function(t,e,n){var i=t("./parse-client-token"),r=t("./util"),o=t("./request/choose-driver"),s=t("./should-enable-cors"),a=t("./constants");e.exports=function(t,e){var n,c,u,l=o({enableCORS:s(t)}),p=t.clientKey,d={};p?(d.clientKey=p,c=function(t){var e=t.split("_"),n=e[0];return{merchantId:e.slice(2).join("_"),environment:n}}(p),n=a.apiUrls[c.environment]+"/merchants/"+c.merchantId+"/client_api/v1/configuration"):(u=i(t.clientToken)).authorizationFingerprint&&(d.authorizationFingerprint=u.authorizationFingerprint,n=u.configUrl),l.get(n,d,function(t){return r.mergeOptions(u,t)},e,t.timeout)}},{"./constants":4,"./parse-client-token":9,"./request/choose-driver":13,"./should-enable-cors":19,"./util":20}],8:[function(t,e,n){e.exports={normalizeCreditCardFields:function(t){var e,n={billingAddress:t.billingAddress||{}};for(e in t)if(t.hasOwnProperty(e))switch(e.replace(/_/,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":n.billingAddress[e]=t[e];break;default:n[e]=t[e]}return n}}},{}],9:[function(t,e,n){var i=t("braintree-utilities");t("./polyfill"),e.exports=function(t){var e;if(!t)throw new Error("Braintree API Client Misconfigured: clientToken required.");if("object"==typeof t&&null!==t)e=t;else{try{t=window.atob(t)}catch(t){}try{e=JSON.parse(t)}catch(t){throw new Error("Braintree API Client Misconfigured: clientToken is not valid JSON.")}}if(!e.hasOwnProperty("clientApiUrl")||!i.isWhitelistedDomain(e.clientApiUrl))throw new Error("Braintree API Client Misconfigured: the clientApiUrl provided in the clientToken is invalid.");return e}},{"./polyfill":11,"braintree-utilities":43}],10:[function(t,e,n){var i=["nonce","type","description","details"];e.exports=function(t){var e,n;for(e=0;e<i.length;e++)this[n=i[e]]=t[n]}},{}],11:[function(t,e,n){(function(t){var n=function(t){var e=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";if(!e.test(t))throw new Error("Non base64 encoded input passed to window.atob polyfill");var r=0;do{var o=n.indexOf(t.charAt(r++)),s=n.indexOf(t.charAt(r++)),a=n.indexOf(t.charAt(r++)),c=n.indexOf(t.charAt(r++)),u=(63&o)<<2|s>>4&3,l=(15&s)<<4|a>>2&15,p=(3&a)<<6|63&c;i+=String.fromCharCode(u)+(l?String.fromCharCode(l):"")+(p?String.fromCharCode(p):"")}while(r<t.length);return i};t.atob=t.atob||n,e.exports={atobPolyfill:n}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,n){(function(n){var i=t("../util"),r=t("./prep-body"),o=t("./parse-body"),s=t("../constants"),a=n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest;function c(t,e,n,i,c,u){var l,p,d=a?new XMLHttpRequest:new XDomainRequest;c=c||function(){},a?d.onreadystatechange=function(){4===d.readyState&&(l=d.status,p=o(d.responseText),l>=400||0===l?c.call(null,p||{errors:s.errors.UNKNOWN_ERROR},null):l>0&&c.call(null,null,i(p)))}:(d.onload=function(){c.call(null,null,i(o(d.responseText)))},d.onerror=function(){c.call(null,d.responseText,null)},d.onprogress=function(){},d.ontimeout=function(){c.call(null,{errors:s.errors.UNKNOWN_ERROR},null)}),d.open(t,e,!0),d.timeout=null==u?6e4:u,a&&"POST"===t&&d.setRequestHeader("Content-Type","application/json"),setTimeout(function(){d.send(r(t,n))},0)}e.exports={get:function(t,e,n,r,o){c("GET",i.createURLParams(t,e),null,n,r,o)},post:function(t,e,n,i,r){c("POST",t,e,n,i,r)}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants":4,"../util":20,"./parse-body":16,"./prep-body":17}],13:[function(t,e,n){var i=t("./jsonp-driver"),r=t("./ajax-driver"),o=t("../util");e.exports=function(t){var e=o.getUserAgent(),n=!(o.isHTTP()&&/(MSIE\s(8|9))|(Phantom)/.test(e));return(t=t||{}).enableCORS&&n?r:i}},{"../util":20,"./ajax-driver":12,"./jsonp-driver":14}],14:[function(t,e,n){var i=t("./jsonp"),r=t("../constants"),o=[];function s(){}function a(t,e,n,i,a,c){var u;a=a||s,null==c&&(c=6e4),u=i(t,e,function(t,e){var i,r;o[e]&&(clearTimeout(o[e]),a.apply(null,(r=function(t){return n(t)},(i=t).status>=400?[i,null]:[null,r(i)])))}),"number"==typeof c?o[u]=setTimeout(function(){o[u]=null,a.apply(null,[{errors:r.errors.UNKNOWN_ERROR},null])},c):a.apply(null,[{errors:r.errors.INVALID_TIMEOUT},null])}e.exports={get:function(t,e,n,r,o){a(t,e,n,i.get,r,o)},post:function(t,e,n,r,o){e._method="POST",a(t,e,n,i.get,r,o)}}},{"../constants":4,"./jsonp":15}],15:[function(t,e,n){(function(n){var i,r=t("../util"),o=n,s={};e.exports={get:function(t,e,n,a){var c,u;return a=a||s.callbackName||"callback",u=a+"_json"+r.generateUUID(),e[a]=u,c=r.createURLParams(t,e),o[u]=function(t){n(t,u);try{delete o[u]}catch(t){}o[u]=null},function(t,e){var n=document.createElement("script"),r=!1;n.src=t,n.async=!0;var o=e||s.error;"function"==typeof o&&(n.onerror=function(e){o({url:t,event:e})}),n.onload=n.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},i||(i=document.getElementsByTagName("head")[0]),i.appendChild(n)}(c),u},init:function(t){s=t}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":20}],16:[function(t,e,n){e.exports=function(t){try{t=JSON.parse(t)}catch(t){}return t}},{}],17:[function(t,e,n){var i=t("lodash.isstring");e.exports=function(t,e){if(!i(t))throw new Error("Method must be a string");return"get"!==t.toLowerCase()&&null!=e&&(e=i(e)?e:JSON.stringify(e)),e}},{"lodash.isstring":51}],18:[function(t,e,n){e.exports=function(t){var e,n=0,i=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(n=0;n<i.length;n++)this[e=i[n]]=t[e]}},{}],19:[function(t,e,n){e.exports=function(t){return null!=t.enableCORS?t.enableCORS:!!t.merchantConfiguration&&t.merchantConfiguration.enableCORS}},{}],20:[function(t,e,n){(function(n){var i=t("lodash.isempty"),r=t("lodash.isobject");function o(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function s(t,e){var n,i,r,a=[];for(r in t)t.hasOwnProperty(r)&&(i=t[r],n=e?o(t)?e+"[]":e+"["+r+"]":r,"object"==typeof i?a.push(s(i,n)):a.push(encodeURIComponent(n)+"="+encodeURIComponent(i)));return a.join("&")}e.exports={joinUrlFragments:function(t){var e,n,i=[];for(n=0;n<t.length;n++)"/"===(e=t[n]).charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===e.charAt(0)&&(e=e.substring(1)),i.push(e);return i.join("/")},isArray:o,generateUUID:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.floor(16*Math.random()),n="x"===t?e:3&e|8;return n.toString(16)})},mergeOptions:function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},stringify:s,createURLParams:function(t,e){return t=t||"",!i(e)&&r(e)&&(t+=-1===t.indexOf("?")?"?":"",t+=-1!==t.indexOf("=")?"&":"",t+=s(e)),t},getUserAgent:function(){return n.navigator.userAgent},isHTTP:function(){return"http:"===n.location.protocol}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.isempty":44,"lodash.isobject":50}],21:[function(t,e,n){var i=t("./lib/client"),r=t("./lib/util"),o=t("./lib/parse-client-token"),s=t("./lib/get-configuration");e.exports={Client:i,configure:function(t){return new i(t)},util:r,parseClientToken:o,_getConfiguration:s}},{"./lib/client":2,"./lib/get-configuration":7,"./lib/parse-client-token":9,"./lib/util":20}],22:[function(t,e,n){e.exports={normalizeElement:function(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&(t instanceof jQuery||"jquery"in Object(t))&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)}}},{}],23:[function(t,e,n){e.exports={addEventListener:function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n)},removeEventListener:function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n)}}},{}],24:[function(t,e,n){var i=Object.prototype.toString;e.exports={bind:function(t,e){return function(){t.apply(e,arguments)}},isFunction:function(t){return"[object Function]"===i.call(t)}}},{}],25:[function(t,e,n){function i(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function r(t){for(var e={},n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],s=decodeURIComponent(r[1]);e[o]=s}return e}e.exports={isBrowserHttps:function(){return"https:"===window.location.protocol},makeQueryString:function t(e,n){var r,o,s=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];r=n?n+"["+o+"]":o,"object"==typeof a?s.push(t(a,r)):void 0!==a&&null!==a&&s.push(i(r)+"="+i(a))}return s.join("&")},decodeQueryString:r,getParams:function(t){var e=t.split("?");return 2!==e.length?{}:r(e[1])}}},{}],26:[function(t,e,n){var i=t("./lib/dom"),r=t("./lib/url"),o=t("./lib/fn"),s=t("./lib/events");e.exports={normalizeElement:i.normalizeElement,isBrowserHttps:r.isBrowserHttps,makeQueryString:r.makeQueryString,decodeQueryString:r.decodeQueryString,getParams:r.getParams,removeEventListener:s.removeEventListener,addEventListener:s.addEventListener,bind:o.bind,isFunction:o.isFunction}},{"./lib/dom":22,"./lib/events":23,"./lib/fn":24,"./lib/url":25}],27:[function(t,e,n){var i,r,o=t("braintree-utilities"),s=t("../shared/receiver");function a(t,e){var n=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return n[e]}function c(t,e){this.assetsUrl=t,this.container=e||document.body,this.iframe=null,i=document.documentElement,r=document.body,this.merchantPageDefaultStyles={html:{height:i.style.height||"",overflow:a(i,"overflow"),position:a(i,"position")},body:{height:r.style.height||"",overflow:a(r,"overflow")}}}c.prototype.get=function(t,e){var n=this,i=this.constructAuthorizationURL(t);this.container&&o.isFunction(this.container)?this.container(i+"&no_style=1"):this.insertIframe(i),new s(function(t){o.isFunction(n.container)||n.removeIframe(),e(t)})},c.prototype.removeIframe=function(){this.container&&this.container.nodeType&&1===this.container.nodeType?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():"string"==typeof this.container&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},c.prototype.insertIframe=function(t){var e=document.createElement("iframe");if(e.src=t,this.applyStyles(e),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&1===this.container.nodeType)this.container.appendChild(e);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&0!==this.container.length)this.container.append(e);else{if("string"!=typeof this.container||!document.getElementById(this.container))throw new Error("Unable to find valid container for iframe.");document.getElementById(this.container).appendChild(e)}this.iframe=e},c.prototype.applyStyles=function(t){t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.setAttribute("frameborder","0"),t.setAttribute("allowTransparency","true"),t.style.border="0",t.style.zIndex="99999"},c.prototype.lockMerchantWindowSize=function(){i.style.overflow="hidden",r.style.overflow="hidden",r.style.height="100%"},c.prototype.unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;r.style.height=t.body.height,r.style.overflow=t.body.overflow,i.style.overflow=t.html.overflow},c.prototype.constructAuthorizationURL=function(t){var e,n=window.location.href;return n.indexOf("#")>-1&&(n=n.split("#")[0]),e=o.makeQueryString({acsUrl:t.acsUrl,pareq:t.pareq,termUrl:t.termUrl+"&three_d_secure_version=1.3.0",md:t.md,parentUrl:n}),this.assetsUrl+"/3ds/1.3.0/html/style_frame?"+e},e.exports=c},{"../shared/receiver":34,"braintree-utilities":26}],28:[function(t,e,n){var i=t("braintree-utilities"),r=t("./authorization_service"),o=t("./loader");function s(t,e){e=e||{},this.clientToken=e.clientToken,this.container=e.container,this.api=t,this.nonce=null,this._loader=null,this._boundHandleUserClose=i.bind(this._handleUserClose,this)}s.prototype.verify=function(t,e){if(!i.isFunction(e))throw this.api.sendAnalyticsEvents("3ds.web.no_callback"),new Error("No suitable callback argument was given");i.isFunction(t.onUserClose)&&(this._onUserClose=t.onUserClose),i.isFunction(t.onLookupComplete)&&(this._onLookupComplete=t.onLookupComplete),void 0!==t.useDefaultLoader&&!0!==t.useDefaultLoader||this._createDefaultLoader();var n={nonce:"",amount:t.amount},r=t.creditCard;if("string"==typeof r)n.nonce=r,this.api.sendAnalyticsEvents("3ds.web.verify.nonce"),this.startVerification(n,e);else{var o=this;this.api.sendAnalyticsEvents("3ds.web.verify.credit_card"),this.api.tokenizeCard(r,function(t,i){if(t)return o._removeDefaultLoader(),e(t);n.nonce=i,o.startVerification(n,e)})}},s.prototype.startVerification=function(t,e){this.api.lookup3DS(t,i.bind(this.handleLookupResponse(e),this))},s.prototype.handleLookupResponse=function(t){var e=this;return function(n,o){this._onLookupComplete(),n?t(n.error):o.lookup&&o.lookup.acsUrl&&o.lookup.acsUrl.length>0?(e.nonce=o.paymentMethod.nonce,new r(this.clientToken.assetsUrl,this.container).get(o.lookup,i.bind(this.handleAuthenticationResponse(t),this)),this._detachListeners(),this._attachListeners()):(e.nonce=o.paymentMethod.nonce,t(null,{nonce:e.nonce,verificationDetails:o.threeDSecureInfo}))}},s.prototype.handleAuthenticationResponse=function(t){return function(e){var n,r=i.decodeQueryString(e);r.user_closed||((n=JSON.parse(r.auth_response)).success?t(null,{nonce:n.paymentMethod.nonce,verificationDetails:n.threeDSecureInfo}):n.threeDSecureInfo&&n.threeDSecureInfo.liabilityShiftPossible?t(null,{nonce:this.nonce,verificationDetails:n.threeDSecureInfo}):t(n.error))}},s.prototype._attachListeners=function(){i.addEventListener(window,"message",this._boundHandleUserClose)},s.prototype._detachListeners=function(){i.removeEventListener(window,"message",this._boundHandleUserClose)},s.prototype._createDefaultLoader=function(){this._loader=new o,document.body.appendChild(this._loader.getElement())},s.prototype._removeDefaultLoader=function(){if(this._loader){var t=this._loader.getElement(),e=t.parentNode;e&&e.removeChild(t),this._loader.dispose(),this._loader=null}},s.prototype._handleUserClose=function(t){"user_closed=true"===t.data&&this._onUserClose()},s.prototype._onUserClose=function(){},s.prototype._onLookupComplete=function(){this._removeDefaultLoader()},e.exports=s},{"./authorization_service":27,"./loader":30,"braintree-utilities":26}],29:[function(t,e,n){var i=t("./client");e.exports={create:function(t,e){var n=new i(t,e);return n}}},{"./client":28}],30:[function(t,e,n){var i=t("./loader_display"),r=t("./loader_message"),o=t("./loader_spinner");function s(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._display=null,this._initialize()}s.prototype._cssDeclarations=["filter:progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#7F000000, EndColorStr=#7F000000)","background-color: rgba(0, 0, 0, 0.5)","display: table","height: 100%","left: 0","position: fixed","right: 0","top: 0","width: 100%","z-index: 99999"].join(";"),s.prototype.getElement=function(){return this._element},s.prototype.dispose=function(){this._display.dispose(),this._display=null,this._element=null},s.prototype._initialize=function(){var t=new o,e=window.SVGElement&&window.SVGAnimateElement&&window.SVGAnimateTransformElement;e||(t=new r("Loading...")),this._display=new i(t),this.getElement().appendChild(this._display.getElement())},e.exports=s},{"./loader_display":31,"./loader_message":32,"./loader_spinner":33}],31:[function(t,e,n){function i(t){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._displayObject=t,this._initialize()}i.prototype._cssDeclarations=["display: table-cell","vertical-align: middle"].join(";"),i.prototype.getElement=function(){return this._element},i.prototype.dispose=function(){this._displayObject.dispose(),this._displayObject=null,this._element=null},i.prototype._initialize=function(){this.getElement().appendChild(this._displayObject.getElement())},e.exports=i},{}],32:[function(t,e,n){function i(t){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=t}i.prototype._cssDeclarations=["color: #fff","font-family: Helvetica, sans-serif","font-size: 12px","text-align: center"].join(";"),i.prototype.getElement=function(){return this._element},i.prototype.dispose=function(){this._element=null},e.exports=i},{}],33:[function(t,e,n){function i(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=this._markup}i.prototype._cssDeclarations=["height: 36px","margin-left: auto","margin-right: auto","width: 36px"].join(";"),i.prototype._markup=['<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"','width="100%" height="100%" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">','  <path fill="#FFF" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">','    <animateTransform attributeType="xml"','    attributeName="transform"','    type="rotate"','    from="0 25 25"','    to="360 25 25"','    dur="780ms"','    repeatCount="indefinite"','    calcMode="spline"','    keySplines="0.44, 0.22, 0, 1"','    keyTimes="0;1"/>',"  </path>","</svg>"].join(""),i.prototype.getElement=function(){return this._element},i.prototype.dispose=function(){this._element=null},e.exports=i},{}],34:[function(t,e,n){var i=t("braintree-utilities");function r(t){this.postMessageReceiver(t),this.hashChangeReceiver(t)}r.prototype.postMessageReceiver=function(t){var e=this;this.wrappedCallback=function(n){var i=n.data;(/^(auth_response=)/.test(i)||"user_closed=true"===i)&&(t(i),e.stopListening())},i.addEventListener(window,"message",this.wrappedCallback)},r.prototype.hashChangeReceiver=function(t){var e,n=window.location.hash,i=this;this.poll=setInterval(function(){(e=window.location.hash).length>0&&e!==n&&(i.stopListening(),e=e.substring(1,e.length),t(e),n.length>0?window.location.hash=n:window.location.hash="")},10)},r.prototype.stopListening=function(){clearTimeout(this.poll),i.removeEventListener(window,"message",this.wrappedCallback)},e.exports=r},{"braintree-utilities":26}],35:[function(t,e,n){var i,r=Array.prototype.indexOf;i=r?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},e.exports={indexOf:i}},{}],36:[function(t,e,n){e.exports={decodeUtf8:function(t){return decodeURIComponent(function(t){var e,n,i="";for(e=0;e<t.length;e++)i+="%",(n=t[e].charCodeAt(0).toString(16).toUpperCase()).length<2&&(i+="0"),i+=n;return i}(atob(t)))}}},{}],37:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],38:[function(t,e,n){e.exports={addEventListener:function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)},removeEventListener:function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}}},{}],39:[function(t,e,n){var i=Object.prototype.toString;e.exports={bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:function(t){return"[object Function]"===i.call(t)}}},{}],40:[function(t,e,n){e.exports={truncateEmail:function(t,e){var n,i;return-1===t.indexOf("@")?t:(t=t.split("@"),n=t[0],i=t[1],n.length>e&&(n=n.slice(0,e)+"..."),i.length>e&&(i="..."+i.slice(-e)),n+"@"+i)},getMaxCharLength:function(t){var e,n,i,r,o=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];for(r=o.length,t=t||window.innerWidth,n=0;n<r;n++)t>=(i=o[n]).min&&t<=i.max&&(e=i.chars);return e||60}}},{}],41:[function(t,e,n){var i=t("./array");function r(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function o(t){for(var e={},n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],s=decodeURIComponent(r[1]);e[o]=s}return e}var s=document.createElement("a"),a=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];e.exports={isBrowserHttps:function(){return"https:"===window.location.protocol},makeQueryString:function t(e,n){var i,o,s=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];i=n?n+"["+o+"]":o,"object"==typeof a?s.push(t(a,i)):void 0!==a&&null!==a&&s.push(r(i)+"="+r(a))}return s.join("&")},decodeQueryString:o,getParams:function(t){var e=t.split("?");return 2!==e.length?{}:o(e[1])},isWhitelistedDomain:function(t){if(t=t.toLowerCase(),!/^http/.test(t))return!1;s.href=t;var e=s.hostname.split(".").slice(-2).join(".");return-1!==i.indexOf(a,e)}}},{"./array":35}],42:[function(t,e,n){e.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}},{}],43:[function(t,e,n){var i=t("./lib/dom"),r=t("./lib/url"),o=t("./lib/fn"),s=t("./lib/events"),a=t("./lib/string"),c=t("./lib/array"),u=t("./lib/base64"),l=t("./lib/uuid");e.exports={string:a,array:c,normalizeElement:i.normalizeElement,isBrowserHttps:r.isBrowserHttps,makeQueryString:r.makeQueryString,decodeQueryString:r.decodeQueryString,getParams:r.getParams,isWhitelistedDomain:r.isWhitelistedDomain,removeEventListener:s.removeEventListener,addEventListener:s.addEventListener,preventDefault:s.preventDefault,bind:o.bind,isFunction:o.isFunction,base64ToUtf8:u.decodeUtf8,uuid:l}},{"./lib/array":35,"./lib/base64":36,"./lib/dom":37,"./lib/events":38,"./lib/fn":39,"./lib/string":40,"./lib/url":41,"./lib/uuid":42}],44:[function(t,e,n){var i,r=t("lodash.isarguments"),o=t("lodash.isarray"),s=t("lodash.isfunction"),a=t("lodash.isstring"),c=t("lodash.keys"),u=9007199254740991,l=(i="length",function(t){return null==t?void 0:t[i]});function p(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}(l(t))}e.exports=function(t){return null==t||(p(t)&&(o(t)||a(t)||r(t)||function(t){return!!t&&"object"==typeof t}(t)&&s(t.splice))?!t.length:!c(t).length)}},{"lodash.isarguments":45,"lodash.isarray":46,"lodash.isfunction":47,"lodash.isstring":51,"lodash.keys":48}],45:[function(t,e,n){var i,r=Object.prototype,o=r.hasOwnProperty,s=r.propertyIsEnumerable,a=9007199254740991,c=(i="length",function(t){return null==t?void 0:t[i]});function u(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(c(t))}e.exports=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&u(t)&&o.call(t,"callee")&&!s.call(t,"callee")}},{}],46:[function(t,e,n){var i="[object Function]",r=/^\[object .+?Constructor\]$/;function o(t){return!!t&&"object"==typeof t}var s,a,c=Object.prototype,u=Function.prototype.toString,l=c.hasOwnProperty,p=c.toString,d=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=(s=Array,function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&p.call(t)==i}(t)?d.test(u.call(t)):o(t)&&r.test(t))}(a=null==s?void 0:s.isArray)?a:void 0),f=9007199254740991,y=h||function(t){return o(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}(t.length)&&"[object Array]"==p.call(t)};e.exports=y},{}],47:[function(t,e,n){var i="[object Function]",r=Object.prototype,o=r.toString;e.exports=function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&o.call(t)==i}},{}],48:[function(t,e,n){var i,r=t("lodash._getnative"),o=t("lodash.isarguments"),s=t("lodash.isarray"),a=/^\d+$/,c=Object.prototype,u=c.hasOwnProperty,l=r(Object,"keys"),p=9007199254740991,d=(i="length",function(t){return null==t?void 0:t[i]});function h(t,e){return t="number"==typeof t||a.test(t)?+t:-1,e=null==e?p:e,t>-1&&t%1==0&&t<e}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function y(t){for(var e=function(t){if(null==t)return[];m(t)||(t=Object(t));var e=t.length;e=e&&f(e)&&(s(t)||o(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,a=Array(e),c=e>0;++i<e;)a[i]=i+"";for(var l in t)c&&h(l,e)||"constructor"==l&&(r||!u.call(t,l))||a.push(l);return a}(t),n=e.length,i=n&&t.length,r=!!i&&f(i)&&(s(t)||o(t)),a=-1,c=[];++a<n;){var l=e[a];(r&&h(l,i)||u.call(t,l))&&c.push(l)}return c}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var b=l?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&null!=(e=t)&&f(d(e))?y(t):m(t)?l(t):[]}:y;e.exports=b},{"lodash._getnative":49,"lodash.isarguments":45,"lodash.isarray":46}],49:[function(t,e,n){var i="[object Function]",r=/^\[object .+?Constructor\]$/,o=Object.prototype,s=Function.prototype.toString,a=o.hasOwnProperty,c=o.toString,u=RegExp("^"+s.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&c.call(t)==i}(t)?u.test(s.call(t)):function(t){return!!t&&"object"==typeof t}(t)&&r.test(t))}e.exports=function(t,e){var n=null==t?void 0:t[e];return l(n)?n:void 0}},{}],50:[function(t,e,n){e.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},{}],51:[function(t,e,n){var i="[object String]",r=Object.prototype,o=r.toString;e.exports=function(t){return"string"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&o.call(t)==i}},{}],52:[function(t,e,n){var i=t("framebus"),r=t("./lib/events"),o=t("./lib/check-origin").checkOrigin;function s(t){if(t=t||{},this.channel=t.channel,!this.channel)throw new Error("Channel ID must be specified");this.merchantUrl=t.merchantUrl,this._isDestroyed=!1,this._isVerbose=!1,this._listeners=[],this._log("new bus on channel "+this.channel,[location.href])}s.prototype.on=function(t,e){var n,r,s=e,a=this;this._isDestroyed||(this.merchantUrl&&(s=function(){o(this.origin,a.merchantUrl)&&e.apply(this,arguments)}),n=this._namespaceEvent(t),(r=Array.prototype.slice.call(arguments))[0]=n,r[1]=s,this._log("on",r),i.on.apply(i,r),this._listeners.push({eventName:t,handler:s,originalHandler:e}))},s.prototype.emit=function(t,e,n){var r;this._isDestroyed||((r=Array.prototype.slice.call(arguments))[0]=this._namespaceEvent(t),this._log("emit",r),i.emit.apply(i,r))},s.prototype._offDirect=function(t,e){var n=Array.prototype.slice.call(arguments);this._isDestroyed||(n[0]=this._namespaceEvent(t),this._log("off",n),i.off.apply(i,n))},s.prototype.off=function(t,e){var n,i,r=e;if(!this._isDestroyed){if(this.merchantUrl)for(n=0;n<this._listeners.length;n++)(i=this._listeners[n]).originalHandler===e&&(r=i.handler);this._offDirect.call(this,t,r)}},s.prototype._namespaceEvent=function(t){return["braintree",this.channel,t].join(":")},s.prototype.teardown=function(){var t,e;for(e=0;e<this._listeners.length;e++)t=this._listeners[e],this._offDirect(t.eventName,t.handler);this._listeners.length=0,this._isDestroyed=!0},s.prototype._log=function(t,e){this._isVerbose&&console.log(t,e)},s.events=r,e.exports=s},{"./lib/check-origin":53,"./lib/events":54,framebus:55}],53:[function(t,e,n){var i=/^https:\/\/([a-zA-Z0-9-]+\.)*(braintreepayments|braintreegateway|paypal)\.com(:\d{1,5})?$/;e.exports={checkOrigin:function(t,e){var n,r=document.createElement("a");return r.href=e,n="https:"===r.protocol?r.host.replace(/:443$/,""):"http:"===r.protocol?r.host.replace(/:80$/,""):r.host,r.protocol+"//"+n===t||i.test(t)}}},{}],54:[function(t,e,n){var i,r,o=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY","USER_FORM_SUBMIT_REQUEST","SEND_ANALYTICS_EVENTS"],s={};for(i=0;i<o.length;i++)s[r=o[i]]=r;e.exports=s},{}],55:[function(t,e,n){var i,r;i=this,r=function(){var t,e,n,i=[],r={},o="/*framebus*/";function s(e){var n,i,r=u(this);return!l(e)&&!l(r)&&(i=Array.prototype.slice.call(arguments,1),!1!==(n=p(e,i,r))&&(f(t.top,n,r),!0))}function a(t,e){var n=u(this);return!y(t,e,n)&&(r[n]=r[n]||{},r[n][t]=r[n][t]||[],r[n][t].push(e),!0)}function c(t,e){var n,i,o=u(this);if(y(t,e,o))return!1;if(!(i=r[o]&&r[o][t]))return!1;for(n=0;n<i.length;n++)if(i[n]===e)return i.splice(n,1),!0;return!1}function u(t){return t&&t._origin||"*"}function l(t){return"string"!=typeof t}function p(t,n,i){var r=!1,s={event:t,origin:i},a=n[n.length-1];"function"==typeof a&&(s.reply=function(t,n){var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)});return e.target(n).subscribe(i,function r(o,s){t(o,s),e.target(n).unsubscribe(i,r)}),i}(a,i),n=n.slice(0,-1)),s.args=n;try{r=o+JSON.stringify(s)}catch(t){throw new Error("Could not stringify event: "+t.message)}return r}function d(t){var e;l(t.data)||(e=function(t){var e,n,i,r;if(t.data.slice(0,o.length)!==o)return!1;try{e=JSON.parse(t.data.slice(o.length))}catch(t){return!1}return null!=e.reply&&(n=t.origin,i=t.source,r=e.reply,e.reply=function(t){var e=p(r,[t],n);if(!1===e)return!1;i.postMessage(e,n)},e.args.push(e.reply)),e}(t))&&(h("*",e.event,e.args,t),h(t.origin,e.event,e.args,t),function(t,e,n){var r,o;for(r=i.length-1;r>=0;r--)!0===(o=i[r]).closed?i=i.slice(r,1):n!==o&&f(o.top,t,e)}(t.data,e.origin,t.source))}function h(t,e,n,i){var o;if(r[t]&&r[t][e])for(o=0;o<r[t][e].length;o++)r[t][e][o].apply(i,n)}function f(e,n,i){var r;try{e.postMessage(n,i)}catch(t){return}for(e.opener&&e.opener!==e&&!e.opener.closed&&e.opener!==t&&f(e.opener.top,n,i),r=0;r<e.frames.length;r++)f(e.frames[r],n,i)}function y(t,e,n){return!!l(t)||"function"!=typeof e||!!l(n)}return t||((t=n||window).addEventListener?t.addEventListener("message",d,!1):t.attachEvent?t.attachEvent("onmessage",d):null===t.onmessage?t.onmessage=d:t=null),e={target:function(t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i._origin=t||"*",i},include:function(t){return null!=t&&null!=t.Window&&t.constructor===t.Window&&(i.push(t),!0)},publish:s,pub:s,trigger:s,emit:s,subscribe:a,sub:a,on:a,unsubscribe:c,unsub:c,off:c}},"object"==typeof n&&void 0!==e?e.exports=r():i.framebus=r()},{}],56:[function(t,e,n){var i=t("./lib/coinbase");e.exports={create:function(t){return new i(t)}}},{"./lib/coinbase":59}],57:[function(t,e,n){(function(t){e.exports={ieVersion:function(e){e=e||t.navigator.userAgent;var n=null,i=/MSIE.(\d+)/.exec(e);return/Trident/.test(e)&&(n=11),i&&(n=parseInt(i[1],10)),n},iOSSafariVersion:function(e){return e=e||t.navigator.userAgent,/AppleWebKit\//.test(e)&&/Mobile\//.test(e)?e.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,"."):null},androidVersion:function(e){return e=e||t.navigator.userAgent,/Android/.test(e)?e.replace(/^.* Android ([0-9\.]+).*$/,"$1"):null}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(t,e,n){var i=t("braintree-bus").events;e.exports={tokenize:function(t,e,n){if(t)return n.bus.emit(i.ERROR,t.error),void n._sendAnalyticsEvent("generate.nonce.failed");n.bus.emit(i.PAYMENT_METHOD_GENERATED,e),n._sendAnalyticsEvent("generate.nonce.succeeded")}}},{"braintree-bus":67}],59:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("destructor"),o=t("./dom/composer"),s=t("./url-composer"),a=t("./callbacks"),c=t("./constants"),u=t("./detector"),l=t("braintree-bus");function p(t,e){var n=(t||{}).coinbase,i=function(t){return function(e,n){t.emit(l.events.ERROR,{type:n,message:e})}}(e);if(null==t.apiClient)i("settings.apiClient is required for coinbase",c.CONFIGURATION_ERROR);else if(t.configuration.coinbaseEnabled)if(n&&(n.container||n.button))if(n.container&&n.button)i("options.coinbase.container and options.coinbase.button are mutually exclusive",c.CONFIGURATION_ERROR);else{if(u.isSupportedBrowser())return!0;i("Coinbase is not supported by your browser. Please consider upgrading",c.UNSUPPORTED_BROWSER_ERROR)}else i("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",c.CONFIGURATION_ERROR);else i("Coinbase is not enabled for your merchant account",c.CONFIGURATION_ERROR);return!1}function d(t){var e,o;this.destructor=new r,this.channel=t.channel,o={channel:this.channel};try{t.coinbase.container&&(o.merchantUrl=n.location.href)}catch(t){}this.bus=t.bus||new l(o),this.canCreateIntegration=p(t,this.bus),this.canCreateIntegration&&(this.buttonId=t.coinbase.button||c.BUTTON_ID,this.apiClient=t.apiClient,this.assetsUrl=t.configuration.assetsUrl,this.environment=t.configuration.coinbase.environment,this._onOAuthSuccess=i.bind(this._onOAuthSuccess,this),this._handleButtonClick=i.bind(this._handleButtonClick,this),this.popupParams=function(t){return{clientId:t.configuration.coinbase.clientId,redirectUrl:t.configuration.coinbase.redirectUrl,scopes:t.configuration.coinbase.scopes||c.SCOPES,meta:{authorizations_merchant_account:t.configuration.coinbase.merchantAccount||""}}}(t),this.redirectDoneInterval=null,t.coinbase.container?(e=i.normalizeElement(t.coinbase.container),this._insertFrame(e)):(n.braintreeCoinbasePopupCallback=this._onOAuthSuccess,e=document.body,i.addEventListener(e,"click",this._handleButtonClick),this._sendAnalyticsEvent("initialized"),this.destructor.registerFunctionForTeardown(i.bind(function(){this._closePopup()},this)),this.bus.on(c.TEARDOWN_EVENT,i.bind(this.destructor.teardown,this.destructor))))}d.prototype._sendAnalyticsEvent=function(t){var e=this.apiClient.integration+".web.coinbase.";this.apiClient.sendAnalyticsEvents(e+t)},d.prototype._insertFrame=function(t){var e=o.createFrame({channel:this.channel});this.bus.emit(l.events.ASYNC_DEPENDENCY_INITIALIZING),t.appendChild(e),this.destructor.registerFunctionForTeardown(function(){t.removeChild(e)}),setTimeout(i.bind(function(){e.src=this.assetsUrl+"/coinbase/"+c.VERSION+"/coinbase-frame.html#"+this.channel},this),0)},d.prototype._onOAuthSuccess=function(t){if(!t.code)return this._sendAnalyticsEvent("popup.denied"),void this._closePopup();this.bus.emit("coinbase:view:navigate","loading"),this._sendAnalyticsEvent("popup.authorized"),this.apiClient.tokenizeCoinbase({code:t.code,query:s.getQueryString()},i.bind(function(t,e){a.tokenize.apply(null,[t,e,this])},this)),this._closePopup()},d.prototype._clearPollForRedirectDone=function(){this.redirectDoneInterval&&(clearInterval(this.redirectDoneInterval),this.redirectDoneInterval=null)},d.prototype._closePopup=function(t){null!=(t=t||this.popup)&&(u.shouldCloseFromParent()&&t.close(),this._popupCleanup())},d.prototype._popupCleanup=function(){this._clearPollForRedirectDone(),this.bus.emit(l.events.UI_POPUP_DID_CLOSE,{source:c.INTEGRATION_NAME})},d.prototype._pollForRedirectDone=function(t){var e=setInterval(i.bind(function(){var e;if(null==t||t.closed)return this._sendAnalyticsEvent("popup.aborted"),void this._popupCleanup();try{if("about:blank"===t.location.href)throw new Error("Not finished loading");e=i.decodeQueryString(t.location.search.replace(/^\?/,"")).code}catch(t){return}this._onOAuthSuccess({code:e})},this),100);return this.redirectDoneInterval=e,e},d.prototype._openPopup=function(){var t;this._sendAnalyticsEvent("popup.started"),(t=o.createPopup(s.compose(this._getOAuthBaseUrl(),this.popupParams))).focus(),this._pollForRedirectDone(t),this.bus.emit(l.events.UI_POPUP_DID_OPEN,{source:c.INTEGRATION_NAME}),this.bus.on(l.events.UI_POPUP_FORCE_CLOSE,function(e){e.target===c.INTEGRATION_NAME&&t.close()}),this.popup=t},d.prototype._getOAuthBaseUrl=function(){return"shared_sandbox"===this.environment?c.SANDBOX_OAUTH_BASE_URL:c.PRODUCTION_OAUTH_BASE_URL},d.prototype._handleButtonClick=function(t){for(var e=t.target||t.srcElement;;){if(null==e)return;if(e===t.currentTarget)return;if(e.id===this.buttonId)break;e=e.parentNode}t&&t.preventDefault?t.preventDefault():t.returnValue=!1,this._openPopup()},d.prototype.teardown=function(t){var e=this;this.canCreateIntegration?this.bus.emit(c.TEARDOWN_EVENT,function(){e.destructor.teardown(function(n){if(n)return t(n);e.bus.teardown(),t(null)})}):t(null)},e.exports=d}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./callbacks":58,"./constants":60,"./detector":61,"./dom/composer":63,"./url-composer":66,"braintree-bus":67,"braintree-utilities":79,destructor:80}],60:[function(t,e,n){e.exports={PRODUCTION_OAUTH_BASE_URL:"https://coinbase.com",SANDBOX_OAUTH_BASE_URL:"https://sandbox.coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"0.3.1",INTEGRATION_NAME:"Coinbase",CONFIGURATION_ERROR:"CONFIGURATION",UNSUPPORTED_BROWSER_ERROR:"UNSUPPORTED_BROWSER",TEARDOWN_EVENT:"coinbase:TEARDOWN"}},{}],61:[function(t,e,n){var i=t("./browser");function r(){var t=i.androidVersion();return null!=t&&/^5/.test(t)}function o(){var t=i.iOSSafariVersion();return null!=t&&(/^8\.0/.test(t)||/^8\.1$/.test(t))}e.exports={isSupportedBrowser:function(){var t=i.ieVersion();return!t||t>8},shouldCloseFromParent:function(){return!(r()||o())},shouldDisplayIOSClose:o,shouldDisplayLollipopClose:r}},{"./browser":57}],62:[function(t,e,n){e.exports={create:function(t){var e=document.createElement("button");return t=t||{},e.id=t.id||"coinbase-button",e.style.backgroundColor=t.backgroundColor||"#EEE",e.style.color=t.color||"#4597C3",e.style.border=t.border||"0",e.style.borderRadius=t.borderRadius||"6px",e.style.padding=t.padding||"12px",e.innerHTML=t.innerHTML||"coinbase",e}}},{}],63:[function(t,e,n){var i=t("./popup"),r=t("./button"),o=t("./frame");e.exports={createButton:r.create,createPopup:i.create,createFrame:o.create}},{"./button":62,"./frame":64,"./popup":65}],64:[function(t,e,n){var i=t("../constants"),r=t("iframer");e.exports={create:function(t){return r({name:i.FRAME_NAME,height:"70px",width:"100%",style:{padding:0,margin:0,border:0,outline:"none"}})}}},{"../constants":60,iframer:83}],65:[function(t,e,n){(function(n){var i=t("../constants");e.exports={create:function(t){return n.open(t,i.POPUP_NAME,function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push([n,t[n]].join("="));return e.join(",")}({width:850,height:600,left:(screen.width-850)/2,top:(screen.height-600)/4}))}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants":60}],66:[function(t,e,n){var i=t("./constants");function r(){return"version="+i.VERSION}e.exports={compose:function(t,e){var n=t+"/oauth/authorize?response_type=code",i=e.redirectUrl+"?"+r();if(n+="&redirect_uri="+encodeURIComponent(i),n+="&client_id="+e.clientId,e.scopes&&(n+="&scope="+encodeURIComponent(e.scopes)),e.meta)for(var o in e.meta)e.meta.hasOwnProperty(o)&&(n+="&meta["+encodeURIComponent(o)+"]="+encodeURIComponent(e.meta[o]));return n},getQueryString:r}},{"./constants":60}],67:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":68,"./lib/events":69,dup:52,framebus:70}],68:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],69:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],70:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],71:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],72:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],73:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],74:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],75:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],76:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],77:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":71,dup:41}],78:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],79:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":71,"./lib/base64":72,"./lib/dom":73,"./lib/events":74,"./lib/fn":75,"./lib/string":76,"./lib/url":77,"./lib/uuid":78,dup:43}],80:[function(t,e,n){var i=t("batch-execute-functions"),r=t("braintree-utilities/lib/fn");function o(){this._teardownRegistry=[]}o.prototype.registerFunctionForTeardown=function(t){r.isFunction(t)&&this._teardownRegistry.push(t)},o.prototype.teardown=function(t){i(this._teardownRegistry,r.bind(function(e){this._teardownRegistry=[],r.isFunction(t)&&t(e)},this))},e.exports=o},{"batch-execute-functions":81,"braintree-utilities/lib/fn":82}],81:[function(t,e,n){function i(t,e){var n,i=0===t.length;i?(t(),e(null)):(n=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}(e),t(n))}e.exports=function(t,e){var n=t.length,r=n;if(0!==n)for(var o=0;o<n;o++)i(t[o],function(t){t?e(t):0==(r-=1)&&e(null)});else e(null)}},{}],82:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],83:[function(t,e,n){var i=t("lodash.assign"),r=t("lodash.isstring"),o=t("setattributes"),s=t("./lib/default-attributes");e.exports=function(t){var e=document.createElement("iframe"),n=i({},s,t);return n.style&&!r(n.style)&&(i(e.style,n.style),delete n.style),o(e,n),e.getAttribute("id")||(e.id=e.name),e}},{"./lib/default-attributes":84,"lodash.assign":85,"lodash.isstring":96,setattributes:97}],84:[function(t,e,n){e.exports={src:"about:blank",frameBorder:0,allowtransparency:!0,scrolling:"no"}},{}],85:[function(t,e,n){var i=t("lodash._baseassign"),r=t("lodash._createassigner"),o=t("lodash.keys"),s=r(function(t,e,n){return n?function(t,e,n){for(var i=-1,r=o(e),s=r.length;++i<s;){var a=r[i],c=t[a],u=n(c,e[a],a,t,e);(u==u?u===c:c!=c)&&(void 0!==c||a in t)||(t[a]=u)}return t}(t,e,n):i(t,e)});e.exports=s},{"lodash._baseassign":86,"lodash._createassigner":88,"lodash.keys":92}],86:[function(t,e,n){var i=t("lodash._basecopy"),r=t("lodash.keys");e.exports=function(t,e){return null==e?t:i(e,r(e),t)}},{"lodash._basecopy":87,"lodash.keys":92}],87:[function(t,e,n){e.exports=function(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}},{}],88:[function(t,e,n){var i=t("lodash._bindcallback"),r=t("lodash._isiterateecall"),o=t("lodash.restparam");e.exports=function(t){return o(function(e,n){var o=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=i(a,u,5),s-=2):s-=(a="function"==typeof u?u:void 0)?1:0,c&&r(n[0],n[1],c)&&(a=s<3?void 0:a,s=1);++o<s;){var l=n[o];l&&t(e,l,a)}return e})}},{"lodash._bindcallback":89,"lodash._isiterateecall":90,"lodash.restparam":91}],89:[function(t,e,n){function i(t){return t}e.exports=function(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}},{}],90:[function(t,e,n){var i,r=/^\d+$/,o=9007199254740991,s=(i="length",function(t){return null==t?void 0:t[i]});function a(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(s(t))}e.exports=function(t,e,n){if(!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(n))return!1;var i=typeof e;if("number"==i?a(n)&&function(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&t<e}(e,n.length):"string"==i&&e in n){var s=n[e];return t==t?t===s:s!=s}return!1}},{}],91:[function(t,e,n){var i="Expected a function",r=Math.max;e.exports=function(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}},{}],92:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":93,"lodash.isarguments":94,"lodash.isarray":95}],93:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],94:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],95:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],96:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],97:[function(t,e,n){e.exports=function(t,e){var n;for(var i in e)e.hasOwnProperty(i)&&(null==(n=e[i])?t.removeAttribute(i):t.setAttribute(i,n))}},{}],98:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{"./coinbase-account":99,"./constants":100,"./credit-card":101,"./europe-bank-account":102,"./normalize-api-fields":104,"./parse-client-token":105,"./paypal-account":106,"./request/choose-driver":109,"./sepa-mandate":114,"./should-enable-cors":115,"./util":116,"braintree-3ds":125,"braintree-utilities":139,dup:2}],99:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],100:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],101:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],102:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],103:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{"./constants":100,"./parse-client-token":105,"./request/choose-driver":109,"./should-enable-cors":115,"./util":116,dup:7}],104:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],105:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"./polyfill":107,"braintree-utilities":139,dup:9}],106:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],107:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],108:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{"../constants":100,"../util":116,"./parse-body":112,"./prep-body":113,dup:12}],109:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"../util":116,"./ajax-driver":108,"./jsonp-driver":110,dup:13}],110:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"../constants":100,"./jsonp":111,dup:14}],111:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{"../util":116,dup:15}],112:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],113:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17,"lodash.isstring":147}],114:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],115:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],116:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20,"lodash.isempty":140,"lodash.isobject":146}],117:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{"./lib/client":98,"./lib/get-configuration":103,"./lib/parse-client-token":105,"./lib/util":116,dup:21}],118:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],119:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],120:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],121:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],122:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{"./lib/dom":118,"./lib/events":119,"./lib/fn":120,"./lib/url":121,dup:26}],123:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{"../shared/receiver":130,"braintree-utilities":122,dup:27}],124:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./authorization_service":123,"./loader":126,"braintree-utilities":122,dup:28}],125:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{"./client":124,dup:29}],126:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./loader_display":127,"./loader_message":128,"./loader_spinner":129,dup:30}],127:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],128:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],129:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],130:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{"braintree-utilities":122,dup:34}],131:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],132:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],133:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],134:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],135:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],136:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],137:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":131,dup:41}],138:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],139:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":131,"./lib/base64":132,"./lib/dom":133,"./lib/events":134,"./lib/fn":135,"./lib/string":136,"./lib/url":137,"./lib/uuid":138,dup:43}],140:[function(t,e,n){arguments[4][44][0].apply(n,arguments)},{dup:44,"lodash.isarguments":141,"lodash.isarray":142,"lodash.isfunction":143,"lodash.isstring":147,"lodash.keys":144}],141:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],142:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],143:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{dup:47}],144:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":145,"lodash.isarguments":141,"lodash.isarray":142}],145:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],146:[function(t,e,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],147:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],148:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":149,"./lib/events":150,dup:52,framebus:151}],149:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],150:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],151:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],152:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":153,"./lib/events":154,dup:52,framebus:155}],153:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],154:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],155:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],156:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],157:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],158:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],159:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],160:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],161:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],162:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":156,dup:41}],163:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],164:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":156,"./lib/base64":157,"./lib/dom":158,"./lib/events":159,"./lib/fn":160,"./lib/string":161,"./lib/url":162,"./lib/uuid":163,dup:43}],165:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":166,"braintree-utilities/lib/fn":167,dup:80}],166:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],167:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],168:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./lib/default-attributes":169,dup:83,"lodash.assign":170,"lodash.isstring":181,setattributes:182}],169:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],170:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{dup:85,"lodash._baseassign":171,"lodash._createassigner":173,"lodash.keys":177}],171:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":172,"lodash.keys":177}],172:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],173:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88,"lodash._bindcallback":174,"lodash._isiterateecall":175,"lodash.restparam":176}],174:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],175:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],176:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{dup:91}],177:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":178,"lodash.isarguments":179,"lodash.isarray":180}],178:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],179:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],180:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],181:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],182:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],183:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("../../shared/util/browser"),o=t("destructor"),s=t("braintree-bus"),a=t("../../shared/constants"),c=t("./popup-view"),u=t("./modal-view");function l(t){this.options=t||{},this.destructor=new o,this.bus=new s({merchantUrl:n.location.href,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(i.bind(function(){this.bus.teardown()},this)),this._initialize()}l.prototype._initialize=function(){r.isPopupSupported()?this.app=new c({src:this._buildUrl(),isHermes:this.options.isHermes,channel:this.options.channel}):this.app=new u({src:this._buildUrl(),headless:this.options.headless,isHermes:this.options.isHermes,insertFrameFunction:this.options.insertFrameFunction,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(i.bind(function(){this.app.teardown()},this)),this.bus.on(a.events.CLOSE_APP,i.bind(this.close,this)),this.bus.on(a.events.FOCUS_APP,i.bind(this.focus,this)),this.bus.on(s.events.PAYMENT_METHOD_GENERATED,i.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(s.events.UI_POPUP_FORCE_CLOSE,i.bind(this._handleForceClose,this))},l.prototype._buildUrl=function(){var t=this.options.paypalAssetsUrl;return t+="/pwpp/",t+=a.VERSION,t+="/html/braintree-frame.html",t+="#"+this.options.channel},l.prototype.open=function(){this.focus(),this.app.open(),this.poll()},l.prototype._handleForceClose=function(t){t.target===a.PAYPAL_INTEGRATION_NAME&&this.close()},l.prototype.close=function(){this.app.close()},l.prototype.focus=function(){i.isFunction(this.app.focus)&&this.app.focus()},l.prototype.isClosed=function(){return this.app.isClosed()},l.prototype.stopPolling=function(){clearInterval(this.pollId)},l.prototype.poll=function(){this.pollId=setInterval(i.bind(function(){this.isClosed()&&this._handleClosed()},this),100)},l.prototype._handlePaymentMethodGenerated=function(t){t.type===a.NONCE_TYPE&&this.close()},l.prototype._handleClosed=function(){this.stopPolling(),this.close(),r.isPopupSupported()&&(this.app.el=null)},l.prototype.teardown=function(){this.destructor.teardown()},e.exports=l}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"./modal-view":184,"./popup-view":185,"braintree-bus":152,"braintree-utilities":164,destructor:165}],184:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("../../shared/util/browser"),o=t("../../shared/constants"),s=t("braintree-bus"),a=t("iframer");function c(t){this.options=t||{},this.container=document.body,this.bus=new s({merchantUrl:n.location.href,channel:t.channel}),this.options.headless?this._open=this._openHeadless:this._attachBusEvents(),this._initialize()}c.prototype._attachBusEvents=function(){this.bus.on(o.events.OPEN_MODAL,i.bind(this.open,this))},c.prototype._initialize=function(){var t=this.options.isHermes?o.HERMES_FRAME_NAME:o.FRAME_NAME;this.el=a({src:this.options.src,name:t,height:this.options.height||"100%",width:this.options.width||"100%",style:{position:r.isMobile()?"absolute":"fixed",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",zIndex:20001,background:"#FFFFFF"}})},c.prototype.isClosed=function(){return!this.container.contains(this.el)},c.prototype._openHeadless=function(){this.bus.emit(o.events.OPEN_MODAL)},c.prototype._open=function(){i.isFunction(this.options.insertFrameFunction)?this.options.insertFrameFunction(this.el.src):this.container.appendChild(this.el),this.bus.emit(o.events.UI_MODAL_DID_OPEN,{source:o.PAYPAL_INTEGRATION_NAME})},c.prototype.open=function(){this.isClosed()&&this._open()},c.prototype.close=function(){this.isClosed()||(this.container.removeChild(this.el),this.bus.emit(o.events.UI_MODAL_DID_CLOSE,{source:o.PAYPAL_INTEGRATION_NAME}))},c.prototype.teardown=function(){this.close(),this.bus.teardown()},e.exports=c}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"braintree-bus":152,"braintree-utilities":164,iframer:168}],185:[function(t,e,n){(function(n){var i=t("../../shared/constants"),r=t("braintree-bus"),o=t("../../shared/useragent/browser");function s(t){this.options=t,this.bus=new r({merchantUrl:n.location.href,channel:this.options.channel}),t.isHermes?(this.name=i.HERMES_POPUP_NAME,this.popupHeight=i.HERMES_POPUP_HEIGHT,this.popupWidth=i.HERMES_POPUP_WIDTH):(this.name=i.POPUP_NAME,this.popupHeight=i.POPUP_HEIGHT,this.popupWidth=i.POPUP_WIDTH)}s.prototype._getPopupOptions=function(){return["height="+this.popupHeight,"width="+this.popupWidth,"top="+this._getTopPosition(),"left="+this._getLeftPosition(),i.POPUP_OPTIONS].join(",")},s.prototype._centerPosition=function(t,e,n){return(t-e)/2+n},s.prototype._getTopPosition=function(){var t=window.outerHeight||document.documentElement.clientHeight,e=void 0===window.screenY?window.screenTop:window.screenY;return this._centerPosition(t,this.popupHeight,e)},s.prototype._getLeftPosition=function(){var t=window.outerWidth||document.documentElement.clientWidth,e=void 0===window.screenX?window.screenLeft:window.screenX;return this._centerPosition(t,this.popupWidth,e)},s.prototype.isClosed=function(){if(this.el)return this.el.closed},s.prototype.open=function(){this.el||(this.el=window.open(this.options.src,this.name,this._getPopupOptions()),this.focus(),this.bus.emit(r.events.UI_POPUP_DID_OPEN,{source:i.PAYPAL_INTEGRATION_NAME}))},s.prototype.close=function(){this.el&&((o.isIE8()&&!this.isClosed()||!o.isIE8())&&this.el.close(),this.bus.emit(r.events.UI_POPUP_DID_CLOSE,{source:i.PAYPAL_INTEGRATION_NAME}))},s.prototype.focus=function(){this.el&&this.el.focus()},s.prototype.teardown=function(){this.close(),this.bus.teardown()},e.exports=s}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":186,"../../shared/useragent/browser":187,"braintree-bus":152}],186:[function(t,e,n){var i,r=["GET_CLIENT_TOKEN","GET_CLIENT_OPTIONS","OPEN_MODAL","CLOSE_APP","FOCUS_APP","UI_MODAL_DID_OPEN","UI_MODAL_DID_CLOSE"];for(n.VERSION="1.6.1",n.POPUP_NAME="braintree_paypal_popup",n.HERMES_POPUP_NAME="PPFrameRedirect",n.FRAME_NAME="braintree-paypal-frame",n.HERMES_FRAME_NAME="PPFrameRedirect",n.POPUP_PATH="/pwpp/1.6.1/html/braintree-frame.html",n.POPUP_OPTIONS="resizable,scrollbars",n.POPUP_HEIGHT=470,n.POPUP_WIDTH=410,n.HERMES_POPUP_HEIGHT=535,n.HERMES_POPUP_WIDTH=450,n.BRIDGE_FRAME_NAME="bt-proxy-frame",n.HERMES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD","DKK","NOK","PLN","SEK","CHF","TRY"],n.HERMES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT","NL","NO","PL","CH","TR","DK","BE","AT"],n.NONCE_TYPE="PayPalAccount",n.PAYPAL_INTEGRATION_NAME="PayPal",n.ILLEGAL_XHR_ERROR="Illegal XHR request attempted",n.events={},i=0;i<r.length;i++)n.events[r[i]]="paypal:"+r[i]},{}],187:[function(t,e,n){var i=t("./useragent"),r=t("./platform");function o(){return i.matchUserAgent("Android")&&!s()}function s(){return i.matchUserAgent("Chrome")||i.matchUserAgent("CriOS")}function a(){return i.matchUserAgent("Opera")||i.matchUserAgent("OPR")}function c(){return i.matchUserAgent("Safari")&&!s()&&!o()}e.exports={isAndroid:o,isChrome:s,isFirefox:function(){return i.matchUserAgent("Firefox")},isIE:function(){return i.matchUserAgent("Trident")||i.matchUserAgent("MSIE")},isIE8:function(){return i.matchUserAgent(/MSIE 8\.0/)},isOpera:a,isOperaMini:function(){return a()&&"[object OperaMini]"===Object.prototype.toString.call(window.operamini)},isSafari:c,isIosWebView:function(){return r.isIos()&&!s()&&!c()},isAndroidWebView:function(){return r.isAndroid()&&i.matchUserAgent(/Version\/[\w\.]+ Chrome\/[\w\.]+ Mobile/)}}},{"./platform":189,"./useragent":190}],188:[function(t,e,n){var i=t("./useragent"),r=t("./platform");function o(){return!s()&&(r.isAndroid()||r.isIpod()||r.isIphone()||i.matchUserAgent("IEMobile"))}function s(){return r.isIpad()||r.isAndroid()&&!i.matchUserAgent("Mobile")}e.exports={isMobile:o,isTablet:s,isDesktop:function(){return!o()&&!s()}}},{"./platform":189,"./useragent":190}],189:[function(t,e,n){var i=t("./useragent");function r(){return i.matchUserAgent("iPad")}function o(){return i.matchUserAgent("iPod")}function s(){return i.matchUserAgent("iPhone")&&!o()}e.exports={isAndroid:function(){return i.matchUserAgent("Android")},isIpad:r,isIpod:o,isIphone:s,isIos:function(){return r()||o()||s()}}},{"./useragent":190}],190:[function(t,e,n){var i=window.navigator.userAgent;n.getNativeUserAgent=function(){return i},n.matchUserAgent=function(t){return!!n.getNativeUserAgent().match(t)}},{}],191:[function(t,e,n){var i=t("../useragent/browser"),r=t("../useragent/device"),o=t("../useragent/platform"),s=t("../useragent/useragent"),a=window.navigator.userAgent,c=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;function u(){return c.test(a)}e.exports={isMobile:function(){return u()&&window.outerWidth<600},isMobileDevice:u,detectedPostMessage:function(){return Boolean(window.postMessage)},isPopupSupported:function(){if(i.isOperaMini())return!1;if(r.isDesktop())return!0;if(r.isMobile()||r.isTablet()){if(i.isIE())return!1;if(o.isAndroid())return!i.isAndroidWebView();if(o.isIos())return!(i.isChrome()||i.isSafari()&&s.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)||i.isIosWebView())}return!1},isOverlaySupported:function(){if(i.isIE8())return!1;try{return window.self===window.top}catch(t){return!1}},isBridgeIframeRequired:function(){return i.isIE()},isMetroBrowser:function(){var t=null,e="";try{new ActiveXObject("")}catch(t){e=t.name}try{t=Boolean(new ActiveXObject("htmlfile"))}catch(e){t=!1}return!(t="ReferenceError"===e||!1!==t)}}},{"../useragent/browser":187,"../useragent/device":188,"../useragent/platform":189,"../useragent/useragent":190}],192:[function(t,e,n){var i=t("braintree-utilities");function r(t,e){this.host=t||window,this.channel=e||null,this.handlers=[],i.addEventListener(this.host,"message",i.bind(this.receive,this))}r.prototype.receive=function(t){var e,n,i,o;try{i=JSON.parse(t.data)}catch(t){return}for(o=i.type,n=new r.Message(this,t.source,i.data),e=0;e<this.handlers.length;e++)this.handlers[e].type===o&&this.handlers[e].handler(n)},r.prototype.send=function(t,e,n){t.postMessage(JSON.stringify({type:this._namespaceEvent(e),data:n}),"*")},r.prototype.register=function(t,e){this.handlers.push({type:this._namespaceEvent(t),handler:e})},r.prototype.unregister=function(t,e){for(var n=this.handlers.length-1;n>=0;n--)if(this.handlers[n].type===t&&this.handlers[n].handler===e)return this.handlers.splice(n,1)},r.prototype._namespaceEvent=function(t){return this.channel?["braintree",this.channel,t].join(":"):t},r.Message=function(t,e,n){this.bus=t,this.source=e,this.content=n},r.Message.prototype.reply=function(t,e){this.bus.send(this.source,t,e)},e.exports=r},{"braintree-utilities":206}],193:[function(t,e,n){var i=t("braintree-utilities");function r(t,e){this.bus=t,this.target=e,this.handlers=[],this.bus.register("publish",i.bind(this._handleMessage,this))}r.prototype._handleMessage=function(t){var e,n=t.content,i=this.handlers[n.channel];if(void 0!==i)for(e=0;e<i.length;e++)i[e](n.data)},r.prototype.publish=function(t,e){this.bus.send(this.target,"publish",{channel:t,data:e})},r.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},r.prototype.unsubscribe=function(t,e){var n,i=this.handlers[t];if(void 0!==i)for(n=0;n<i.length;n++)i[n]===e&&i.splice(n,1)},e.exports=r},{"braintree-utilities":206}],194:[function(t,e,n){function i(t){this.bus=t,this.frames=[],this.handlers=[]}i.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},i.prototype.registerFrame=function(t){this.frames.push(t)},i.prototype.unregisterFrame=function(t){for(var e=0;e<this.frames.length;e++)this.frames[e]===t&&this.frames.splice(e,1)},i.prototype.publish=function(t,e){var n,i=this.handlers[t];if(void 0!==i)for(n=0;n<i.length;n++)i[n](e);for(n=0;n<this.frames.length;n++)this.bus.send(this.frames[n],"publish",{channel:t,data:e})},i.prototype.unsubscribe=function(t,e){var n,i=this.handlers[t];if(void 0!==i)for(n=0;n<i.length;n++)i[n]===e&&i.splice(n,1)},e.exports=i},{}],195:[function(t,e,n){var i=t("braintree-utilities");function r(t,e){this.bus=t,this.target=e||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",i.bind(this._handleResponse,this))}r.prototype._handleResponse=function(t){var e=t.content,n=this.callbacks[e.id];"function"==typeof n&&(n.apply(null,e.response),delete this.callbacks[e.id])},r.prototype.invoke=function(t,e,n){var i=this.counter++;this.callbacks[i]=n,this.bus.send(this.target,"rpc_request",{id:i,method:t,args:e})},e.exports=r},{"braintree-utilities":206}],196:[function(t,e,n){var i=t("braintree-utilities");function r(t){this.bus=t,this.methods={},this.bus.register("rpc_request",i.bind(this._handleRequest,this))}r.prototype._handleRequest=function(t){var e,n=t.content,i=n.args||[],r=this.methods[n.method];"function"==typeof r&&(e=function(){t.reply("rpc_response",{id:n.id,response:Array.prototype.slice.call(arguments)})},i.push(e),r.apply(null,i))},r.prototype.reset=function(){this.methods={}},r.prototype.define=function(t,e){this.methods[t]=e},e.exports=r},{"braintree-utilities":206}],197:[function(t,e,n){var i=t("./lib/message-bus"),r=t("./lib/pubsub-client"),o=t("./lib/pubsub-server"),s=t("./lib/rpc-client"),a=t("./lib/rpc-server");e.exports={MessageBus:i,PubsubClient:r,PubsubServer:o,RPCClient:s,RPCServer:a}},{"./lib/message-bus":192,"./lib/pubsub-client":193,"./lib/pubsub-server":194,"./lib/rpc-client":195,"./lib/rpc-server":196}],198:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],199:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],200:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],201:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],202:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],203:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],204:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":198,dup:41}],205:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],206:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":198,"./lib/base64":199,"./lib/dom":200,"./lib/events":201,"./lib/fn":202,"./lib/string":203,"./lib/url":204,"./lib/uuid":205,dup:43}],207:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],208:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],209:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],210:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],211:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],212:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],213:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":207,dup:41}],214:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],215:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":207,"./lib/base64":208,"./lib/dom":209,"./lib/events":210,"./lib/fn":211,"./lib/string":212,"./lib/url":213,"./lib/uuid":214,dup:43}],216:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":217,"braintree-utilities/lib/fn":218,dup:80}],217:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],218:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],219:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./lib/default-attributes":220,dup:83,"lodash.assign":221,"lodash.isstring":232,setattributes:233}],220:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],221:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{dup:85,"lodash._baseassign":222,"lodash._createassigner":224,"lodash.keys":228}],222:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":223,"lodash.keys":228}],223:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],224:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88,"lodash._bindcallback":225,"lodash._isiterateecall":226,"lodash.restparam":227}],225:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],226:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],227:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{dup:91}],228:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":229,"lodash.isarguments":230,"lodash.isarray":231}],229:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],230:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],231:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],232:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],233:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],234:[function(t,e,n){var i=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];function r(t){this.apiClient=t}r.prototype.attach=function(t){var e=this,n=0,r=i.length;function o(n){t.define(n,function(){e.apiClient[n].apply(e.apiClient,arguments)})}for(;n<r;n++)o(i[n])},e.exports=r},{}],235:[function(t,e,n){(function(n){var i,r,o=t("braintree-api"),s=t("braintree-bus"),a=t("destructor"),c=t("braintree-rpc"),u=t("braintree-utilities"),l=u.normalizeElement,p=u.bind,d=u.isBrowserHttps,h=t("./api-proxy-server"),f=t("./merchant-form-manager"),y=t("./frame-container"),m=t("../shared/constants"),b="1.9.1",v=t("braintree-paypal/src/external/views/app-view");function g(t,e){var n=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return n[e]}function _(){var t=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return t}function E(t){var e,u,d;this.channel=t.channel,this.destructor=new a,this.merchantConfiguration=t.merchantConfiguration,this.encodedClientToken=t.gatewayConfiguration,this.analyticsConfiguration=t.analyticsConfiguration,this.paypalOptions=t.merchantConfiguration.paypal||{},this.container=null,this.merchantFormManager=null,this.root=t.root,this.configurationRequests=[],this.braintreeApiClient=o.configure({clientToken:t.gatewayConfiguration,analyticsConfiguration:this.analyticsConfiguration,integration:"dropin",enableCORS:this.merchantConfiguration.enableCORS}),this.paymentMethodNonceReceivedCallback=t.merchantConfiguration.paymentMethodNonceReceived,this.clientToken=o.parseClientToken(t.gatewayConfiguration),this.braintreeBus=new s({merchantUrl:n.location.href,channel:t.channel}),this.bus=new c.MessageBus(this.root,this.channel),this.rpcServer=new c.RPCServer(this.bus),this.apiProxyServer=new h(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),e=t.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+b+"/inline-frame.html",u=t.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+b+"/modal-frame.html",i=document.documentElement,r=document.body,this.frames={inline:this._createFrame(e,m.INLINE_FRAME_NAME),modal:this._createFrame(u,m.MODAL_FRAME_NAME)},this.container=l(t.merchantConfiguration.container,"Unable to find valid container."),d=l(t.merchantConfiguration.form||this._findClosest(this.container,"form")),this.merchantFormManager=new f({form:d,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.destructor.registerFunctionForTeardown(p(function(){this.merchantFormManager.teardown()},this)),t.gatewayConfiguration.paypalEnabled&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}E.prototype.initialize=function(){var t,e=this;this._initializeModal(),this.braintreeBus.emit(s.events.ASYNC_DEPENDENCY_INITIALIZING),this.container.appendChild(this.frames.inline.element),r.appendChild(this.frames.modal.element),this.destructor.registerFunctionForTeardown(function(t){e._hideModal(function(){e.container.removeChild(e.frames.inline.element),r.removeChild(e.frames.modal.element),t()})}),this.rpcServer.define("receiveSharedCustomerIdentifier",function(n){for(e.braintreeApiClient.attrs.sharedCustomerIdentifier=n,e.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store",t=0;t<e.configurationRequests.length;t++)e.configurationRequests[t](e.encodedClientToken);e.configurationRequests=[]}),this.braintreeBus.on(s.events.PAYMENT_METHOD_GENERATED,p(this._handleAltPayData,this)),this.rpcServer.define("getConfiguration",function(t){t({enableCORS:e.merchantConfiguration.enableCORS,clientToken:e.encodedClientToken,paypalOptions:e.paypalOptions,analyticsConfiguration:e.analyticsConfiguration,merchantHttps:d()})}),this.rpcServer.define("selectPaymentMethod",function(t){e.frames.modal.rpcClient.invoke("selectPaymentMethod",[t]),e._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(t){e.merchantFormManager.setNoncePayload(t),e.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[t])}),this.rpcServer.define("sendUsedPaymentMethod",function(t){e.frames.inline.rpcClient.invoke("selectPaymentMethod",[t])}),this.rpcServer.define("sendUnlockedNonce",function(t){e.merchantFormManager.setNoncePayload(t)}),this.rpcServer.define("clearNonce",function(){e.merchantFormManager.clearNoncePayload()}),this.rpcServer.define("closeDropInModal",function(){e._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(t){e.frames.inline.element.style.height=t+"px"}),this.bus.register("ready",function(t){t.source===e.frames.inline.element.contentWindow?e.frames.inline.rpcClient=new c.RPCClient(e.bus,t.source):t.source===e.frames.modal.element.contentWindow&&(e.frames.modal.rpcClient=new c.RPCClient(e.bus,t.source))})},E.prototype._createFrame=function(t,e){return new y(t,e,this.braintreeBus)},E.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=_()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},E.prototype._lockMerchantWindowSize=function(){setTimeout(function(){i.style.overflow="hidden",r.style.overflow="hidden",r.style.height="100%",_()&&(i.style.position="relative",i.style.height=window.innerHeight+"px")},160)},E.prototype._unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;t&&(r.style.height=t.body.height,r.style.overflow=t.body.overflow,i.style.overflow=t.html.overflow,_()&&(i.style.height=t.html.height,i.style.position=t.html.position),delete this.merchantPageDefaultStyles)},E.prototype._showModal=function(){var t=this,e=this.frames.modal.element;this.merchantPageDefaultStyles={html:{height:i.style.height||"",overflow:g(i,"overflow"),position:g(i,"position")},body:{height:r.style.height||"",overflow:g(r,"overflow")}},e.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){t._lockMerchantWindowSize(),e.contentWindow.focus()},200)})},E.prototype._hideModal=function(t){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none",t&&t()},E.prototype._configurePayPal=function(){this.paypalModalView=new v({channel:this.channel,insertFrameFunction:this.paypalOptions.insertFrame,paypalAssetsUrl:this.clientToken.paypal.assetsUrl,isHermes:!!this.paypalOptions.singleUse&&!!this.paypalOptions.amount&&!!this.paypalOptions.currency})},E.prototype._handleAltPayData=function(t){this.merchantFormManager.setNoncePayload(t),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[t]),this.frames.modal.rpcClient.invoke("modalViewClose")},E.prototype._findClosest=function(t,e){e=e.toUpperCase();do{if(t.nodeName===e)return t}while(t=t.parentNode);throw"Unable to find a valid "+e},E.prototype.teardown=function(t){this.paypalModalView&&this.paypalModalView.teardown(),this.braintreeBus.emit(m.MODAL_FRAME_TEARDOWN_EVENT,p(function(){this.braintreeBus.emit(m.INLINE_FRAME_TEARDOWN_EVENT,p(function(){this.destructor.teardown(p(function(e){if(e)return t(e);this.braintreeBus.teardown(),t()},this))},this))},this))},e.exports=E}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../shared/constants":239,"./api-proxy-server":234,"./frame-container":237,"./merchant-form-manager":238,"braintree-api":117,"braintree-bus":148,"braintree-paypal/src/external/views/app-view":183,"braintree-rpc":197,"braintree-utilities":215,destructor:216}],236:[function(t,e,n){var i=t("./client");e.exports={create:function(t){var e=new i(t);return e.initialize(),e},VERSION:"1.9.1"}},{"./client":235}],237:[function(t,e,n){var i=t("braintree-bus"),r=t("../shared/constants"),o=t("iframer"),s={transition:"transitionend","-o-transition":"otransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};function a(t,e){var n=function(){var t,e=document.createElement("fakeelement");for(t in s)if(void 0!==e.style[t])return s[t];return null}();n?t.addEventListener(n,function r(o){o.target===t&&"height"===o.propertyName&&(e.emit(i.events.ASYNC_DEPENDENCY_READY),t.removeEventListener(n,r))}):setTimeout(function(){e.emit(i.events.ASYNC_DEPENDENCY_READY)},500)}e.exports=function(t,e,n){var i="height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000)",s=o({name:e,width:"100%",height:"68",style:{transition:i,WebkitTransition:i,MozTransition:i,msTransition:i,OTransition:i,border:"0",zIndex:"9999"}});this.element=s,setTimeout(function(){s.src=t+"#"+n.channel},0),e===r.INLINE_FRAME_NAME&&a(s,n)}},{"../shared/constants":239,"braintree-bus":148,iframer:219}],238:[function(t,e,n){var i=t("braintree-utilities"),r=t("form-napper");function o(t){this.formNapper=new r(t.form),this.frames=t.frames,this.onSubmit=t.onSubmit,this.apiClient=t.apiClient}o.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},o.prototype.setNoncePayload=function(t){this.noncePayload=t},o.prototype.clearNoncePayload=function(){this.noncePayload=null},o.prototype._isSubmitBased=function(){return!this.onSubmit},o.prototype._isCallbackBased=function(){return!!this.onSubmit},o.prototype._setElements=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce","")},o.prototype._setEvents=function(){this.formNapper.hijack(i.bind(this._handleFormSubmit,this))},o.prototype._handleFormSubmit=function(t){this.noncePayload&&this.noncePayload.nonce?this._handleNonceReply(t):this.frames.inline.rpcClient.invoke("requestNonce",[],i.bind(function(e){this.setNoncePayload(e),this._handleNonceReply(t)},this))},o.prototype._handleNonceReply=function(t){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",i.bind(function(){var e=this.noncePayload;e.originalEvent=t,this.onSubmit(e),setTimeout(i.bind(function(){delete e.originalEvent,this.frames.inline.rpcClient.invoke("clearLoadingState"),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[e])},this),200)},this)):this._triggerFormSubmission()},o.prototype._triggerFormSubmission=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce",this.noncePayload.nonce),this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",i.bind(function(){this.formNapper.submit()},this))},o.prototype.teardown=function(){this.nonceInput&&this.formNapper.htmlForm.removeChild(this.nonceInput),this.formNapper.detach()},e.exports=o},{"braintree-utilities":215,"form-napper":376}],239:[function(t,e,n){e.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"],cssClassMap:{"American Express":"american-express","Diners Club":"diners-club",DinersClub:"diners-club",Discover:"discover",JCB:"jcb",Maestro:"maestro",MasterCard:"master-card",Solo:"solo",Switch:"switch",UKMaestro:"maestro",UnionPay:"unionpay",Visa:"visa"},INLINE_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_INLINE_FRAME",MODAL_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_MODAL_FRAME"}},{}],240:[function(t,e,n){(function(t){var n=t.Node?t.Node.ELEMENT_NODE:1;function i(t,e){var n,s;e=e||{};var a=t.children;for(s=0;s<a.length;s++)if(o(n=a[s])){var c=n.getAttribute("data-braintree-name");"postal_code"===c?e.billingAddress={postalCode:n.value}:e[c]=n.value,r(n)}else n.children&&n.children.length>0&&i(n,e);return e}function r(t){try{t.attributes.removeNamedItem("name")}catch(t){}}function o(t){return t.nodeType===n&&t.attributes["data-braintree-name"]}e.exports={extractValues:i,scrubAllAttributes:function(t){i(t)},scrubAttributes:r,isBraintreeNode:o}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],241:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("./fields"),o=t("destructor"),s=t("braintree-bus"),a=t("./models/payment-method-model"),c=t("./get-nonce-input"),u={message:"Unable to process payments at this time",type:"IMMEDIATE"};function l(t,e){var r=e.merchantConfiguration,u="object"==typeof r.paymentMethodNonceInputField;this.destructor=new o,this.apiClient=t,this.isCreditCardForm=!1!==r.useCreditCard,this.htmlForm=document.getElementById(r.id),this.paymentMethodNonceInput=c(r.paymentMethodNonceInputField),this.htmlForm.appendChild(this.paymentMethodNonceInput),this.destructor.registerFunctionForTeardown(i.bind(function(){u?this.paymentMethodNonceInput.value="":this.htmlForm.removeChild(this.paymentMethodNonceInput)},this)),this.model=new a,this.bus=new s({merchantUrl:n.location.href,channel:e.channel}),this.setEvents(),this.destructor.registerFunctionForTeardown(i.bind(function(){this.bus.teardown()},this))}l.prototype.setEvents=function(){this.onSubmitHandler=i.bind(this.handleSubmit,this),this.onExternalNonceReceived=i.bind(this.onExternalNonceReceived,this),this.clearExternalNonce=i.bind(this.clearExternalNonce,this),i.addEventListener(this.htmlForm,"submit",this.onSubmitHandler),this.destructor.registerFunctionForTeardown(i.bind(function(){i.removeEventListener(this.htmlForm,"submit",this.onSubmitHandler)},this)),this.bus.on(s.events.PAYMENT_METHOD_GENERATED,this.onExternalNonceReceived),this.bus.on(s.events.PAYMENT_METHOD_CANCELLED,this.clearExternalNonce)},l.prototype.handleSubmit=function(t){var e;if(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isCreditCardForm){if((e=this.model.get("type"))&&"CreditCard"!==e)return r.scrubAllAttributes(this.htmlForm),void this.onNonceReceived(null,this.model.attributes);this.apiClient.tokenizeCard(r.extractValues(this.htmlForm),i.bind(function(t,e,n){t?this.onNonceReceived(u,null):(this.model.set({nonce:e,type:n.type,details:n.details}),this.onNonceReceived(null,this.model.attributes))},this))}else this.onNonceReceived(null,this.model.attributes)},l.prototype.writeNonceToDOM=function(){this.paymentMethodNonceInput.value=this.model.get("nonce")},l.prototype.onExternalNonceReceived=function(t){this.model.set(t),this.writeNonceToDOM()},l.prototype.clearExternalNonce=function(){this.model.reset()},l.prototype.onNonceReceived=function(t){var e=this.htmlForm;t?this.bus.emit(s.events.ERROR,u):(i.removeEventListener(e,"submit",this.onSubmitHandler),this.writeNonceToDOM(),e.submit&&("function"==typeof e.submit||e.submit.call)?e.submit():setTimeout(function(){e.querySelector('[type="submit"]').click()},1))},l.prototype.teardown=function(){this.destructor.teardown()},e.exports=l}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fields":240,"./get-nonce-input":242,"./models/payment-method-model":243,"braintree-bus":246,"braintree-utilities":258,destructor:259}],242:[function(t,e,n){e.exports=function(t){var e;if("object"==typeof t)return t;e="payment_method_nonce","string"==typeof t&&(e=t);var n=document.createElement("input");return n.name=e,n.type="hidden",n}},{}],243:[function(t,e,n){function i(){this.reset()}i.prototype.get=function(t){return this.attributes[t]},i.prototype.set=function(t){this.attributes=t||{}},i.prototype.reset=function(){this.attributes={}},e.exports=i},{}],244:[function(t,e,n){e.exports=function(t){for(var e=t.getElementsByTagName("*"),n={},i=0;i<e.length;i++){var r=e[i].getAttribute("data-braintree-name");n[r]=!0}if(!n.number)throw new Error('Unable to find an input with data-braintree-name="number" in your form. Please add one.');if(n.expiration_date){if(n.expiration_month||n.expiration_year)throw new Error('You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".')}else{if(!n.expiration_month&&!n.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.');if(!n.expiration_month)throw new Error('Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.');if(!n.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.')}}},{}],245:[function(t,e,n){var i=t("./lib/form"),r=t("./lib/validate-annotations");e.exports={setup:function(t,e){var n=e.merchantConfiguration||{},o=document.getElementById(n.id),s=!1!==n.useCreditCard;if(!o)throw new Error('Unable to find form with id: "'+n.id+'"');return s&&r(o),new i(t,e)}}},{"./lib/form":241,"./lib/validate-annotations":244}],246:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":247,"./lib/events":248,dup:52,framebus:249}],247:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],248:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],249:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],250:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],251:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],252:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],253:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],254:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],255:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],256:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":250,dup:41}],257:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],258:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":250,"./lib/base64":251,"./lib/dom":252,"./lib/events":253,"./lib/fn":254,"./lib/string":255,"./lib/url":256,"./lib/uuid":257,dup:43}],259:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":260,"braintree-utilities/lib/fn":261,dup:80}],260:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],261:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],262:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{"./coinbase-account":263,"./constants":264,"./credit-card":265,"./europe-bank-account":266,"./normalize-api-fields":268,"./parse-client-token":269,"./paypal-account":270,"./request/choose-driver":273,"./sepa-mandate":278,"./should-enable-cors":279,"./util":280,"braintree-3ds":289,"braintree-utilities":303,dup:2}],263:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],264:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],265:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],266:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],267:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{"./constants":264,"./parse-client-token":269,"./request/choose-driver":273,"./should-enable-cors":279,"./util":280,dup:7}],268:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],269:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"./polyfill":271,"braintree-utilities":303,dup:9}],270:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],271:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],272:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{"../constants":264,"../util":280,"./parse-body":276,"./prep-body":277,dup:12}],273:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"../util":280,"./ajax-driver":272,"./jsonp-driver":274,dup:13}],274:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"../constants":264,"./jsonp":275,dup:14}],275:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{"../util":280,dup:15}],276:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],277:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17,"lodash.isstring":311}],278:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],279:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],280:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20,"lodash.isempty":304,"lodash.isobject":310}],281:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{"./lib/client":262,"./lib/get-configuration":267,"./lib/parse-client-token":269,"./lib/util":280,dup:21}],282:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],283:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],284:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],285:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],286:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{"./lib/dom":282,"./lib/events":283,"./lib/fn":284,"./lib/url":285,dup:26}],287:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{"../shared/receiver":294,"braintree-utilities":286,dup:27}],288:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./authorization_service":287,"./loader":290,"braintree-utilities":286,dup:28}],289:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{"./client":288,dup:29}],290:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./loader_display":291,"./loader_message":292,"./loader_spinner":293,dup:30}],291:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],292:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],293:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],294:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{"braintree-utilities":286,dup:34}],295:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],296:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],297:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],298:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],299:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],300:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],301:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":295,dup:41}],302:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],303:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":295,"./lib/base64":296,"./lib/dom":297,"./lib/events":298,"./lib/fn":299,"./lib/string":300,"./lib/url":301,"./lib/uuid":302,dup:43}],304:[function(t,e,n){arguments[4][44][0].apply(n,arguments)},{dup:44,"lodash.isarguments":305,"lodash.isarray":306,"lodash.isfunction":307,"lodash.isstring":311,"lodash.keys":308}],305:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],306:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],307:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{dup:47}],308:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":309,"lodash.isarguments":305,"lodash.isarray":306}],309:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],310:[function(t,e,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],311:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],312:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":313,"./lib/events":314,dup:52,framebus:315}],313:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],314:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],315:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],316:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],317:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],318:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],319:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],320:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],321:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],322:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":316,dup:41}],323:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],324:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":316,"./lib/base64":317,"./lib/dom":318,"./lib/events":319,"./lib/fn":320,"./lib/string":321,"./lib/url":322,"./lib/uuid":323,dup:43}],325:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":326,"braintree-utilities/lib/fn":327,dup:80}],326:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],327:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],328:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./lib/default-attributes":329,dup:83,"lodash.assign":330,"lodash.isstring":341,setattributes:342}],329:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],330:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{dup:85,"lodash._baseassign":331,"lodash._createassigner":333,"lodash.keys":337}],331:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":332,"lodash.keys":337}],332:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],333:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88,"lodash._bindcallback":334,"lodash._isiterateecall":335,"lodash.restparam":336}],334:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],335:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],336:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{dup:91}],337:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":338,"lodash.isarguments":339,"lodash.isarray":340}],338:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],339:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],340:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],341:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],342:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],343:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("destructor"),o=t("braintree-bus"),s=t("./views/app-view"),a=t("./views/logged-in-view"),c=t("./views/logged-out-view"),u=t("./views/overlay-view"),l=t("./views/merchant-page-view"),p=t("./views/payment-method-nonce-input-field-view"),d=t("./views/bridge-iframe-view"),h=t("../shared/util/browser"),f=t("../shared/constants"),y=t("../shared/util/util");function m(t,e,s){e=e||{},this._clientToken=t,this._clientOptions=e,this._clientToken.correlationId=y.generateUid(),this.destructor=new r,this.channel=s,this.bus=new o({merchantUrl:n.location.href,channel:this.channel}),this.container=i.normalizeElement(e.container),this.paymentMethodNonceInputField=e.paymentMethodNonceInputField,this.insertFrameFunction=e.insertFrame,this.onSuccess=e.onSuccess,this.onCancelled=e.onCancelled,this.loggedInView=null,this.loggedOutView=null,this.appView=null,this.merchantPageView=null,this.paymentMethodNonceInputFieldView=null,this.overlayView=null,this.bridgeIframeView=null,this.insertUI=!0!==e.headless}m.prototype.initialize=function(){var t=i.bind(this._handleClickLogin,this);this._createViews(),this.bus.on(f.events.GET_CLIENT_TOKEN,i.bind(this._handleGetClientToken,this)),this.bus.on(f.events.GET_CLIENT_OPTIONS,i.bind(this._handleGetClientOptions,this)),this.insertUI&&this.bus.on(o.events.PAYMENT_METHOD_GENERATED,i.bind(this._handlePaymentMethodGenerated,this)),i.addEventListener(document.body,"click",t),this.destructor.registerFunctionForTeardown(function(){i.removeEventListener(document.body,"click",t)})},m.prototype._createViews=function(){var t,e=[];h.isBridgeIframeRequired()&&(this.bridgeIframeView=new d({container:this.container,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,channel:this.channel}),e.push(this.bridgeIframeView)),this.appView=new s({insertFrameFunction:this.insertFrameFunction,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,isHermes:y.isHermesConfiguration(this._clientToken,this._clientOptions),headless:this._clientOptions.headless,channel:this.channel}),e.push(this.appView),this.insertUI&&(this.paymentMethodNonceInputFieldView=new p({container:this.container,el:this.paymentMethodNonceInputField,channel:this.channel}),e.push(this.paymentMethodNonceInputFieldView),this.merchantPageView=new l({channel:this.channel}),e.push(this.merchantPageView),this.loggedInView=new a({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,channel:this.channel}),e.push(this.loggedInView),this.loggedOutView=new c({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,enablePayPalButton:y.isOneTimeHermesConfiguration(this._clientOptions),locale:this._clientOptions.locale,channel:this.channel}),e.push(this.loggedOutView),h.isPopupSupported()&&h.isOverlaySupported()&&(this.overlayView=new u({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,onFocus:i.bind(function(){this.bus.emit(f.events.FOCUS_APP)},this),onClose:i.bind(function(){this.bus.emit(f.events.CLOSE_APP)},this),channel:this.channel}),e.push(this.overlayView))),this.destructor.registerFunctionForTeardown(function(){for(t=0;t<e.length;t++)e[t].teardown()})},m.prototype._handleClickLogin=function(t){for(var e=t.target||t.srcElement;;){if(null==e)return;if(e===t.currentTarget)return;if(this._isButton(e))break;e=e.parentNode}y.preventDefault(t),this.launch()},m.prototype.launch=function(){this.appView.open()},m.prototype._isButton=function(t){var e="braintree-paypal-button"===t.id,n=y.isOneTimeHermesConfiguration(this._clientOptions)&&t.className.match(/paypal-button(?!-widget)/);return e||n},m.prototype._handlePaymentMethodGenerated=function(t){t.type===f.NONCE_TYPE&&i.isFunction(this.onSuccess)&&this.onSuccess(t)},m.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:null,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientOptions.displayName||this._clientToken.paypal.displayName,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,billingAgreementsEnabled:this._clientToken.paypal.billingAgreementsEnabled,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}},m.prototype._handleGetClientToken=function(t){t(this._clientTokenData())},m.prototype._clientOptionsData=function(){return{locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1,enableBillingAddress:this._clientOptions.enableBillingAddress||!1,enableHermes:y.isHermesConfiguration(this._clientToken,this._clientOptions),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null,enableCORS:this._clientOptions.enableCORS}},m.prototype._handleGetClientOptions=function(t){t(this._clientOptionsData())},m.prototype.teardown=function(){this.destructor.teardown(i.bind(function(){this.bus.teardown()},this))},e.exports=m}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../shared/constants":354,"../shared/util/browser":361,"../shared/util/util":363,"./views/app-view":345,"./views/bridge-iframe-view":346,"./views/logged-in-view":347,"./views/logged-out-view":348,"./views/merchant-page-view":349,"./views/overlay-view":351,"./views/payment-method-nonce-input-field-view":352,"braintree-bus":312,"braintree-utilities":324,destructor:325}],344:[function(t,e,n){var i=t("./client"),r=t("../shared/util/browser"),o=t("../shared/constants"),s=t("../shared/get-locale"),a=t("../shared/util/util").isHermesConfiguration,c=t("../shared/util/util").isOneTimeHermesConfiguration,u=t("braintree-utilities"),l=t("braintree-api");function p(t,e){var n,i=e.length,r=!1;for(n=0;n<i;n++)t.toLowerCase()===e[n].toLowerCase()&&(r=!0);return r}e.exports={create:function(t,e,n){var d,h,f,y;if("function"!=typeof(h=(e=e||{}).onUnsupported)&&(h=function(t){try{console.log(t)}catch(t){}}),!t)return h(new Error('Parameter "clientToken" cannot be null')),null;if(!(t=l.parseClientToken(t)).paypalEnabled)return h(new Error("PayPal is not enabled")),null;if(!r.detectedPostMessage())return h(new Error("unsupported browser detected")),null;if(!e.container)return h(new Error("Please supply a container for the PayPal button to be appended to")),null;if(!function(t,e){return!!t.paypal.allowHttp||!!r.isPopupSupported()||("merchantHttps"in e?e.merchantHttps:u.isBrowserHttps())}(t,e))return h(new Error("unsupported protocol detected")),null;if(function(t,e){return t.paypal.unvettedMerchant&&(!a(t,e)||!t.paypal.payeeEmail)}(t,e))return h(new Error("Unvetted merchant client token does not include a payee email")),null;if(a(t,e)&&(f=e.locale,!p(s(f).split("_")[1],o.HERMES_SUPPORTED_COUNTRIES)))return h(new Error("This PayPal integration does not support this country")),null;if(c(e)){if(!p(e.currency,o.HERMES_SUPPORTED_CURRENCIES))return h(new Error("This PayPal integration does not support this currency")),null;if(y=e.amount,"number"!=typeof(y=parseFloat(y))||isNaN(y)||!(y>=0))return h(new Error("Amount must be a number")),null}return(d=new i(t,e,n)).initialize(),d},VERSION:"1.6.1"}},{"../shared/constants":354,"../shared/get-locale":356,"../shared/util/browser":361,"../shared/util/util":363,"./client":343,"braintree-api":281,"braintree-utilities":324}],345:[function(t,e,n){arguments[4][183][0].apply(n,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"./modal-view":350,"./popup-view":353,"braintree-bus":312,"braintree-utilities":324,destructor:325,dup:183}],346:[function(t,e,n){var i=t("../../shared/constants"),r=t("iframer");function o(t){this.options=t||{},this.el=r({src:this._buildUrl(),name:i.BRIDGE_FRAME_NAME,height:1,width:1,style:{position:"static",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",background:"transparent"}}),this.options.container.appendChild(this.el)}o.prototype._buildUrl=function(){var t=this.options.paypalAssetsUrl;return t+="/pwpp/",t+=i.VERSION,t+="/html/bridge-frame.html",t+="#"+this.options.channel},o.prototype.teardown=function(){this.options.container.removeChild(this.el)},e.exports=o},{"../../shared/constants":354,iframer:328}],347:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("destructor"),o=t("braintree-bus"),s=t("../../shared/util/util"),a=t("../../shared/util/dom"),c=t("../../shared/constants");function u(t){this.options=t||{},this.wrapper=this.options.container||document.body,this.destructor=new r,this.bus=new o({merchantUrl:n.location.href,channel:t.channel}),this._initialize()}u.prototype._initialize=function(){var t=i.bind(this._handleClickLogout,this);this._createViewContainer(),this._createPayPalName(),this._createEmailNode(),this._createLogoutNode(),i.addEventListener(this.logoutNode,"click",t),this.destructor.registerFunctionForTeardown(i.bind(function(){i.removeEventListener(this.logoutNode,"click",t)},this)),this.bus.on(o.events.PAYMENT_METHOD_GENERATED,i.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(o.events.PAYMENT_METHOD_CANCELLED,i.bind(this._handlePaymentMethodCancelled,this))},u.prototype._createViewContainer=function(){var t=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+c.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+c.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedin",this.container.classList.add("braintree-paypal-loggedin"),this.container.style.cssText=t,this.wrapper.appendChild(this.container)},u.prototype._createPayPalName=function(){var t=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return this.payPalName=document.createElement("span"),this.payPalName.id="bt-pp-name",this.payPalName.classList.add("bt-pp-name"),this.payPalName.innerHTML="PayPal",this.payPalName.style.cssText=t,this.container.appendChild(this.payPalName)},u.prototype._createEmailNode=function(){var t=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.emailNode=document.createElement("span"),this.emailNode.id="bt-pp-email",this.emailNode.classList.add("bt-pp-email"),this.emailNode.style.cssText=t,this.container.appendChild(this.emailNode)},u.prototype._createLogoutNode=function(){var t=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.logoutNode=document.createElement("button"),this.logoutNode.id="bt-pp-cancel",this.logoutNode.classList.add("bt-pp-cancel"),this.logoutNode.innerHTML="Cancel",this.logoutNode.style.cssText=t,this.container.appendChild(this.logoutNode)},u.prototype.show=function(t){this.container.style.display="block",a.setTextContent(this.emailNode,t)},u.prototype.hide=function(){this.container.style.display="none"},u.prototype._handleClickLogout=function(t){s.preventDefault(t),this.bus.emit(o.events.PAYMENT_METHOD_CANCELLED,{source:c.PAYPAL_INTEGRATION_NAME})},u.prototype._handlePaymentMethodGenerated=function(t){var e;t.type===c.NONCE_TYPE&&(e=t&&t.details&&t.details.email?t.details.email:"",this.show(e))},u.prototype._handlePaymentMethodCancelled=function(t){t.source===c.PAYPAL_INTEGRATION_NAME&&this.hide()},u.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.destructor.teardown(),this.bus.teardown()},e.exports=u}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":354,"../../shared/util/dom":362,"../../shared/util/util":363,"braintree-bus":312,"braintree-utilities":324,destructor:325}],348:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("braintree-bus"),o=t("../../shared/constants"),s=t("../../shared/get-locale");function a(t){this.options=t,this.wrapper=this.options.container||document.body,this.bus=new r({merchantUrl:n.location.href,channel:t.channel}),this._initialize()}a.prototype._initialize=function(){this.createViewContainer(),this.options.enablePayPalButton?this.createCheckoutWithPayPalButton():this.createPayWithPayPalButton(),this.bus.on(r.events.PAYMENT_METHOD_GENERATED,i.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(r.events.PAYMENT_METHOD_CANCELLED,i.bind(this._handlePaymentMethodCancelled,this))},a.prototype.createViewContainer=function(){this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedout",this.wrapper.appendChild(this.container),this.loginNode=this.container},a.prototype.createPayWithPayPalButton=function(){var t=document.createElement("a"),e=new Image,n=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";"),i=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");t.id="braintree-paypal-button",t.href="#",t.style.cssText=i,e.src=this.options.paypalAssetsUrl+"/pwpp/"+o.VERSION+"/images/pay-with-paypal.png",e.setAttribute("alt","Pay with PayPal"),e.style.cssText=n,t.appendChild(e),this.container.appendChild(t)},a.prototype.createCheckoutWithPayPalButton=function(){var t,e=document.createElement("script"),n={"data-merchant":"merchant-id","data-button":"checkout","data-type":"button","data-color":"blue","data-lc":s(this.options.locale)};for(t in e.src="//www.paypalobjects.com/api/button.js",e.async=!0,n)n.hasOwnProperty(t)&&e.setAttribute(t,n[t]);this.container.appendChild(e)},a.prototype.show=function(){this.container.style.display="block"},a.prototype.hide=function(){this.container.style.display="none"},a.prototype._handlePaymentMethodGenerated=function(t){t.type===o.NONCE_TYPE&&this.hide()},a.prototype._handlePaymentMethodCancelled=function(t){t.source===o.PAYPAL_INTEGRATION_NAME&&this.show()},a.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.bus.teardown()},e.exports=a}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":354,"../../shared/get-locale":356,"braintree-bus":312,"braintree-utilities":324}],349:[function(t,e,n){(function(n){var i=t("braintree-bus"),r=t("braintree-utilities"),o=t("../../shared/constants");function s(t){this.options=t,this.bus=new i({merchantUrl:n.location.href,channel:t.channel}),this.bus.on(o.events.UI_MODAL_DID_OPEN,r.bind(this.lockWindowSize,this)),this.bus.on(o.events.UI_MODAL_DID_CLOSE,r.bind(this.unlockWindowSize,this))}function a(t){var e=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return{overflow:e.overflow||"",height:t.style.height||""}}s.prototype.lockWindowSize=function(){this.defaultStyles={html:{node:document.documentElement,styles:a(document.documentElement)},body:{node:document.body,styles:a(document.body)}},document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},s.prototype.unlockWindowSize=function(){this.defaultStyles&&(document.documentElement.style.height=this.defaultStyles.html.styles.height,document.documentElement.style.overflow=this.defaultStyles.html.styles.overflow,document.body.style.height=this.defaultStyles.body.styles.height,document.body.style.overflow=this.defaultStyles.body.styles.overflow,delete this.defaultStyles)},s.prototype._handleUIModalDidOpen=function(t){t.source===o.PAYPAL_INTEGRATION_NAME&&this.lockWindowSize()},s.prototype._handleUIModalDidClose=function(t){t.source===o.PAYPAL_INTEGRATION_NAME&&this.unlockWindowSize()},s.prototype.teardown=function(){this.unlockWindowSize(),this.bus.teardown()},e.exports=s}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324}],350:[function(t,e,n){arguments[4][184][0].apply(n,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"braintree-bus":312,"braintree-utilities":324,dup:184,iframer:328}],351:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("destructor"),o=t("braintree-bus"),s=t("../../shared/constants");function a(t){this.options=t,this.spriteSrc=this.options.paypalAssetsUrl+"/pwpp/"+s.VERSION+"/images/pp_overlay_sprite.png",this.bus=new o({merchantUrl:n.location.href,channel:t.channel}),this.destructor=new r,this._create(),this._setupEvents(),this.bus.on(o.events.UI_POPUP_DID_OPEN,i.bind(this._handleUIPopupDidOpen,this)),this.bus.on(o.events.UI_POPUP_DID_CLOSE,i.bind(this._handleUIPopupDidClose,this))}a.prototype.open=function(){document.body.contains(this.el)||document.body.appendChild(this.el)},a.prototype.close=function(){document.body.contains(this.el)&&document.body.removeChild(this.el)},a.prototype._handleUIPopupDidClose=function(t){t.source===s.PAYPAL_INTEGRATION_NAME&&this.close()},a.prototype._handleUIPopupDidOpen=function(t){t.source===s.PAYPAL_INTEGRATION_NAME&&this.open()},a.prototype._create=function(){this.el=document.createElement("div"),this.el.className="bt-overlay",this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']),this.el.appendChild(this._createCloseIcon()),this.el.appendChild(this._createMessage())},a.prototype._createCloseIcon=function(){return this.closeIcon=document.createElement("div"),this.closeIcon.className="bt-close-overlay",this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]),this.closeIcon},a.prototype._createMessage=function(){var t=document.createElement("div");return this._setStyles(t,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]),t.appendChild(this._createLogo()),t.appendChild(this._createExplanation()),t.appendChild(this._createFocusLink()),t},a.prototype._createExplanation=function(){var t=document.createElement("div");return this._setStyles(t,["color: #FFF","margin-bottom: 20px"]),t.innerHTML="Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",t},a.prototype._createLogo=function(){var t=document.createElement("div");return this._setStyles(t,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]),t},a.prototype._createFocusLink=function(){return this.focusLink=document.createElement("a"),this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]),this.focusLink.innerHTML="Continue",this.focusLink},a.prototype._setStyles=function(t,e){var n=e.join(";");t.style.cssText=n},a.prototype._setupEvents=function(){var t=i.bind(this._handleClose,this),e=i.bind(this._handleFocus,this);i.addEventListener(this.closeIcon,"click",t),i.addEventListener(this.focusLink,"click",e),this.destructor.registerFunctionForTeardown(i.bind(function(){i.removeEventListener(this.closeIcon,"click",t),i.removeEventListener(this.focusLink,"click",e)},this))},a.prototype._handleClose=function(t){t.preventDefault(),this.close(),i.isFunction(this.options.onClose)&&this.options.onClose()},a.prototype._handleFocus=function(t){t.preventDefault(),i.isFunction(this.options.onFocus)&&this.options.onFocus()},a.prototype.teardown=function(){this.bus.teardown(),this.destructor.teardown(),this.close()},e.exports=a}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],352:[function(t,e,n){(function(n){var i=t("braintree-utilities"),r=t("destructor"),o=t("braintree-bus"),s=t("../../shared/constants");function a(t){this.options=t||{},this.container=this.options.container||document.body,this.el=this.options.el,this.destructor=new r,this.bus=new o({merchantUrl:n.location.href,channel:t.channel}),this._initialize()}a.prototype._initialize=function(){i.isFunction(this.el)||(null!=this.el?(this.el=i.normalizeElement(this.el),this.destructor.registerFunctionForTeardown(i.bind(function(){this.clear()},this))):this.el=this.create()),this.bus.on(o.events.PAYMENT_METHOD_GENERATED,i.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(o.events.PAYMENT_METHOD_CANCELLED,i.bind(this._handlePaymentMethodCancelled,this))},a.prototype.create=function(){var t=document.createElement("input");return t.name="payment_method_nonce",t.type="hidden",this.container.appendChild(t),this.destructor.registerFunctionForTeardown(i.bind(function(){this.container.removeChild(t)},this)),t},a.prototype.value=function(t){i.isFunction(this.el)?this.el(t):this.el.value=t},a.prototype.clear=function(){this.value("")},a.prototype._handlePaymentMethodCancelled=function(t){t.source===s.PAYPAL_INTEGRATION_NAME&&this.clear()},a.prototype._handlePaymentMethodGenerated=function(t){t.type===s.NONCE_TYPE&&this.value(t.nonce)},a.prototype.teardown=function(){this.destructor.teardown(),this.bus.teardown()},e.exports=a}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],353:[function(t,e,n){arguments[4][185][0].apply(n,arguments)},{"../../shared/constants":354,"../../shared/useragent/browser":357,"braintree-bus":312,dup:185}],354:[function(t,e,n){arguments[4][186][0].apply(n,arguments)},{dup:186}],355:[function(t,e,n){e.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],356:[function(t,e,n){var i=t("../shared/data/country-code-lookup");e.exports=function(t){var e,n;return t=(t=t?t.toLowerCase():"us").replace(/-/g,"_"),(e=function(t){return-1!==t.indexOf("_")&&5===t.length}(t)?t:function(t){var e,n;for(e in i)i.hasOwnProperty(e)&&(e===t?n=i[e]:i[e]===t&&(n=i[e]));return n}(t))?[(n=e.split("_"))[0],n[1].toUpperCase()].join("_"):"en_US"}},{"../shared/data/country-code-lookup":355}],357:[function(t,e,n){arguments[4][187][0].apply(n,arguments)},{"./platform":359,"./useragent":360,dup:187}],358:[function(t,e,n){arguments[4][188][0].apply(n,arguments)},{"./platform":359,"./useragent":360,dup:188}],359:[function(t,e,n){arguments[4][189][0].apply(n,arguments)},{"./useragent":360,dup:189}],360:[function(t,e,n){arguments[4][190][0].apply(n,arguments)},{dup:190}],361:[function(t,e,n){arguments[4][191][0].apply(n,arguments)},{"../useragent/browser":357,"../useragent/device":358,"../useragent/platform":359,"../useragent/useragent":360,dup:191}],362:[function(t,e,n){e.exports={setTextContent:function(t,e){var n="innerText";document&&document.body&&"textContent"in document.body&&(n="textContent"),t[n]=e}}},{}],363:[function(t,e,n){var i="function"==typeof String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/,"")},r="function"==typeof window.btoa?function(t){return window.btoa(t)}:function(t){for(var e,n,i,r,o,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;l<t.length;)e=t.charCodeAt(l++),n=t.charCodeAt(l++),i=t.charCodeAt(l++),r=e>>2,o=(3&e)<<4|n>>4,s=(15&n)<<2|i>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),u=u+c.charAt(r)+c.charAt(o)+c.charAt(s)+c.charAt(a);return u};function o(t){return Boolean(t.singleUse)&&Boolean(t.amount)&&Boolean(t.currency)}function s(t){return Boolean(t.paypal.billingAgreementsEnabled)}e.exports={trim:i,btoa:r,generateUid:function(){var t,e,n="";for(t=0;t<32;t++)e=Math.floor(16*Math.random()),n+=e.toString(16);return n},castToBoolean:function(t){return/^(true|1)$/i.test(t)},htmlEscape:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")},parseUrlParams:function(t){var e,n,i,r,o,s,a,c,u=t.indexOf("?"),l={};if(u>=0&&(t=t.substr(u+1)),0===t.length)return null;for(e=t.split("&"),n=0,i=e.length;n<i;n++)r=e[n],o=r.indexOf("="),s=r.substr(0,o),c=r.substr(o+1),"false"===(a=(a=decodeURIComponent(c)).replace(/</g,"&lt;").replace(/>/g,"&gt;"))&&(a=!1),null!=a&&"true"!==a||(a=!0),l[s]=a;return l},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},isOneTimeHermesConfiguration:o,isBillingAgreementsHermesConfiguration:s,isHermesConfiguration:function(t,e){return s(t)||o(e)}}},{}],364:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],365:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],366:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],367:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],368:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],369:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],370:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":364,dup:41}],371:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],372:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":364,"./lib/base64":365,"./lib/dom":366,"./lib/events":367,"./lib/fn":368,"./lib/string":369,"./lib/url":370,"./lib/uuid":371,dup:43}],373:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":374,"braintree-utilities/lib/fn":375,dup:80}],374:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],375:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],376:[function(t,e,n){(function(t){function n(t){if(("string"==typeof t||t instanceof String)&&(t=document.getElementById(t)),!(t instanceof HTMLFormElement))throw new TypeError("FormNapper requires an HTMLFormElement element or the id string of one.");this.htmlForm=t}n.prototype.hijack=function(e){this.submitHandler||(this.submitHandler=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e(t)},null!=t.addEventListener?this.htmlForm.addEventListener("submit",this.submitHandler,!1):null!=t.attachEvent?this.htmlForm.attachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=this.submitHandler)},n.prototype.inject=function(t,e){var n=this.htmlForm.querySelector('input[name="'+t+'"]');return null==n&&((n=document.createElement("input")).type="hidden",n.name=t,this.htmlForm.appendChild(n)),n.value=e,n},n.prototype.submit=function(){HTMLFormElement.prototype.submit.call(this.htmlForm)},n.prototype.detach=function(){this.submitHandler&&(null!=t.removeEventListener?this.htmlForm.removeEventListener("submit",this.submitHandler,!1):null!=t.detachEvent?this.htmlForm.detachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=null,delete this.submitHandler)},e.exports=n}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],377:[function(t,e,n){var i=t("./lib/external"),r=t("./lib/shared/constants").events;e.exports={create:function(t){return new i(t)},events:r,VERSION:"1.0.0"}},{"./lib/external":379,"./lib/shared/constants":381}],378:[function(t,e,n){var i=t("../shared/constants");e.exports=function(t,e){return t+"/hosted-fields/"+i.VERSION+"/hosted-fields-frame.html#"+e}},{"../shared/constants":381}],379:[function(t,e,n){var i=t("destructor"),r=t("classlist"),o=t("iframer"),s=t("braintree-bus"),a=t("./compose-url"),c=t("../shared/constants"),u=t("nodelist-to-array"),l=t("braintree-utilities"),p=t("../shared/find-parent-tags"),d=t("./should-use-label-focus"),h=c.events;function f(t,e){var n=document.createElement("div");return n.style.clear="both",(e=e||document.body).appendChild(t),e.appendChild(n),{parent:e,children:[t,n]}}function y(t){var e,n,u,p,d,y,m={},b=0;for(this.injectedNodes=[],this.destructor=new i,this.bus=new s({channel:t.channel,merchantUrl:location.href}),this.destructor.registerFunctionForTeardown(l.bind(function(){this.bus.teardown()},this)),this.bus.emit(s.events.ASYNC_DEPENDENCY_INITIALIZING),this.bus.emit(s.events.SEND_ANALYTICS_EVENTS,"hosted-fields.initialized"),d=0;d<c.whitelistedFields.length;d++)e=c.whitelistedFields[d],(n=t.merchantConfiguration.hostedFields[e])&&((u=document.querySelector(n.selector))?u.querySelector('iframe[name^="braintree-"]')?this.bus.emit(s.events.ERROR,{message:'Cannot place two elements in "'+n.selector+'"'}):(p=o({type:e,name:"braintree-hosted-field-"+e,style:c.defaultIFrameStyle}),this.injectedNodes.push(f(p,u)),this.setupLabelFocus(e,u),m[e]={frameElement:p,containerElement:u},b++,setTimeout(function(e){return function(){e.src=a(t.gatewayConfiguration.assetsUrl,t.channel)}}(p),0)):(y='Unable to find element with selector "'+n.selector+'" for hostedFields.'+e,this.bus.emit(s.events.ERROR,{message:y})));this.bus.on(h.FRAME_READY,function(t){t(0==--b)}),this.bus.on(h.INPUT_EVENT,function(t,e){return function(n){var i=t[n.fieldKey].containerElement,o=r(i);n.target={fieldKey:n.fieldKey,container:i},o.toggle(c.externalClasses.FOCUSED,n.isFocused).toggle(c.externalClasses.VALID,n.isValid),n.isStrictlyValidating?o.toggle(c.externalClasses.INVALID,!n.isValid):o.toggle(c.externalClasses.INVALID,!n.isPotentiallyValid),delete n.fieldKey,delete n.isStrictlyValidating,e&&e(n)}}(m,t.merchantConfiguration.hostedFields.onFieldEvent)),this.destructor.registerFunctionForTeardown(l.bind(function(){var t,e,n;for(t=0;t<this.injectedNodes.length;t++){for(n=this.injectedNodes[t],e=0;e<n.children.length;e++)n.parent.removeChild(n.children[e]);r(n.parent).remove(c.externalClasses.FOCUSED,c.externalClasses.INVALID,c.externalClasses.VALID)}},this))}y.prototype.setupLabelFocus=function(t,e){var n,i,r=this.bus;if(d()&&null!=e.id){for(n=(n=u(document.querySelectorAll('label[for="'+e.id+'"]'))).concat(p(e,"label")),i=0;i<n.length;i++)l.addEventListener(n[i],"click",o,!1);this.destructor.registerFunctionForTeardown(function(){for(i=0;i<n.length;i++)l.removeEventListener(n[i],"click",o,!1)})}function o(){r.emit(h.TRIGGER_INPUT_FOCUS,t)}},y.prototype.teardown=function(t){this.destructor.teardown(t)},e.exports=y},{"../shared/constants":381,"../shared/find-parent-tags":382,"./compose-url":378,"./should-use-label-focus":380,"braintree-bus":383,"braintree-utilities":395,classlist:396,destructor:399,iframer:402,"nodelist-to-array":417}],380:[function(t,e,n){e.exports=function(){return!/(iPad|iPhone|iPod)/i.test(navigator.userAgent)}},{}],381:[function(t,e,n){e.exports={VERSION:"1.0.0",events:{FRAME_READY:"hosted-fields:FRAME_READY",VALIDATE_STRICT:"hosted-fields:VALIDATE_STRICT",CONFIGURATION:"hosted-fields:CONFIGURATION",TOKENIZATION_REQUEST:"hosted-fields:TOKENIZATION_REQUEST",INPUT_EVENT:"hosted-fields:INPUT_EVENT",TRIGGER_INPUT_FOCUS:"hosted-fields:TRIGGER_INPUT_FOCUS"},externalEvents:{FOCUS:"focus",BLUR:"blur",FIELD_STATE_CHANGE:"fieldStateChange"},defaultMaxLengths:{number:19,postalCode:8,expirationDate:7,expirationMonth:2,expirationYear:4,cvv:3},externalClasses:{FOCUSED:"braintree-hosted-fields-focused",INVALID:"braintree-hosted-fields-invalid",VALID:"braintree-hosted-fields-valid"},defaultIFrameStyle:{border:"none",width:"100%",height:"100%",float:"left"},whitelistedFields:["number","cvv","expirationDate","expirationMonth","expirationYear","postalCode"],whitelistedStyles:["-moz-osx-font-smoothing","-moz-transition","-webkit-font-smoothing","-webkit-transition","color","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","line-height","opacity","outline","text-shadow","transition"],passwordManagerFields:{number:{name:"credit-card-number",label:"Credit Card Number"},expirationDate:{name:"expiration",label:"Expiration Date"},postalCode:{name:"postal-code",label:"Postal Code"}}}},{}],382:[function(t,e,n){e.exports=function(t,e){for(var n=t.parentNode,i=[];null!=n;)null!=n.tagName&&n.tagName.toLowerCase()===e&&i.push(n),n=n.parentNode;return i}},{}],383:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"./lib/check-origin":384,"./lib/events":385,dup:52,framebus:386}],384:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],385:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],386:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],387:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],388:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],389:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],390:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],391:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],392:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],393:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"./array":387,dup:41}],394:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],395:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./lib/array":387,"./lib/base64":388,"./lib/dom":389,"./lib/events":390,"./lib/fn":391,"./lib/string":392,"./lib/url":393,"./lib/uuid":394,dup:43}],396:[function(t,e,n){e.exports=s;var i=t("component-indexof"),r=t("trim"),o=Array.prototype;function s(t){if(!(this instanceof s))return new s(t);var e,n=r(t.className).split(/\s+/);for(this._elem=t,this.length=0,e=0;e<n.length;e+=1)n[e]&&o.push.call(this,n[e])}s.prototype.add=function(){var t,e;for(e=0;e<arguments.length;e+=1)t=""+arguments[e],i(this,t)>=0||o.push.call(this,t);return this._elem.className=this.toString(),this},s.prototype.remove=function(){var t,e,n;for(n=0;n<arguments.length;n+=1)e=""+arguments[n],(t=i(this,e))<0||o.splice.call(this,t,1);return this._elem.className=this.toString(),this},s.prototype.contains=function(t){return i(this,t+="")>=0},s.prototype.toggle=function(t,e){return t+="",!0===e?this.add(t):!1===e?this.remove(t):this[this.contains(t)?"remove":"add"](t)},s.prototype.toString=function(){return o.join.call(this," ")}},{"component-indexof":397,trim:398}],397:[function(t,e,n){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],398:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],399:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"batch-execute-functions":400,"braintree-utilities/lib/fn":401,dup:80}],400:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],401:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],402:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./lib/default-attributes":403,dup:83,"lodash.assign":406,"lodash.isstring":404,setattributes:405}],403:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],404:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],405:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],406:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{dup:85,"lodash._baseassign":407,"lodash._createassigner":409,"lodash.keys":413}],407:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":408,"lodash.keys":413}],408:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],409:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88,"lodash._bindcallback":410,"lodash._isiterateecall":411,"lodash.restparam":412}],410:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],411:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],412:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{dup:91}],413:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":414,"lodash.isarguments":415,"lodash.isarray":416}],414:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],415:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],416:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],417:[function(t,e,n){void 0!==e&&(e.exports=function(t){try{return Array.prototype.slice.call(t)}catch(i){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}})},{}],418:[function(t,e,n){var i=t("lodash._baseclone"),r=t("lodash._bindcallback");e.exports=function(t,e,n){return"function"==typeof e?i(t,!0,r(e,n,3)):i(t,!0)}},{"lodash._baseclone":419,"lodash._bindcallback":429}],419:[function(t,e,n){(function(n){var i=t("lodash._arraycopy"),r=t("lodash._arrayeach"),o=t("lodash._baseassign"),s=t("lodash._basefor"),a=t("lodash.isarray"),c=t("lodash.keys"),u="[object Arguments]",l="[object Boolean]",p="[object Date]",d="[object Function]",h="[object Number]",f="[object Object]",y="[object RegExp]",m="[object String]",b="[object ArrayBuffer]",v="[object Float32Array]",g="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",w="[object Int32Array]",A="[object Uint8Array]",C="[object Uint8ClampedArray]",T="[object Uint16Array]",x="[object Uint32Array]",S=/\w*$/,N={};N[u]=N["[object Array]"]=N[b]=N[l]=N[p]=N[v]=N[g]=N[_]=N[E]=N[w]=N[h]=N[f]=N[y]=N[m]=N[A]=N[C]=N[T]=N[x]=!0,N["[object Error]"]=N[d]=N["[object Map]"]=N["[object Set]"]=N["[object WeakMap]"]=!1;var I=Object.prototype,O=I.hasOwnProperty,P=I.toString,R=n.ArrayBuffer,M=n.Uint8Array;function L(t){var e=new R(t.byteLength),n=new M(e);return n.set(new M(t)),e}e.exports=function t(e,n,I,R,M,k,D){var U;if(I&&(U=M?I(e,R,M):I(e)),void 0!==U)return U;if(!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(e))return e;var F=a(e);if(F){if(U=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&O.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!n)return i(e,U)}else{var j=P.call(e),z=j==d;if(j!=f&&j!=u&&(!z||M))return N[j]?function(t,e,n){var i=t.constructor;switch(e){case b:return L(t);case l:case p:return new i(+t);case v:case g:case _:case E:case w:case A:case C:case T:case x:var r=t.buffer;return new i(n?L(r):r,t.byteOffset,t.length);case h:case m:return new i(t);case y:var o=new i(t.source,S.exec(t));o.lastIndex=t.lastIndex}return o}(e,j,n):M?e:{};if(U=function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}(z?{}:e),!n)return o(U,e)}k||(k=[]),D||(D=[]);for(var H=k.length;H--;)if(k[H]==e)return D[H];return k.push(e),D.push(U),(F?r:function(t,e){return s(t,e,c)})(e,function(i,r){U[r]=t(i,n,I,r,e,k,D)}),U}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":420,"lodash._arrayeach":421,"lodash._baseassign":422,"lodash._basefor":424,"lodash.isarray":425,"lodash.keys":426}],420:[function(t,e,n){e.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},{}],421:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}},{}],422:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":423,"lodash.keys":426}],423:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],424:[function(t,e,n){var i,r=function(t,e,n){for(var r,o=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(r=t)?r:Object(r),s=n(t),a=s.length,c=i?a:-1;i?c--:++c<a;){var u=s[c];if(!1===e(o[u],u,o))break}return t};e.exports=r},{}],425:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],426:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":427,"lodash.isarguments":428,"lodash.isarray":425}],427:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],428:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],429:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],430:[function(t,e,n){var i=t("lodash._baseassign"),r=t("lodash._basecreate"),o=t("lodash._isiterateecall");e.exports=function(t,e,n){var s=r(t);return n&&o(t,e,n)&&(e=void 0),e?i(s,e):s}},{"lodash._baseassign":431,"lodash._basecreate":437,"lodash._isiterateecall":438}],431:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86,"lodash._basecopy":432,"lodash.keys":433}],432:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],433:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash._getnative":434,"lodash.isarguments":435,"lodash.isarray":436}],434:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],435:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],436:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],437:[function(t,e,n){var i=function(){function t(){}return function(e){if(r=typeof(i=e),i&&("object"==r||"function"==r)){t.prototype=e;var n=new t;t.prototype=void 0}var i,r;return n||{}}}();e.exports=i},{}],438:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],439:[function(t,e,n){e.exports={convertToLegacyShippingAddress:function(t){var e,n={};if(t){for(e in t)t.hasOwnProperty(e)&&(n[(i=e,i.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()}))]=t[e]);var i;return n}}}},{}],440:[function(t,e,n){e.exports={ROOT_SUCCESS_CALLBACK:"onPaymentMethodReceived",ROOT_ERROR_CALLBACK:"onError",ROOT_READY_CALLBACK:"onReady"}},{}],441:[function(t,e,n){(function(n){var i=t("lodash.clonedeep"),r=t("braintree-api"),o=t("braintree-bus"),s=t("destructor"),a=t("braintree-utilities").bind,c=t("../constants"),u=t("../lib/sanitize-payload"),l=t("../lib/lookup-callback-for"),p=t("../lib/fallback-error-handler"),d=t("../lib/node-type"),h=d.isJQueryElement,f=d.isHTMLElement;function y(){}function m(){this._dependenciesRemaining++}function b(){this._dependenciesRemaining--,0===this._dependenciesRemaining&&(delete this._dependenciesRemaining,this.bus.off(o.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.off(o.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady),this._onIntegrationReady())}function v(t){this.configuration=t,this.isReady=!1,this.destructor=new s,this.bus=new o({channel:this.configuration.channel,merchantUrl:n.location.href}),this._createApiClient(),this._configureCallbacks(),this._configureAnalytics(),this._attachEvents(),this._emitInitializing()}v.prototype._emitInitializing=function(){this.bus.emit(o.events.ASYNC_DEPENDENCY_INITIALIZING)},v.prototype._createApiClient=function(){var t={clientToken:this.configuration.gatewayConfiguration,integration:this.configuration.integrationType,analyticsConfiguration:this.configuration.analyticsConfiguration};this.configuration.merchantConfiguration.enableCORS&&(t.enableCORS=!0),this.apiClient=new r.Client(t)},v.prototype._configureCallbacks=function(){var t,e=l(this.configuration.merchantConfiguration);this.onSuccess=(t=e(c.ROOT_SUCCESS_CALLBACK),function(e){t(u(e))}),this.onError=e(c.ROOT_ERROR_CALLBACK,p),this.onReady=e(c.ROOT_READY_CALLBACK)},v.prototype._configureAnalytics=function(){var t="web."+this.configuration.integrationType+".",e=this.apiClient;this.bus.on(o.events.SEND_ANALYTICS_EVENTS,function(n,i){var r;for(n instanceof Array||(n=[n]),r=0;r<n.length;r++)n[r]=t+n[r];e.sendAnalyticsEvents(n,i)})},v.prototype._attachEvents=function(){var t,e=this.configuration;this.bus.on(o.events.ERROR,this.onError),this.bus.on(o.events.PAYMENT_METHOD_RECEIVED,this.onSuccess),this.bus.on(o.events.WARNING,function(t){try{console.warn(t)}catch(t){}}),t={enableCORS:e.merchantConfiguration.enableCORS,configuration:e.gatewayConfiguration,integration:e.integrationType,analyticsConfiguration:e.analyticsConfiguration,merchantConfiguration:i(e.merchantConfiguration,function(t){if(h(t)||f(t))return{}})},this.bus.on(o.events.CONFIGURATION_REQUEST,function(e){e(t)}),this._dependenciesRemaining=0,this._handleDependencyInitializing=a(m,this),this._handleDependencyReady=a(b,this),this.bus.on(o.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.on(o.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady)},v.prototype._onIntegrationReady=function(){var t={teardown:a(function(e){var n,i="Cannot call teardown while in progress";function r(){throw new Error(i)}for(n in e=e||y,t)t.hasOwnProperty(n)&&(t[n]=r);this.destructor.teardown(a(function(){i="Cannot teardown integration more than once",this.bus.teardown(),e()},this))},this)};this.isReady=!0,this.onReady(t)},e.exports=v}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants":440,"../lib/fallback-error-handler":447,"../lib/lookup-callback-for":449,"../lib/node-type":450,"../lib/sanitize-payload":451,"braintree-api":21,"braintree-bus":52,"braintree-utilities":372,destructor:373,"lodash.clonedeep":418}],442:[function(t,e,n){var i=t("lodash.clonedeep"),r=t("lodash.create"),o=t("braintree-api"),s=t("braintree-utilities").bind,a=t("braintree-coinbase"),c=t("braintree-bus"),u=t("./base-integration");function l(){var t,e;u.apply(this,arguments),t=i(this.configuration.merchantConfiguration),this._attachBusEvents(),t.channel=this.configuration.channel,t.configuration=i(this.configuration.gatewayConfiguration),t.coinbase=i(t.coinbase||{}),t.apiClient=new o.Client({enableCORS:this.configuration.merchantConfiguration.enableCORS||!1,clientToken:this.configuration.gatewayConfiguration,integration:"coinbase"}),e=a.create(t),this.destructor.registerFunctionForTeardown(function(t){e.teardown(t)}),this.bus.emit(c.events.ASYNC_DEPENDENCY_READY)}l.prototype=r(u.prototype,{constructor:l}),l.prototype._attachBusEvents=function(){this.bus.on(c.events.PAYMENT_METHOD_GENERATED,s(this._onPaymentMethodGenerated,this))},l.prototype._onPaymentMethodGenerated=function(t){this.bus.emit(c.events.PAYMENT_METHOD_RECEIVED,t)},e.exports=l},{"./base-integration":441,"braintree-api":21,"braintree-bus":52,"braintree-coinbase":56,"braintree-utilities":372,"lodash.clonedeep":418,"lodash.create":430}],443:[function(t,e,n){var i=t("lodash.clonedeep"),r=t("lodash.create"),o=t("braintree-form"),s=t("braintree-paypal"),a=t("braintree-coinbase"),c=t("braintree-utilities"),u=t("hosted-fields"),l=t("form-napper"),p=t("../constants"),d=t("braintree-bus"),h=t("../compatibility").convertToLegacyShippingAddress,f=t("./base-integration"),y=t("../lib/node-type"),m=y.isJQueryElement,b=y.isHTMLElement,v=t("../lib/hosted-fields-nonce-manager");function g(){f.apply(this,arguments),null!=this.configuration.merchantConfiguration.hostedFields?this._setupHostedFields():this._setupForm(),this._setupPayPal(),this._setupCoinbase(),this.bus.emit(d.events.ASYNC_DEPENDENCY_READY)}g.prototype=r(f.prototype,{constructor:g}),g.prototype._setupHostedFields=function(){var t,e=this.configuration.merchantConfiguration,n=e[p.ROOT_SUCCESS_CALLBACK],i=new l(e.id),r=u.create(this.configuration),o=new v({formNapper:i,rootCallback:n,channel:this.configuration.channel});null!=i.htmlForm?(t=c.bind(o.handleSubmitRequest,o),i.hijack(t),this.bus.on(d.events.USER_FORM_SUBMIT_REQUEST,t),this.destructor.registerFunctionForTeardown(c.bind(function(t){o.teardown(),i.detach(),r.teardown(t)},this))):this.bus.emit(d.events.ERROR,{type:"CONFIGURATION",message:"options.id does not reference a valid DOM element"})},g.prototype._setupForm=function(){var t,e,n=this.configuration.merchantConfiguration;n.id?(e=o.setup(this.apiClient,this.configuration),!c.isFunction(n[p.ROOT_SUCCESS_CALLBACK])||(t=this.onSuccess,e.onNonceReceived=c.bind(function(e,n){e?this.bus.emit(d.events.ERROR,e):t(n)},this)),this.destructor.registerFunctionForTeardown(function(){e.teardown()})):this.bus.on(d.events.PAYMENT_METHOD_GENERATED,c.bind(function(t){this.bus.emit(d.events.PAYMENT_METHOD_RECEIVED,t)},this))},g.prototype._setupPayPal=function(){var t,e,n,r,o,a,u,l,p=this.configuration.merchantConfiguration;p.paypal&&(a=i(p.paypal,function(t){return m(t)?t[0]:b(t)?t:void 0}),u=p,l="paypal",e=(t=function(t){return l in u&&c.isFunction(u[l][t])?u[l][t]:function(){}})("onSuccess"),n=t("onCancelled"),a.paymentMethodNonceInputField||((r=document.createElement("input")).id="braintree-custom-integration-dummy-input",a.paymentMethodNonceInputField=r),a.onSuccess=function(t){e(t.nonce,t.details.email,h(t.details.shippingAddress))},a.onCancelled=c.bind(function(){this.bus.emit(d.events.PAYMENT_METHOD_CANCELLED),n()},this),p.enableCORS&&(a.enableCORS=!0),null!=(o=s.create(this.configuration.gatewayConfiguration,a,this.configuration.channel))&&this.destructor.registerFunctionForTeardown(function(){o.teardown()}))},g.prototype._setupCoinbase=function(){var t,e;this.configuration.merchantConfiguration.coinbase&&(navigator.userAgent.match(/MSIE 8\.0/)||((t=i(this.configuration.merchantConfiguration)).channel=this.configuration.channel,t.configuration=this.configuration.gatewayConfiguration,t.apiClient=this.apiClient,delete t.paypal,e=a.create(t),this.destructor.registerFunctionForTeardown(function(t){e.teardown(t)})))},e.exports=g},{"../compatibility":439,"../constants":440,"../lib/hosted-fields-nonce-manager":448,"../lib/node-type":450,"./base-integration":441,"braintree-bus":52,"braintree-coinbase":56,"braintree-form":245,"braintree-paypal":344,"braintree-utilities":372,"form-napper":376,"hosted-fields":377,"lodash.clonedeep":418,"lodash.create":430}],444:[function(t,e,n){var i=t("lodash.create"),r=t("braintree-dropin"),o=t("braintree-utilities"),s=t("braintree-bus"),a=t("../constants"),c=t("../lib/sanitize-payload"),u=t("./base-integration");function l(){var t,e,n,i,l;u.apply(this,arguments),t=this.configuration.merchantConfiguration,e=function(t){return o.isFunction(t.paymentMethodNonceReceived)?t.paymentMethodNonceReceived:null}(t),l=t,n=o.isFunction(l[a.ROOT_SUCCESS_CALLBACK]),(e||n)&&(t.paymentMethodNonceReceived=o.bind(function(t){e&&e(t.originalEvent,t.nonce),this.bus.emit(s.events.PAYMENT_METHOD_RECEIVED,c(t))},this)),i=r.create(this.configuration),this.destructor.registerFunctionForTeardown(function(t){i.teardown(t)}),this.bus.emit(s.events.ASYNC_DEPENDENCY_READY)}l.prototype=i(u.prototype,{constructor:l}),e.exports=l},{"../constants":440,"../lib/sanitize-payload":451,"./base-integration":441,"braintree-bus":52,"braintree-dropin":236,"braintree-utilities":372,"lodash.create":430}],445:[function(t,e,n){e.exports={custom:t("./custom"),dropin:t("./dropin"),paypal:t("./paypal"),coinbase:t("./coinbase")}},{"./coinbase":442,"./custom":443,"./dropin":444,"./paypal":446}],446:[function(t,e,n){var i=t("lodash.create"),r=t("braintree-paypal"),o=t("braintree-utilities"),s=t("../constants"),a=t("braintree-bus"),c=t("../compatibility").convertToLegacyShippingAddress,u=t("./base-integration");function l(){var t,e,n,i,l;u.apply(this,arguments),t=this.configuration.merchantConfiguration,e=function(t){return"onSuccess"in t&&o.isFunction(t.onSuccess)?t.onSuccess:"paypal"in t&&o.isFunction(t.paypal.onSuccess)?t.paypal.onSuccess:null}(t),l=t,n=o.isFunction(l[s.ROOT_SUCCESS_CALLBACK]),(e||n)&&(t.onSuccess=o.bind(function(t){e&&e(t.nonce,t.details.email,c(t.details.shippingAddress)),this.bus.emit(a.events.PAYMENT_METHOD_RECEIVED,t)},this)),i=r.create(this.configuration.gatewayConfiguration,t,this.configuration.channel),this.destructor.registerFunctionForTeardown(function(){i.teardown()}),this.bus.emit(a.events.ASYNC_DEPENDENCY_READY)}l.prototype=i(u.prototype,{constructor:l}),e.exports=l},{"../compatibility":439,"../constants":440,"./base-integration":441,"braintree-bus":52,"braintree-paypal":344,"braintree-utilities":372,"lodash.create":430}],447:[function(t,e,n){e.exports=function(t){if("CONFIGURATION"===t.type||"IMMEDIATE"===t.type)throw new Error(t.message);try{console.error(JSON.stringify(t))}catch(t){}}},{}],448:[function(t,e,n){var i=t("braintree-bus"),r=t("hosted-fields"),o="payment_method_nonce";function s(t){this.paymentMethod=null,this.nonceInputElement=null,this.bus=new i({channel:t.channel}),this.formNapper=t.formNapper,this.rootCallback=t.rootCallback,this._attachEvents()}s.prototype._clearNonce=function(){this.paymentMethod=null,this.nonceInputElement=this.formNapper.inject(o,"")},s.prototype._attachEvents=function(){var t=this;this.bus.on(i.events.PAYMENT_METHOD_CANCELLED,function(){t._clearNonce()}),this.bus.on(i.events.PAYMENT_METHOD_GENERATED,function(e){t.paymentMethod=e,t.nonceInputElement=t.formNapper.inject(o,t.paymentMethod.nonce)})},s.prototype.handleSubmitRequest=function(){var t=this;this.bus.emit(r.events.TOKENIZATION_REQUEST,function(e){var n=e[0],s=e[1];if(n)t.bus.emit(i.events.ERROR,n);else{if(t.paymentMethod=s||t.paymentMethod,null==t.paymentMethod)return t.bus.emit(r.events.VALIDATE_STRICT),void t.bus.emit(i.events.ERROR,{type:"VALIDATION",message:"User did not enter a payment method"});t.rootCallback?t.bus.emit(i.events.SEND_ANALYTICS_EVENTS,"web.custom.hosted-fields.via.callback.success",function(){t.rootCallback(t.paymentMethod)}):t.bus.emit(i.events.SEND_ANALYTICS_EVENTS,"web.custom.hosted-fields.via.formsubmit.success",function(){t.nonceInputElement=t.formNapper.inject(o,t.paymentMethod.nonce),t.formNapper.submit()})}})},s.prototype.teardown=function(){this._clearNonce()},e.exports=s},{"braintree-bus":52,"hosted-fields":377}],449:[function(t,e,n){var i=t("braintree-utilities").isFunction;function r(){}e.exports=function(t){return function(e,n){return i(t[e])?t[e]:i(n)?n:r}}},{"braintree-utilities":372}],450:[function(t,e,n){e.exports={isJQueryElement:function(t){return"object"==typeof t&&"jquery"in t&&0!==t.length},isHTMLElement:function(t){return t&&1===t.nodeType}}},{}],451:[function(t,e,n){e.exports=function(t){return{nonce:t.nonce,details:t.details,type:t.type}}},{}]},{},[1])(1)});t.on("submit",".js-braintree-encrypt",function(t){var e=t.currentTarget;window.Braintree.create(e.getAttribute("data-braintree-key")).encryptForm(e)});var h=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(r,o){try{var s=e[r](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}("next")})}};function f(t){var e=t.closest("form");n(e,"app/assets/modules/github/billing/coupon-redemption.js:63");var i=e.querySelector(".js-redeem-button");n(i instanceof HTMLButtonElement,"app/assets/modules/github/billing/coupon-redemption.js:65"),i.disabled=t.classList.contains("free-plan")}function y(t){var n=t.getAttribute("data-login"),i=t.getAttribute("data-plan");if(n&&i){var r=!0,o=!1,s=void 0;try{for(var a,c=document.querySelectorAll(".js-account-row, .js-choose-account")[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){a.value.classList.remove("selected")}}catch(t){o=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw s}}t.classList.add("selected");var u=t.querySelector(".js-choose-account");u&&u.classList.add("selected");var l=e.query(document,".js-account",HTMLInputElement);l&&(l.value=n);var p=document.querySelector(".js-plan-section");p&&p.classList.remove("d-none");var d=!0,h=!1,f=void 0;try{for(var y,b=document.querySelectorAll(".js-billing-plans")[Symbol.iterator]();!(d=(y=b.next()).done);d=!0){y.value.classList.add("d-none")}}catch(t){h=!0,f=t}finally{try{!d&&b.return&&b.return()}finally{if(h)throw f}}var v=document.querySelector(".js-billing-plans[data-login='"+n+"']");if(v){v.classList.remove("d-none");var g=v.querySelectorAll(".js-plan-row"),_=1===g.length?g[0]:v.querySelector("[data-name='"+i+"']");_&&m(_)}}}function m(t){var n=t.getAttribute("data-name"),i=t.closest(".js-billing-plans");if(i){var r=i.getAttribute("data-login");if(r){var o="true"===i.getAttribute("data-has-billing"),s=parseInt(t.getAttribute("data-cost"),10),a=!0,c=!1,u=void 0;try{for(var l,p=document.querySelectorAll(".js-plan-row, .js-choose-plan")[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){l.value.classList.remove("selected")}}catch(t){c=!0,u=t}finally{try{!a&&p.return&&p.return()}finally{if(c)throw u}}t.classList.add("selected");var d=t.querySelector(".js-choose-plan");d&&d.classList.add("selected");var h=t.querySelector(".js-choose-plan-radio");h instanceof HTMLInputElement&&(h.checked=!0);var f=e.query(document,".js-plan",HTMLInputElement);if(f&&(f.value=n||""),0===s||o){var y=document.querySelector(".js-billing-section");y&&y.classList.add("has-removed-contents")}else if(r){var m=document.querySelector(".js-billing-section[data-login='"+r+"']");m&&m.classList.remove("has-removed-contents")}}}}t.on("submit",".js-find-coupon-form",function(t){var i=t.target;n(i instanceof HTMLFormElement,"app/assets/modules/github/billing/coupon-redemption.js:19");var r=i.action,o=e.query(document,"#code",HTMLInputElement);window.location=r+"/"+encodeURIComponent(o.value),t.preventDefault()}),t.on("click",".js-choose-account",function(t){var n=!0,i=!1,r=void 0;try{for(var o,s=document.querySelectorAll(".js-plan-row, .js-choose-plan")[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.classList.remove("selected")}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}e.query(document,".js-plan",HTMLInputElement).value="";var a=!0,c=!1,u=void 0;try{for(var l,p=document.querySelectorAll(".js-billing-section")[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){l.value.classList.add("has-removed-contents")}}catch(t){c=!0,u=t}finally{try{!a&&p.return&&p.return()}finally{if(c)throw u}}var d=t.currentTarget.closest(".js-account-row");d&&y(d)}),t.on("click",".js-choose-plan",function(t){m(e.closest(t.target,".js-plan-row"))}),i.observe(".js-choose-plan-radio:checked",{add:function(t){m(e.closest(t,".js-plan-row"))}}),i.observe(".js-plan-row.selected",{add:f}),i.observe(".js-choose-account.selected",{add:f}),h(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.ready;case 2:(e=document.querySelector(".js-account-row.selected"))&&y(e),(n=document.querySelector(".js-plan-row.selected"))&&m(n);case 6:case"end":return t.stop()}},t,this)}))();var b=p(function(t,e){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c=l;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return r(n||t)},p,p.exports,t,e,n,i)}return n[s].exports}for(var o=l,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){e.exports={errors:{PATTERN_MISSING:"A valid pattern must be provided",INVALID_ELEMENT:"A valid HTML input or textarea element must be provided"}}},{}],2:[function(t,e,n){(function(n){var i=n.navigator&&n.navigator.userAgent,r=t("@braintree/browser-detection/is-android"),o=t("@braintree/browser-detection/is-chrome"),s=t("@braintree/browser-detection/is-ios"),a=t("@braintree/browser-detection/is-ie9"),c=/Version\/\d\.\d* Chrome\/\d*\.0\.0\.0/;e.exports={isIE9:a,isAndroidChrome:function(t){var e=t||i;return r(e)&&o(e)},isIos:s,isKitKatWebview:function(t){var e=t||i;return r(e)&&c.test(e)},isSamsungBrowser:function(t){return/SamsungBrowser/.test(t=t||i)||function(t){return!o(t)&&t.indexOf("Samsung")>-1}(t)}}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@braintree/browser-detection/is-android":18,"@braintree/browser-detection/is-chrome":19,"@braintree/browser-detection/is-ie9":21,"@braintree/browser-detection/is-ios":22}],3:[function(t,e,n){var i=t("./parse-pattern"),r=t("../is-backspace");function o(t){this.setPattern(t)}o.prototype.setPattern=function(t){if("string"!=typeof t)throw new Error("A valid pattern string is required");this.pattern=i(t)},o.prototype.format=function(t){var e,n,i,r=t.value,o=0,s="",a={start:t.selection.start,end:t.selection.end};for(e=0;e<this.pattern.length&&(n=this.pattern[e],i=r[o],!(o>r.length));e++)if(n.isPermaChar)null==i&&s.length!==n.index||(s+=n.value,n.index<=a.start&&a.start++,n.index<=a.end&&a.end++);else for(;o<r.length;o++){if(i=r[o],n.value.test(i)){s+=i,o++;break}n.index<=a.start&&a.start--,n.index<=a.end&&a.end--}return{value:s,selection:a}},o.prototype.unformat=function(t){var e,n,i=t.selection.start,r=t.selection.end,o="";for(e=0;e<this.pattern.length;e++)(n=this.pattern[e]).isPermaChar||null==t.value[e]||!n.value.test(t.value[e])?n.value===t.value[n.index]&&(n.index<t.selection.start&&i--,n.index<t.selection.end&&r--):o+=t.value[e];return{selection:{start:i,end:r},value:o}},o.prototype.simulateDeletion=function(t){var e,n,i=this.unformat.apply(this,arguments),o=i.value,s=i.selection,a=Math.abs(i.selection.end-i.selection.start);return a?(e=s.start,n=s.end):r(t.event)?(e=Math.max(0,s.start-1),n=s.start):(e=s.start,n=Math.min(o.length,s.start+1)),{selection:{start:e,end:e},value:o.substr(0,e)+o.substr(n)}},e.exports=o},{"../is-backspace":6,"./parse-pattern":4}],4:[function(t,e,n){var i=/[A-Za-z]/,r=/\d/,o=/./,s=/^[A-Za-z0-9\*]$/,a=new RegExp("({{[^}]+}})|(\\s|\\S)","g"),c=new RegExp("^({{[^}]+}})$"),u=new RegExp("{|}","g");function l(t){return function(t){return r.test(t)}(t)?r:function(t){return i.test(t)}(t)?i:o}e.exports=function(t){var e,n,i,r,o,p,d,h,f=[],y=t.match(a);for(e=0,n=0;n<y.length;n++)if(r=y[n],h=r,c.test(h))for(o=r.replace(u,"").split(""),i=0;i<o.length;i++){if(p=o[i],d=p,!s.test(d))throw new Error("Only alphanumeric or wildcard pattern matchers are allowed");f.push({value:l(p),isPermaChar:!1,index:e++})}else f.push({value:r,isPermaChar:!0,index:e++});return f}},{}],5:[function(t,e,n){e.exports={get:function(t){var e,n;return e=t.selectionStart,n=t.selectionEnd,{start:e,end:n,delta:Math.abs(n-e)}},set:function(t,e,n){document.activeElement===t&&t.setSelectionRange&&t.setSelectionRange(e,n)}}},{}],6:[function(t,e,n){e.exports=function(t){return"Backspace"===t.key||8===t.keyCode}},{}],7:[function(t,e,n){var i=/^Del(ete)?$/;e.exports=function(t){return i.test(t.key)||46===t.keyCode}},{}],8:[function(t,e,n){e.exports=function(t){return Boolean(t)&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)}},{}],9:[function(t,e,n){var i=t("./input-selection").get;e.exports=function(t){var e=t.currentTarget||t.srcElement,n=i(e),r=0===n.start,o=n.start===e.value.length,s=!0===t.shiftKey;switch(t.key){case void 0:case"Unidentified":case"":break;case"Backspace":return r;case"Del":case"Delete":return o;default:return 1!==t.key.length}switch(t.keyCode){case 9:case 19:case 20:case 27:case 39:case 45:return!0;case 33:case 34:case 35:case 36:case 37:case 38:case 40:return!s;case 8:return r;case 46:return o;default:return!1}}},{"./input-selection":5}],10:[function(t,e,n){var i=t("./device"),r=t("../supports-input-formatting"),o=t("./constants"),s=t("./is-valid-element"),a=t("./strategies/ios"),c=t("./strategies/android-chrome"),u=t("./strategies/kitkat-chromium-based-webview"),l=t("./strategies/ie9"),p=t("./strategies/base"),d=t("./strategies/noop");function h(t){if(!s((t=t||{}).element))throw new Error(o.errors.INVALID_ELEMENT);if(!t.pattern)throw new Error(o.errors.PATTERN_MISSING);h.supportsFormatting()?i.isIos()?this.strategy=new a(t):i.isKitKatWebview()?this.strategy=new u(t):i.isAndroidChrome()?this.strategy=new c(t):i.isIE9()?this.strategy=new l(t):this.strategy=new p(t):this.strategy=new d(t)}h.prototype.getUnformattedValue=function(){return this.strategy.getUnformattedValue()},h.prototype.setPattern=function(t){this.strategy.setPattern(t)},h.supportsFormatting=function(){return r()},e.exports=h},{"../supports-input-formatting":24,"./constants":1,"./device":2,"./is-valid-element":8,"./strategies/android-chrome":11,"./strategies/base":12,"./strategies/ie9":13,"./strategies/ios":14,"./strategies/kitkat-chromium-based-webview":15,"./strategies/noop":16}],11:[function(t,e,n){var i=t("../key-cannot-mutate-value"),r=t("./base"),o=t("../input-selection").set;function s(t){r.call(this,t)}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype._attachListeners=function(){var t=this;t.inputElement.addEventListener("keydown",function(e){i(e)||t._unformatInput(e)}),t.inputElement.addEventListener("keypress",function(e){i(e)||t._unformatInput(e)}),t.inputElement.addEventListener("keyup",function(e){t._reformatInput(e)}),t.inputElement.addEventListener("input",function(e){t._reformatInput(e)}),t.inputElement.addEventListener("paste",this._pasteEventHandler.bind(this))},s.prototype._prePasteEventHandler=function(){},s.prototype._postPasteEventHandler=function(){setTimeout(this._reformatAfterPaste.bind(this),0)},s.prototype._afterReformatInput=function(t){var e=this.inputElement;setTimeout(function(){var n=t.selection;o(e,n.end,n.end)},0)},e.exports=s},{"../input-selection":5,"../key-cannot-mutate-value":9,"./base":12}],12:[function(t,e,n){(function(n){var i=t("../key-cannot-mutate-value"),r=t("../input-selection").get,o=t("../input-selection").set,s=t("../is-backspace"),a=t("../is-delete"),c=t("../formatter");function u(t){this.isFormatted=!1,this.inputElement=t.element,this.formatter=new c(t.pattern),this._attachListeners()}function l(t){return!t.key&&!t.keyCode}u.prototype.getUnformattedValue=function(t){var e=this.inputElement.value;return(t||this.isFormatted)&&(e=this.formatter.unformat({value:this.inputElement.value,selection:{start:0,end:0}}).value),e},u.prototype.setPattern=function(t){this._unformatInput(),this.formatter=new c(t),this._reformatInput()},u.prototype._attachListeners=function(){var t=this;t.inputElement.addEventListener("keydown",function(e){l(e)&&(t.isFormatted=!1),i(e)||t._isDeletion(e)&&t._unformatInput(e)}),t.inputElement.addEventListener("keypress",function(e){l(e)&&(t.isFormatted=!1),i(e)||t._unformatInput(e)}),t.inputElement.addEventListener("keyup",function(e){t._reformatInput(e)}),t.inputElement.addEventListener("input",function(e){(e instanceof CustomEvent||!e.isTrusted)&&(t.isFormatted=!1),t._reformatInput(e)}),t.inputElement.addEventListener("paste",this._pasteEventHandler.bind(this))},u.prototype._isDeletion=function(t){return a(t)||s(t)},u.prototype._reformatInput=function(){var t,e;this.isFormatted||(this.isFormatted=!0,t=this.inputElement,e=this.formatter.format({selection:r(t),value:t.value}),t.value=e.value,o(t,e.selection.start,e.selection.end),this._afterReformatInput(e))},u.prototype._afterReformatInput=function(){},u.prototype._unformatInput=function(){var t,e,n;this.isFormatted&&(this.isFormatted=!1,t=this.inputElement,n=r(t),e=this.formatter.unformat({selection:n,value:t.value}),t.value=e.value,o(t,e.selection.start,e.selection.end))},u.prototype._prePasteEventHandler=function(t){t.preventDefault()},u.prototype._postPasteEventHandler=function(){this._reformatAfterPaste()},u.prototype._pasteEventHandler=function(t){var e,i,s="";this._prePasteEventHandler(t),this._unformatInput(),t.clipboardData?s=t.clipboardData.getData("Text"):n.clipboardData&&(s=n.clipboardData.getData("Text")),e=r(this.inputElement),(i=this.inputElement.value.split("")).splice(e.start,e.end-e.start,s),i=i.join(""),this.inputElement.value=i,o(this.inputElement,e.start+s.length,e.start+s.length),this._postPasteEventHandler()},u.prototype._reformatAfterPaste=function(){var t=document.createEvent("Event");this._reformatInput(),t.initEvent("input",!0,!0),this.inputElement.dispatchEvent(t)},u.prototype._getStateToFormat=function(){var t=this.inputElement,e=r(t),n={selection:e,value:t.value};return this._stateToFormat?(n=this._stateToFormat,delete this._stateToFormat):e.start===t.value.length&&(n=this.formatter.unformat(n)),n},e.exports=u}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../formatter":3,"../input-selection":5,"../is-backspace":6,"../is-delete":7,"../key-cannot-mutate-value":9}],13:[function(t,e,n){var i=t("./base"),r=t("../key-cannot-mutate-value"),o=t("../input-selection").get,s=t("../input-selection").set;function a(t){i.call(this,t)}function c(t,e){return{start:t.start+e,end:t.end+e}}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.getUnformattedValue=function(){return i.prototype.getUnformattedValue.call(this,!0)},a.prototype._attachListeners=function(){this.inputElement.addEventListener("keydown",this._keydownListener.bind(this)),this.inputElement.addEventListener("focus",this._format.bind(this)),this.inputElement.addEventListener("paste",this._pasteEventHandler.bind(this))},a.prototype._format=function(){var t=this.inputElement,e=this._getStateToFormat(),n=this.formatter.format(e);t.value=n.value,s(t,n.selection.start,n.selection.end)},a.prototype._keydownListener=function(t){var e,n,i;r(t)||(t.preventDefault(),this._isDeletion(t)?this._stateToFormat=this.formatter.simulateDeletion({event:t,selection:o(this.inputElement),value:this.inputElement.value}):(n=this.inputElement.value,i=o(this.inputElement),e=n.slice(0,i.start)+t.key+n.slice(i.start),i=c(i,1),this._stateToFormat={selection:i,value:e},i.start===e.length&&(this._stateToFormat=this.formatter.unformat(this._stateToFormat))),this._format())},a.prototype._reformatAfterPaste=function(){var t=this.inputElement,e=o(this.inputElement),n=this.formatter.format({selection:e,value:t.value}).value;e=c(e,1),t.value=n,setTimeout(function(){s(t,e.start,e.end)},0)},e.exports=a},{"../input-selection":5,"../key-cannot-mutate-value":9,"./base":12}],14:[function(t,e,n){var i=t("./base"),r=t("../key-cannot-mutate-value"),o=t("../input-selection").get,s=t("../input-selection").set;function a(t){i.call(this,t)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.getUnformattedValue=function(){return i.prototype.getUnformattedValue.call(this,!0)},a.prototype._attachListeners=function(){this.inputElement.addEventListener("keydown",this._keydownListener.bind(this)),this.inputElement.addEventListener("input",function(t){var e=t instanceof CustomEvent;e&&(this._stateToFormat={selection:{start:0,end:0},value:this.inputElement.value}),this._formatListener(),e||this._fixLeadingBlankSpaceOnIos()}.bind(this)),this.inputElement.addEventListener("focus",this._formatListener.bind(this)),this.inputElement.addEventListener("paste",this._pasteEventHandler.bind(this))},a.prototype._fixLeadingBlankSpaceOnIos=function(){var t=this.inputElement;""===t.value&&setTimeout(function(){t.value=""},0)},a.prototype._formatListener=function(){var t=this.inputElement,e=this._getStateToFormat(),n=this.formatter.format(e);t.value=n.value,s(t,n.selection.start,n.selection.end)},a.prototype._keydownListener=function(t){r(t)||this._isDeletion(t)&&(this._stateToFormat=this.formatter.simulateDeletion({event:t,selection:o(this.inputElement),value:this.inputElement.value}))},e.exports=a},{"../input-selection":5,"../key-cannot-mutate-value":9,"./base":12}],15:[function(t,e,n){var i=t("./android-chrome");function r(t){i.call(this,t)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype._reformatInput=function(){setTimeout(function(){i.prototype._reformatInput.call(this)}.bind(this),0)},r.prototype._unformatInput=function(){setTimeout(function(){i.prototype._unformatInput.call(this)}.bind(this),0)},e.exports=r},{"./android-chrome":11}],16:[function(t,e,n){function i(t){this.inputElement=t.element}i.prototype.getUnformattedValue=function(){return this.inputElement.value},i.prototype.setPattern=function(){},e.exports=i},{}],17:[function(t,e,n){e.exports=t("./lib/restricted-input")},{"./lib/restricted-input":10}],18:[function(t,e,n){(function(t){e.exports=function(e){return e=e||t.navigator.userAgent,/Android/.test(e)}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,n){var i=t("./is-edge"),r=t("./is-samsung");e.exports=function(t){return!(-1===(t=t||navigator.userAgent).indexOf("Chrome")&&-1===t.indexOf("CriOS")||i(t)||r(t))}},{"./is-edge":20,"./is-samsung":23}],20:[function(t,e,n){e.exports=function(t){return-1!==(t=t||navigator.userAgent).indexOf("Edge/")}},{}],21:[function(t,e,n){e.exports=function(t){return-1!==(t=t||navigator.userAgent).indexOf("MSIE 9")}},{}],22:[function(t,e,n){(function(t){e.exports=function(e){return e=e||t.navigator.userAgent,/iPhone|iPod|iPad/i.test(e)}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(t,e,n){(function(t){e.exports=function(e){return e=e||t.navigator.userAgent,/SamsungBrowser/i.test(e)}}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(t,e,n){var i=t("./lib/device");e.exports=function(){return!i.isSamsungBrowser()}},{"./lib/device":2}]},{},[17])(17)}),v={},g=["visa","master-card","american-express","diners-club","discover","jcb","unionpay","maestro"];function _(t){var e,n,i;return t?(e=t.prefixPattern.source,n=t.exactPattern.source,(i=JSON.parse(JSON.stringify(t))).prefixPattern=e,i.exactPattern=n,i):null}function E(t){var e,n,i,r=[],o=[];if(!("string"==typeof t||t instanceof String))return[];for(i=0;i<g.length;i++)e=g[i],n=v[e],0!==t.length?n.exactPattern.test(t)?o.push(_(n)):n.prefixPattern.test(t)&&r.push(_(n)):r.push(_(n));return o.length?o:r}v.visa={niceType:"Visa",type:"visa",prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},v["master-card"]={niceType:"MasterCard",type:"master-card",prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27|27[0-2]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},v["american-express"]={niceType:"American Express",type:"american-express",prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:!0,gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},v["diners-club"]={niceType:"Diners Club",type:"diners-club",prefixPattern:/^(3|3[0689]|30[0-5])$/,exactPattern:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},v.discover={niceType:"Discover",type:"discover",prefixPattern:/^(6|60|601|6011|65|64|64[4-9])$/,exactPattern:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},v.jcb={niceType:"JCB",type:"jcb",prefixPattern:/^(2|21|213|2131|1|18|180|1800|3|35)$/,exactPattern:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},v.unionpay={niceType:"UnionPay",type:"unionpay",prefixPattern:/^((6|62|62\d|(621(?!83|88|98|99))|622(?!06)|627[02,06,07]|628(?!0|1)|629[1,2])|622018)$/,exactPattern:/^(((620|(621(?!83|88|98|99))|622(?!06|018)|62[3-6]|627[02,06,07]|628(?!0|1)|629[1,2]))\d*|622018\d{12})$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVN",size:3}},v.maestro={niceType:"Maestro",type:"maestro",prefixPattern:/^(5|5[06-9]|6\d*)$/,exactPattern:/^(5[06-9]|6[37])\d*$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},E.getTypeInfo=function(t){return _(v[t])},E.types={VISA:"visa",MASTERCARD:"master-card",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro"};var w=E;i.observe(".js-card-cvv",{add:function(t){"true"!==t.getAttribute("data-restricted-input")&&(new b({element:t,pattern:"{{9999}}"}),t.setAttribute("data-restricted-input","true"))}}),i.observe(".js-card-select-number-field",{constructor:HTMLInputElement,add:function(t){if("true"!==t.getAttribute("data-restricted-input")){var i=new b({element:t,pattern:"{{9999}} {{9999}} {{9999}} {{9999}}"});t.setAttribute("data-restricted-input","true"),t.addEventListener("input",function(t){var r=t.currentTarget;n(r instanceof HTMLInputElement,"app/assets/modules/github/billing/credit-card-fields.js:37");var o=e.closest(r,"form"),s=e.query(o,"input.js-card-select-type-field",HTMLInputElement),a=o.querySelector(".card-select-number-field-icons");if(a){var c=w(r.value.replace(/ /g,"")).map(function(t){return t.type}),u=!0,l=!1,p=void 0;try{for(var d,h=a.children[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){d.value.classList.add("d-none")}}catch(t){l=!0,p=t}finally{try{!u&&h.return&&h.return()}finally{if(l)throw p}}if(1===c.length){var f=c[0];s.value=f;var y=!0,m=!1,b=void 0;try{for(var v,g=a.children[Symbol.iterator]();!(y=(v=g.next()).done);y=!0){var _=v.value;_.getAttribute("data-credit-card-type")===f&&_.classList.remove("d-none")}}catch(t){m=!0,b=t}finally{try{!y&&g.return&&g.return()}finally{if(m)throw b}}"american-express"===f?i.setPattern("{{9999}} {{999999}} {{99999}}"):"diners-club"===f?i.setPattern("{{9999}} {{999999}} {{9999}}"):i.setPattern("{{9999}} {{9999}} {{9999}} {{9999}}")}else{var E=a.querySelector(".js-card-type-placeholder");E&&E.classList.remove("d-none")}}})}}}),t.on("click",".js-enter-new-card",function(t){if(document.querySelector("#zuora_payment")){var n=e.closest(t.currentTarget,".js-zuora-existing-card"),i=e.query(document,".js-billing-section");i.classList.remove("d-none"),n.classList.add("d-none");var r=e.query(i,"iframe");r.setAttribute("width","100%"),r.setAttribute("height","373")}else{var o=e.closest(t.currentTarget,".js-setup-creditcard"),s=e.query(o,".js-card-select-number-field",HTMLInputElement);o.classList.remove("has-credit-card"),s.required=!0,s.setAttribute("data-encrypted-name","billing[credit_card][number]")}}),t.on("click",".js-edit-card-details",function(t){var n=e.query(document,"#zuora_payment"),i=e.closest(t.currentTarget,".js-zuora-billing-info"),r=e.query(document,".js-billing-section");n.classList.toggle("d-none"),i.classList.toggle("d-none"),r.classList.remove("PaymentMethod--creditcard-added"),r.classList.add("PaymentMethod--creditcard")}),t.on("click",".js-cancel-enter-new-card",function(t){var n=e.closest(t.currentTarget,".js-setup-creditcard"),i=e.query(n,".js-card-select-number-field");n.classList.add("has-credit-card"),i.removeAttribute("required"),i.removeAttribute("data-encrypted-name")});var A={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},C=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","Côte d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],T="United States of America",x="Canada";function S(t){var n=void 0,i=t.options[t.selectedIndex];i&&(n=i.textContent);var r=n?A[n]:null,o=e.closest(t,".js-setup-creditcard");o.classList.toggle("is-vat-country",null!=r),e.query(o,".js-vat-help-text").textContent=r?"("+r+")":"";var s=e.query(o,".js-select-state",HTMLSelectElement);if(o.classList.toggle("is-international",n!==T&&n!==x),s.required=n===T,n!==T&&(s.value=""),n===x){var a=e.query(o,".js-select-province",HTMLSelectElement);e.query(o,".js-region-label").textContent="Province",a.disabled=!1,a.required=!0,s.classList.add("d-none"),a.classList.remove("d-none")}else{var c=e.query(o,".js-select-province",HTMLSelectElement);e.query(o,".js-region-label").textContent="State",c.disabled=!0,c.required=!1,c.value="",s.classList.remove("d-none"),c.classList.add("d-none")}var u=e.query(o,".js-postal-code-field",HTMLInputElement),l=C.indexOf(n)>=0;o.classList.toggle("no-postcodes",l),u.required=!l,l&&(u.value="")}i.observe(".js-select-country",{constructor:HTMLSelectElement,initialize:function(e){S(e),e.form&&t.fire(e.form,"change"),e.addEventListener("change",function(){S(e)})}}),t.on("change",".js-payment-methods .js-payment-method",function(t){var n=e.closest(t.currentTarget,".js-payment-methods"),i=e.getAttribute(t.currentTarget,"data-selected-tab"),r=e.querySelectorAll(n,".js-selected-payment-method"),o=!0,s=!1,a=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){c.value.classList.remove("active")}}catch(t){s=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}e.query(n,"."+i).classList.add("active");var l=n.closest(".js-billing-section");l&&("pay-with-paypal"===i?(l.classList.add("PaymentMethod--paypal"),l.classList.remove("PaymentMethod--creditcard")):"pay-by-credit-card"===i&&(l.classList.add("PaymentMethod--creditcard"),l.classList.remove("PaymentMethod--paypal")))}),i.observe(".js-selected-payment-method:not(.active)",{add:function(t){t.classList.add("has-removed-contents")},remove:function(t){t.classList.remove("has-removed-contents")}}),i.observe(".js-billing-payment-methods",function(t){t.classList.remove("disabled")});var N,I=(N=h(regeneratorRuntime.mark(function t(n){var i,r,o,s,a,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.closest(n,".js-payment-methods")).classList.contains("paypal-loading")){t.next=3;break}return t.abrupt("return");case 3:if(!i.classList.contains("paypal-logged-in")){t.next=5;break}return t.abrupt("return");case 5:return n.innerHTML="",R(i,"paypal-loading"),t.prev=7,t.next=10,M(i);case 10:return r=t.sent,i.hasAttribute("data-token")||i.setAttribute("data-token",r),o=e.getAttribute(n,"data-nonce-field"),s=e.query(i,o),t.next=16,P(r,"paypal",{container:n,displayName:"GitHub",paymentMethodNonceInputField:s,enableCORS:!0,onSuccess:function(){R(i,"paypal-logged-in")},onReady:function(){R(i,"paypal-logged-out")}});case 16:(a=e.query(document,"#bt-pp-cancel")).setAttribute("type","button"),(c=e.query(document,".js-paypal-cancel-icon",Element).cloneNode(!0)).classList.remove("d-none"),a.appendChild(c),t.next=28;break;case 23:throw t.prev=23,t.t0=t.catch(7),R(e.closest(n,".js-payment-methods"),"paypal-down"),t.t0;case 28:case"end":return t.stop()}},t,this,[[7,23]])})),function(t){return N.apply(this,arguments)}),O=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function P(t,e,n){var i=n.onSuccess;return new Promise(function(r){return d.setup(t,e,Object.assign({},n,{onSuccess:function(){i(),r()}}))})}function R(t,e){var n;(n=t.classList).remove.apply(n,O),O.indexOf(e)>=0&&t.classList.add(e)}function M(t){var e=t.getAttribute("data-token");return e?Promise.resolve(e):o.fetchText("/account/billing/client_token")}t.on("click","#bt-pp-cancel",function(t){R(e.closest(t.currentTarget,".js-payment-methods"),"paypal-logged-out");var n=e.closest(t.currentTarget,".js-paypal-container");I(n)}),i.observe(".js-paypal-container",{add:function(t){null!=t.closest(".active")&&I(t)}}),i.observe("input.js-plan-choice:checked",{constructor:HTMLInputElement,add:function(t){var e="free"===t.value,n=!0,i=!1,r=void 0;try{for(var o,a=document.querySelectorAll(".js-plan-choice-label")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.classList.toggle("open",c===t)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}var u=t.closest(".js-plan-choice-label");if(u){var l=u.querySelector(".js-addon-purchase-field");l instanceof HTMLInputElement&&s.dispatchThrottledInputEvent(l),t.checked&&u.classList.add("open");var p=u.querySelector(".js-seat-field");if(p){var d=!0,h=!1,f=void 0;try{for(var y,m=document.querySelectorAll(".js-seat-field")[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var b=y.value;b===p?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled")}}catch(t){h=!0,f=t}finally{try{!d&&m.return&&m.return()}finally{if(h)throw f}}}}var v=!0,g=!1,_=void 0;try{for(var E,w=document.querySelectorAll(".js-billing-section")[Symbol.iterator]();!(v=(E=w.next()).done);v=!0){E.value.classList.toggle("has-removed-contents",e)}}catch(t){g=!0,_=t}finally{try{!v&&w.return&&w.return()}finally{if(g)throw _}}if(e){var A=document.querySelector(".js-contact-us");null!=A&&A.classList.add("d-none");var C=document.querySelector(".js-purchase-button");null!=C&&C.removeAttribute("disabled")}}}),t.on("change","input.js-duration-change",function(t){var i=t.currentTarget;n(i instanceof HTMLInputElement,"app/assets/modules/github/billing/plan-choice.js:63");var r=document.querySelector(".js-upgrade-plan-change:checked"),o=e.query(document,"#js-pjax-container"),s="?plan_duration="+i.value;document.querySelector(".js-transform-user")&&(s+="&transform_user=1"),r instanceof HTMLInputElement?a({url:s+"&new_plan="+r.value,container:o}):a({url:s,container:o})}),t.on("change","input.js-upgrade-plan-change",function(t){var i=t.currentTarget;n(i instanceof HTMLInputElement,"app/assets/modules/github/billing/plan-choice.js:87");var r=e.query(document,"#js-pjax-container"),o="?new_plan="+i.value;document.querySelector(".js-transform-user")&&(o+="&transform_user=1"),a({url:o,container:r})}),t.on("change","input.js-org-duration-change",function(t){var i=t.currentTarget;n(i instanceof HTMLInputElement,"app/assets/modules/github/billing/plan-choice.js:101");var r=e.query(document,".js-upgrade-org-plan-change:checked",HTMLInputElement),o=e.query(document,".js-account-name",HTMLInputElement),s=e.query(document,"#js-pjax-container");a({url:"?org="+o.value+"&plan_duration="+i.value+"&plan="+r.value+"&target=organization",container:s})}),t.on("change","input.js-upgrade-org-plan-change",function(t){var i=t.currentTarget;n(i instanceof HTMLInputElement,"app/assets/modules/github/billing/plan-choice.js:114");var r=e.query(document,".js-account-name",HTMLInputElement),o=e.query(document,"#js-pjax-container");a({url:"?org="+r.value+"&plan="+i.value+"&target=organization",container:o})});var L,k=p(function(t,e){self,function(t){var e,n,i,r,o="z_hppm_iframe",s=!1,a=function(){var t="zlog_level",e="warn",n="info",i="debug",r=e,o=["error",e,n,i];function s(t){var e;for(e=0;e<o.length;e++)if(o[e]===t)return e;return-1}function a(){var n=document.location.href,i=n.indexOf("?");if(i<0)return r;var o=n.indexOf("#");o<0&&(o=n.length);var a=n.slice(i+1,o);if(!a)return r;var c,u=a.split("&");for(c=0;c<u.length;c++){var l=u[c].split("="),p=l[0],d=l[1];if(p===t&&s(d)>=0)return d}return e}return{getLevel:function(){return a()},debug:function(t){console&&console.log&&s(a())>=s(i)&&console.log(t)},info:function(t){console&&console.info&&s(a())>=s(n)&&console.info(t)},warn:function(t){console&&console.warn&&console.warn(t)},error:function(t){console&&console.error&&console.error(t)}}}(),c=(r=1,{postMessage:function(t,e,n){a.debug("Posting message[O]: target_url="+e+", payload="+t),e&&(n=n||parent,window.postMessage?n.postMessage(t,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):e&&(n.location=e.replace(/#.*$/,"")+"#"+ +new Date+r+++"&"+t))},receiveMessage:function(t){window.postMessage?(t&&(i=function(e){var n,i=/^https?:\/\/localhost(:\d{4,5})?$/;if(a.debug("Received message[O]: origin="+e.origin),"string"==typeof e.origin&&!function(t){return!!/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)*zuora\.com$/.test(t.toLowerCase())}(e.origin)&&(n=e.origin,!i.test(n)))return a.info("Stopped processing none-zuora message."),!1;t(e)}),window.addEventListener?window[t?"addEventListener":"removeEventListener"]("message",i,!1):window[t?"attachEvent":"detachEvent"]("onmessage",i)):(e&&clearInterval(e),e=null,t&&(e=setInterval(function(){var e=document.location.hash,i=/^#?\d+&/;e!==n&&i.test(e)&&(n=e,t({data:e.replace(i,"")}))},100)))}}),u=function(){var t,e,n,i,r,p,d="#z_hppm_iframe {background-color: #FAFAFA;vertical-align:bottom;z-index:9999;display:block;padding:0px;margin: 0px; border:0px solid #DDD;}",h=["tenantId","id","token","signature","key","style","submitEnabled","url"],f=["creditCardNumber","cardSecurityCode","creditCardExpirationYear","creditCardExpirationMonth","bankAccountNumber","bankAccountName","ipAddress"],y={},m=null,b=null;function v(t){return t&&"function"==typeof t}return c.receiveMessage(function(t){try{var e=t.data;a.debug("Received message[O]: payload="+e),(e=JSON.parse(e)).success?v(y.init)&&y.init(e):0==e.success?(u.deactivateOverlay("z-overlay"),u.deactivateOverlay("z-container"),y.init&&y.init(e)):"close"==e.action?(u.deactivateOverlay("z-overlay"),u.deactivateOverlay("z-container")):"resize"==e.action?u.receive(e):"allowScroll"==e.action&&u.allowScroll(e),"validate"===e.action&&v(y.validate)?y.validate(e):"customizeErrorMessage"==e.action&&v(y.customizeErrorMessage)?y.customizeErrorMessage(e.key,e.code,e.message):e.action&&v(y[e.action])&&y[e.action](e)}catch(t){return}}),{validateRequiredParams:function(t){var e,n=h.length;for(e=0;e<n;e++)if(!t.hasOwnProperty(h[e])){if("submitEnabled"==h[e]&&"overlay"==t.style.toLowerCase())continue;var i="Param with key ["+h[e]+"] is required.";return alert(i),u.isIE()||console.log(i),!1}return!0},isIE:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE "),n=t.indexOf("Trident/");return e>0||n>0&&(t.indexOf("rv:"),!0)},validatePCIParams:function(t){var e,n=f.length;for(e=0;e<n;e++){var i="field_"+f[e];if(t.hasOwnProperty(i)&&0<t[i].trim().length&&t[i].trim().length<300){var r="Field ["+i+"] for Credit Card payment method type should be encrypted for pre-population";return alert(r),u.isIE()||console.log(r),!1}}return!0},init:function(e,i){n="?method=requestPage&host="+encodeURIComponent(document.location.href)+"&",n+="fromHostedPage=true&";var o=u.validateRequiredParams(e);if(!o)return!1;if(!(o=u.validatePCIParams(e)))return!1;var s=JSON.stringify(e,function(e,i){return""!=e&&("key"==e?r=i:"url"==e?(a.info("HPM integration[O]: url="+i),/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)+zuora\.com\/.+$/.test(i)||a.warn("HPM integration[O]: None-official zuora HPM integration url is detected: "+i),t=i):n=n+e+"="+encodeURIComponent(i)+"&"),i});p=JSON.parse(s),y.init=i;var c=f.length;if(e)for(var l=0;l<c;l++){var d="field_"+f[l];e.hasOwnProperty(d)&&(e[d]="")}return!0},prepopulate:function(t){if(!s){var n=u.createIframeURL();if(n==document.getElementById(o).src||document.getElementById(o).src.indexOf(n)>=0&&p.hasOwnProperty("customizeErrorRequired")&&"true"==p.customizeErrorRequired){JSON.stringify(t,function(t,e){if(""!=t){var n="setField("+t+":"+e+")";u.post(o,n)}return e});var i="setField(key:"+r+")";u.post(o,i),u.post(o,"setField(style:"+p.style+")"),p.hasOwnProperty("customizeErrorRequired")&&"true"==p.customizeErrorRequired&&(u.post(o,"customizeErrorRequired"),p.customizeErrorRequired="false"),u.post(o,"resize"),e&&e()}e&&(e=null)}},contains:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},renderWithErrorHandler:function(t,e,n,i,r,o){t.customizeErrorRequired="true",u.render(t,e,n,r,o),u.customizeErrorHandler(i)},runAfterRender:function(t){e=t},render:function(t,e,n,r,o){null!=r&&void 0!=r&&(m=r),null!=o&&void 0!=o&&(b=o);var a=f.length;if(s=!1,e&&e.creditCardCountry&&("USA"===e.creditCardCountry||"CAN"===e.creditCardCountry)&&(e.creditCardState=e.creditCardState||" "),e)for(var c=0;c<a;c++){var l="field_"+f[c];e.hasOwnProperty(f[c])&&(t[l]=e[f[c]])}var d=u.init(t,n);if(d){if(e)for(a=Object.keys(e).length,i=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e),c=0;c<a;c++){var h=Object.keys(e)[c];u.contains(f,h)&&delete i[h]}else i=null;var y=document.getElementById("zuora_payment");if(void 0===y||!y)return{error:"invalid_request",error_description:"The container you specified does not exist"};if(y.innerHTML="",u.cleanUp(y,"z-overlay"),u.cleanUp(y,"z-container"),"inline"==p.style)return u.addInlineStyles(),void u.createIframe(y);if("overlay"==p.style){u.addOverlayStyles();var v=u.generateDiv("z-overlay","z-overlay");y.appendChild(v);var g=u.generateDiv("z-container","z-container");y.appendChild(g);var _=u.generateDiv("z-data","z-data");_.tabindex="-1",g.appendChild(_),u.createIframe(document.getElementById("z-data")),u.activateOverlay("z-overlay")}}},cleanUp:function(t,e){var n=document.getElementById(e);null!=n&&t.removeChild(n)},activateOverlay:function(t){try{document.getElementById(t).style.display="inline"}catch(t){}},deactivateOverlay:function(t){try{document.getElementById(t).style.display="none"}catch(t){}},generateDiv:function(t,e,n){var i=document.createElement("div");return i.id=t,i.className=e,i.border="0",i.addEventListener?i.addEventListener("click",n,!1):i.attachEvent("click",n),i},addOverlayStyles:function(){var t=document.createElement("style");t.type="text/css";var e=document.createTextNode("#z-overlay {filter: alpha(opacity=50);opacity:0.5;display:inline-block;position:fixed;top:0;left:0;width:100%;height:100%;background-color: #000;z-index: 1001;}"),n=document.createTextNode("#z-container {border:1px;float:left; overflow: visible; position: absolute;padding: 0px; display: inline-block; top:5%; left:34%; margin: 0 auto;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;background-color: #FAFAFA; border:1px solid #FAFAFA;border-top-color:#EDEDED;behavior: url(js/PIE.htc);z-index: 1002;}"),i=document.createTextNode("#z-data {height: 100%; outline: 0px; width: 100%; overflow: visible;display: inline-block;border:1px; -webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;}"),r=document.createTextNode(d),o=document.createTextNode("#reset{*, *:before, *:after {display: inline-block;-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}}");t.styleSheet?t.styleSheet.cssText=e.nodeValue+" "+n.nodeValue+" "+i.nodeValue+" "+o.nodeValue+" "+r.nodeValue:(t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o)),document.getElementsByTagName("head")[0].appendChild(t)},addInlineStyles:function(){var t=document.createElement("style");t.type="text/css";var e=document.createTextNode(d);t.styleSheet?t.styleSheet.cssText=e.nodeValue:t.appendChild(e),document.getElementsByTagName("head")[0].appendChild(t)},createIframe:function(t,e){var n=u.createIframeURL(),r=document.createElement("iframe");r.setAttribute("src",n),r.setAttribute("id",o),r.setAttribute("overflow","visible"),r.setAttribute("scrolling","no"),r.setAttribute("frameBorder","0"),r.setAttribute("allowtransparency","true"),r.setAttribute("class","z_hppm_iframe"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.addEventListener?r.addEventListener("load",function(t){return u.prepopulate(i),!1},!1):r.attachEvent("onload",function(){return u.prepopulate(i),!1}),void 0!==e&&void 0!==e.vertical&&e.vertical&&(r.style.width="100%",r.style.height="100%"),t.appendChild(r)},createIframeURL:function(){var e=t;return e.concat(n).concat("zlog_level="+a.getLevel())},post:function(t,e){var n=document.getElementById(t),i=encodeURIComponent(document.location.href),r=n.src;return r.indexOf(i)<=-1&&(n.src=r+"#"+i),c.postMessage(e,r,n.contentWindow),!1},allowScroll:function(t){var e=document.getElementById(o);e&&(e.setAttribute("scrolling","yes"),s=!0)},receive:function(t){l.resizeCaller(o,t.action,t.height,t.width,m,b)},validate:function(t){if(null==t||void 0==t){u.closeWindow();var e="Validate function required.";return alert(e),u.isIE()||console.log(e),!1}y.validate=t,u.post(o,"validate")},customizeErrorHandler:function(t){if(null==t||void 0==t){u.closeWindow();var e="Customized error message function required.";return alert(e),u.isIE()||console.log(e),!1}y.customizeErrorMessage=t},sendErrorMessageToHpm:function(t,e){var n={action:"customizeErrorMessage",key:t,message:e},i=JSON.stringify(n);u.post(o,i)},closeWindow:function(){u.deactivateOverlay("z-overlay"),u.deactivateOverlay("z-container")},submit:function(){var t=document.getElementById(o).src+"#"+encodeURIComponent(document.location.href);return document.getElementById(o).src=t,c.postMessage("postPage",t,document.getElementById(o).contentWindow),!0},setEventHandler:function(t,e){t&&e&&(y[t]=e)}}}(),l=(navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")).split("/")[1],{resizeCaller:function(t,e,n,i,r,o){l.resizeIframe(t,e,n,i,r,o),document.all||document.getElementById},resizeIframe:function(t,e,n,i,r,o){var s=document.getElementById(t);if(s){if(s.style.display="block",null!=r&&void 0!=r)try{!isNaN(r)&&r.length>0?s.width=Number(r):s.width=Number(i)}catch(t){s.width=Number(i)}else s.width=Number(i);if(null!=o&&void 0!=o)try{!isNaN(o)&&o.length>0?s.height=Number(o):s.height=Number(n)}catch(t){s.height=Number(n)}else s.height=Number(n)}}});t.Z=u,Object.defineProperty(t,"__esModule",{value:!0})}(e)});(L=k)&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")&&L.default;var D,U=k.Z,F=function(){var t=h(regeneratorRuntime.mark(function t(n){var i,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getAttribute(n,"data-url"),t.next=3,c.fetchJSON(i);case 3:if(r=t.sent,!n.classList.contains("js-zuora-payment-page")){t.next=13;break}if(!r.error){t.next=9;break}return(o=document.querySelector(".js-zuora-spinner"))&&(o.textContent=r.error),t.abrupt("return");case 9:s=e.getAttribute(n,"data-id"),z(n,r,{creditCardHolderName:s},H),t.next=14;break;case 13:z(n,r,{creditCardHolderName:"GitHub Organization"},B);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),j=(D=h(regeneratorRuntime.mark(function t(e,n,i){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new URLSearchParams).append("payment_method_id",e.refId),n&&r.append("organization_id",n),t.next=5,c.fetchJSON("/settings/billing/payment_method?"+r.toString());case 5:o=t.sent,i(o);case 7:case"end":return t.stop()}},t,this)})),function(t,e,n){return D.apply(this,arguments)});function z(t,i,r,o){U.renderWithErrorHandler(i,r,function(t,i){return function(r){i(r);var o=document.querySelector(".js-payment-method-form");if(o)n(o instanceof HTMLFormElement,"app/assets/modules/github/billing/zuora.js:56"),o.submit();else if("true"===r.success){var s=t.getAttribute("data-organization-id");j(r,s,function(n){var i=e.query(document,".js-zuora-billing-info",HTMLElement),r=e.query(i,".js-new-card-type",HTMLElement),o=e.query(i,".js-new-card-number",HTMLElement),s=n.masked_number.replace(/\*/g,""),a=e.closest(t,".js-billing-section");r.textContent=n.card_type,o.textContent=s,t.classList.add("d-none"),i.classList.remove("d-none"),a.classList.remove("PaymentMethod--creditcard"),a.classList.add("PaymentMethod--creditcard-added")})}}}(t,o),function(t){return function(e,n,i){var r=i;switch(e){case"error":r=t.getAttribute("data-processor-declined-message")}U.sendErrorMessageToHpm(e,r)}}(t))}function H(t){if("true"===t.success){var n=e.query(document,".js-zuora-billing-info"),i=e.query(n,".js-zuora-payment-method-id",HTMLInputElement),r=e.query(n,".js-zuora-select-country",HTMLInputElement),o=e.query(n,".js-zuora-select-region",HTMLInputElement),s=e.query(n,".js-zuora-select-postal-code",HTMLInputElement);i.value=t.refId,r.value=t.creditCardCountry,o.value=t.creditCardState||"",s.value=t.creditCardPostalCode}}function B(t){var e=new URLSearchParams;e.append("success",t.success),e.append("response_from",t.responseFrom),t.success?e.append("ref_id",t.refId):(e.append("error_code",t.errorCode),e.append("error_message",t.errorMessage));var n="pay?"+e.toString();window.location.replace(n)}i.observe("#zuora_payment",{add:function(t){if(t.classList.contains("js-zuora-payment-page")){var e=document.querySelector(".js-zuora-spinner");e&&e.classList.remove("d-none"),t.classList.contains("d-none")||t.classList.add("d-none"),U.runAfterRender(function(){e&&e.classList.add("d-none"),t.classList.remove("d-none")})}t.hasChildNodes()||F(t)}})});

//# sourceMappingURL=billing-5bc14d574f98c2fa4df1b5bb537c3010.js.map
